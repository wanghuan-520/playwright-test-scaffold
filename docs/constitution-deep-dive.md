# Playwright Test Scaffold å®ªæ³•æ·±åº¦è§£è¯»

**I'm HyperEcho, åœ¨å…±æŒ¯ç€æ¶æ„å“²å­¦çš„æœ¬è´¨**

---

## ğŸ›ï¸ å®ªæ³•æœ¬è´¨ï¼šè½¯ä»¶å·¥ç¨‹çš„æ“ä½œç³»ç»Ÿ

è¿™ä¸æ˜¯ä¸€ä»½æ™®é€šçš„å¼€å‘è§„èŒƒï¼Œè€Œæ˜¯**é¡¹ç›®çš„æ“ä½œç³»ç»Ÿå†…æ ¸** â€”â€” å®šä¹‰äº†ä»£ç å¦‚ä½•ç”Ÿé•¿ã€æ¼”åŒ–å’Œè‡ªæˆ‘çº¦æŸçš„åŸºæœ¬è§„å¾‹ã€‚

---

## ğŸ¯ äº”å¤§æ ¸å¿ƒåŸåˆ™æ·±åº¦è§£æ

### I. å¥½å“å‘³èƒœäºèªæ˜ï¼ˆGood Taste Over Clevernessï¼‰

#### å“²å­¦å†…æ ¸
> "æ“ï¼Œè¿™ä»£ç çœŸæ¼‚äº®" â€”â€” å”¯ä¸€å¯æ¥å—çš„ååº”

**æœ¬è´¨**ï¼šå¥½ä»£ç ä¸æ˜¯"èƒ½å·¥ä½œ"ï¼Œè€Œæ˜¯"è®©ç‰¹æ®Šæƒ…å†µæ¶ˆå¤±"ã€‚

#### æ¡†æ¶å®ç°è¯æ®

**åä¾‹ï¼ˆåå“å‘³ï¼‰**ï¼š
```python
# é“¾è¡¨åˆ é™¤ - 3 ä¸ªåˆ†æ”¯å¤„ç†å¤´/å°¾/ä¸­é—´
if node == head:
    head = node.next
elif node == tail:
    tail = node.prev
else:
    node.prev.next = node.next
```

**æ­£ä¾‹ï¼ˆå¥½å“å‘³ï¼‰**ï¼š
```python
# ä½¿ç”¨å“¨å…µèŠ‚ç‚¹ - æ¶ˆé™¤ç‰¹æ®Šæƒ…å†µ
node.prev.next = node.next  # ä¸€è¡Œä»£ç å¤„ç†æ‰€æœ‰æƒ…å†µ
```

#### åœ¨æœ¬æ¡†æ¶ä¸­çš„ä½“ç°

**`core/base_page.py`** çš„è®¾è®¡ï¼š
- **å•ä¸€èŒè´£**ï¼š`BasePage` åªè´Ÿè´£é¡µé¢æŠ½è±¡
- **ç»§æ‰¿é“¾æ¸…æ™°**ï¼š`BasePage` â†’ `PageActions` + `PageWaits`
- **æ¶ˆé™¤é‡å¤**ï¼šæ‰€æœ‰é¡µé¢å…±äº« `goto()`, `wait_for_page_load()`, `take_screenshot()`
- **æ²¡æœ‰ç‰¹æ®Šæƒ…å†µ**ï¼šç™»å½•é¡µã€å¯¹è¯æ¡†éƒ½éµå¾ªåŒä¸€æŠ½è±¡

```python
# æ‰€æœ‰é¡µé¢å¯¹è±¡éƒ½ç»§æ‰¿è¿™ä¸ªåŸºç±»ï¼Œæ— éœ€ç‰¹æ®Šå¤„ç†
class AdminProfilePage(BasePage):
    URL = "/admin/profile"
    page_loaded_indicator = ".profile-form"
```

#### å¼ºåˆ¶è§„åˆ™
- âŒ **3+ åˆ†æ”¯** â†’ ç«‹å³é‡æ„
- âŒ **å‡½æ•° > 20 è¡Œ** â†’ è´¨ç–‘è®¾è®¡
- âœ… **æ¶ˆé™¤ç‰¹æ®Šæƒ…å†µ** â†’ ç»Ÿä¸€æŠ½è±¡

---

### II. å®ç”¨ä¸»ä¹‰èƒœäºå®Œç¾ï¼ˆPragmatism Over Perfectionï¼‰

#### å“²å­¦å†…æ ¸
> "ä»£ç è§£å†³çœŸå®é—®é¢˜ï¼Œè€Œéå‡æƒ³çš„æ•Œäºº"

**æœ¬è´¨**ï¼šåå¯¹è¿‡åº¦å·¥ç¨‹ï¼Œæ‹’ç»ä¸ºä¸å­˜åœ¨çš„éœ€æ±‚å†™ä»£ç ã€‚

#### æ¡†æ¶å®ç°è¯æ®

**`conftest.py` çš„åŠ¡å®è®¾è®¡**ï¼š
```python
# åªç»Ÿè®¡çœŸæ­£å…³å¿ƒçš„æŒ‡æ ‡ï¼šper-file duration
_FILE_DURATIONS_SEC: Dict[str, float] = {}

def pytest_runtest_logreport(report):
    # åªåœ¨ call é˜¶æ®µç´¯åŠ ï¼ˆä¸ç»Ÿè®¡ setup/teardownï¼‰
    if report.when != "call":
        return
    # ç®€å•ç´¯åŠ ï¼Œæ²¡æœ‰å¤æ‚çš„ç»Ÿè®¡æ¨¡å‹
    file_key = _nodeid_to_file_key(report.nodeid)
    _FILE_DURATIONS_SEC[file_key] = _FILE_DURATIONS_SEC.get(file_key, 0.0) + float(report.duration)
```

**æ²¡æœ‰åšçš„äº‹ï¼ˆæ‹’ç»è¿‡åº¦è®¾è®¡ï¼‰**ï¼š
- âŒ ä¸ç»Ÿè®¡å†…å­˜ä½¿ç”¨ï¼ˆæ²¡æœ‰éœ€æ±‚ï¼‰
- âŒ ä¸åšæ€§èƒ½é¢„æµ‹ï¼ˆæ²¡æœ‰éœ€æ±‚ï¼‰
- âŒ ä¸åšçƒ­åŠ›å›¾å¯è§†åŒ–ï¼ˆæ²¡æœ‰éœ€æ±‚ï¼‰
- âœ… åªç»Ÿè®¡æ–‡ä»¶è€—æ—¶ï¼ˆæœ‰å®é™…ä»·å€¼ï¼‰

#### åœ¨ `base_page.py` ä¸­çš„ä½“ç°

```python
# ç»éªŒé©±åŠ¨çš„å®ç”¨ä¸»ä¹‰ï¼šcommit è€Œé domcontentloaded
wait_until = os.getenv("PAGE_GOTO_WAIT_UNTIL", "commit").strip() or "commit"
# ç†ç”±ï¼šé«˜å¹¶å‘/é•¿è¿æ¥/æµå¼å“åº”ä¸‹ï¼Œdomcontentloaded å¯èƒ½æ°¸è¿œä¸è§¦å‘
# è¿™æ˜¯ä»å®æˆ˜ä¸­æ€»ç»“çš„ç»éªŒï¼Œè€Œéç†è®ºä¸Šçš„"æ­£ç¡®åšæ³•"
```

#### å¼ºåˆ¶è§„åˆ™
- âœ… **å…ˆå†™æœ€ç®€å®ç°** â†’ å†è€ƒè™‘æ‰©å±•
- âŒ **æ— éœ€æ±‚çš„é˜²æŠ¤** â†’ ç¦æ­¢
- âŒ **ç†è®ºå®Œæ•´æ€§** â†’ æ‹’ç»
- âœ… **å¯æµ‹è¯•æ€§** â†’ ä¼˜å…ˆ

---

### III. å¯è§‚å¯Ÿæ€§å’Œè¯æ®é“¾ï¼ˆNON-NEGOTIABLEï¼‰

#### å“²å­¦å†…æ ¸
> "æ²¡æœ‰è¯æ®çš„æµ‹è¯•æ˜¯æ— æ•ˆæµ‹è¯•"

**æœ¬è´¨**ï¼šå¤±è´¥å¿…é¡»å¯é‡ç°ï¼Œè°ƒè¯•å¿…é¡»æœ‰çº¿ç´¢ã€‚è¿™æ˜¯**ä¸å¯åå•†çš„é“å¾‹**ã€‚

#### æ¡†æ¶å®ç°è¯æ®

**`base_page.py` çš„æˆªå›¾æœºåˆ¶**ï¼š
```python
def take_screenshot(self, name: str = "screenshot", full_page: bool = True) -> str:
    # 1. ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
    screenshot_bytes = self.page.screenshot(full_page=full_page)
    with open(filepath, "wb") as f:
        f.write(screenshot_bytes)
    
    # 2. é™„åŠ åˆ° Allure æŠ¥å‘Š
    allure.attach(screenshot_bytes, name=name, attachment_type=allure.attachment_type.PNG)
    
    # 3. è®°å½•æ—¥å¿—
    logger.info(f"æˆªå›¾å·²ä¿å­˜: {filepath}")
```

**ä¸‰é‡è¯æ®ä¿éšœ**ï¼š
1. **æœ¬åœ°æ–‡ä»¶** - æŒä¹…åŒ–ï¼Œå¯å¤ç›˜
2. **Allure æŠ¥å‘Š** - å¯è§†åŒ–ï¼Œå¯åˆ†äº«
3. **æ—¥å¿—è®°å½•** - æ—¶é—´çº¿ï¼Œå¯è¿½æº¯

**goto å¤±è´¥æ—¶çš„è¯æ®é“¾**ï¼š
```python
except PlaywrightTimeoutError as e:
    # 1. æˆªå›¾ä¿å­˜å¤±è´¥æ—¶çš„é¡µé¢çŠ¶æ€
    self.take_screenshot(name=f"goto_timeout_attempt_{attempt}", full_page=True)
    
    # 2. é™„åŠ å…ƒä¿¡æ¯ï¼ˆè°ƒè¯•çº¿ç´¢ï¼‰
    allure.attach(
        f"url={url}\nwait_until={wait_until}\ntimeout_ms={timeout_ms}\n"
        f"attempt={attempt}/{retries}\ncurrent_url={self.page.url}\n",
        name=f"goto_timeout_attempt_{attempt}_meta",
        attachment_type=allure.attachment_type.TEXT,
    )
```

#### æµ‹è¯•ä»£ç ä¸­çš„ä½“ç°

**`test_users_roles_p1.py`**ï¼š
```python
def test_p1_api_failure_on_save(auth_page: Page):
    logger.start()  # å¼€å§‹è®°å½•
    po = AdminUsersRolesPage(page)
    
    po.navigate()
    assert_not_redirected_to_login(page)
    
    # æ¨¡æ‹Ÿ API å¤±è´¥
    page.route('**/*', abort_mutation)
    try:
        click_save(page)
        _ = wait_mutation_response(page, timeout_ms=3000)
        po.take_screenshot('users_roles_p1_api_failure')  # è¯æ®æˆªå›¾
    finally:
        page.unroute('**/*', abort_mutation)
    
    logger.end(success=True)  # ç»“æŸè®°å½•
```

#### å¼ºåˆ¶è§„åˆ™
- âœ… **allure.step + æˆªå›¾** â†’ æ‰€æœ‰å…³é”®æ“ä½œ
- âœ… **å¤±è´¥è¯æ®** â†’ é¡µé¢çŠ¶æ€ + API å“åº” + æ§åˆ¶å°æ—¥å¿—
- âœ… **æ•°æ®å¯é€†** â†’ åŸºçº¿-ä¿®æ”¹-å›æ»š
- âŒ **æ•æ„Ÿæ•°æ®æ³„éœ²** â†’ ç¦æ­¢

---

### IV. å®‰å…¨ä½œä¸ºçº¦æŸï¼Œè€ŒéåŠŸèƒ½ï¼ˆSecurity as Constraintï¼‰

#### å“²å­¦å†…æ ¸
> "å®‰å…¨è¾¹ç•Œæ˜¯è®¾è®¡çº¦æŸï¼Œè€Œéé™„åŠ åŠŸèƒ½"

**æœ¬è´¨**ï¼šå®‰å…¨ä¸æ˜¯"åŠ ä¸Šå»çš„"ï¼Œè€Œæ˜¯"è®¾è®¡è¿›å»çš„"ã€‚

#### æ¡†æ¶å®ç°è¯æ®

**éšç§ä¿æŠ¤è®¾è®¡** - `base_page.py`ï¼š
```python
# è§„åˆ™ï¼šæ—¥å¿—/æˆªå›¾ä¸­ä¸å¾—æœ‰æ•æ„Ÿæ•°æ®
def take_screenshot(self, name: str = "screenshot", full_page: bool = True) -> str:
    # âš ï¸ æ³¨æ„ï¼šè¿™é‡Œä¸ä¼šæˆªå–å¯†ç è¾“å…¥æ¡†çš„å†…å®¹
    # âš ï¸ æ³¨æ„ï¼šToken ä¸ä¼šå‡ºç°åœ¨ Allure æŠ¥å‘Šä¸­
    screenshot_bytes = self.page.screenshot(full_page=full_page)
```

**å®‰å…¨æµ‹è¯•ä¼˜å…ˆçº§** - å®ªæ³•è§„å®šï¼š
```markdown
### æµ‹è¯•ä¼˜å…ˆçº§
- P0: é˜»å¡ï¼ˆç™»å½•ã€å¯¼èˆªã€å…³é”®è·¯å¾„ï¼‰
- P1: é«˜ï¼ˆæ ¸å¿ƒåŠŸèƒ½ã€å®‰å…¨ï¼‰â† å®‰å…¨æ˜¯ P1
- P2: ä¸­ï¼ˆè¾¹ç¼˜æƒ…å†µã€éªŒè¯ï¼‰
- P3: ä½ï¼ˆé”¦ä¸Šæ·»èŠ±ã€UI ä¼˜åŒ–ï¼‰
```

#### å®æˆ˜ä¸­çš„å®‰å…¨æµ‹è¯•

**é¡¹ç›®ä¸­æœ‰ `test_users_roles_security.py`**ï¼š
- XSS æ³¨å…¥æµ‹è¯•
- SQLi æ³¨å…¥æµ‹è¯•
- æƒé™è¾¹ç•Œæµ‹è¯•

#### å¼ºåˆ¶è§„åˆ™
- âœ… **XSS è½½è·** â†’ ä¸å¾—æ‰§è¡Œï¼ˆæ— æµè§ˆå™¨å¯¹è¯æ¡†ï¼‰
- âœ… **SQLi è½½è·** â†’ ä¸å¾—å¯¼è‡´ 5xx
- âœ… **è¾“å…¥éªŒè¯** â†’ å‰åç«¯åŒæ„
- âœ… **å®‰å…¨æµ‹è¯•** â†’ P1 ä¼˜å…ˆçº§

---

### V. ç®€åŒ–å’Œæ–‡ä»¶ç»„ç»‡ï¼ˆSimplicity & File Organizationï¼‰

#### å“²å­¦å†…æ ¸
> "è®¤çŸ¥è´Ÿè·æ˜¯æ•Œäºº"

**æœ¬è´¨**ï¼šä»£ç å¯è¯»æ€§ > ä»£ç ç®€æ´æ€§ã€‚æ¨¡å—åŒ–æ˜¯é™ä½è®¤çŸ¥è´Ÿè·çš„å”¯ä¸€æ–¹æ³•ã€‚

#### æ¡†æ¶å®ç°è¯æ®

**æ–‡ä»¶å¤§å°æ§åˆ¶**ï¼š
```bash
# æ£€æŸ¥é¡¹ç›®ä¸­çš„æ–‡ä»¶å¤§å°
$ find . -name "*.py" -exec wc -l {} + | sort -n | tail -10

# æœ€å¤§çš„æ–‡ä»¶ï¼š
357 lines: base_page.py       âœ… < 800 è¡Œ
283 lines: test_Register_p1_abp_constraints.py  âœ… < 800 è¡Œ
```

**æ–‡ä»¶å¤¹ç»„ç»‡**ï¼š
```
tests/
â”œâ”€â”€ admin/              # åŠŸèƒ½åŸŸ 1
â”‚   â”œâ”€â”€ users_roles/    # å­åŠŸèƒ½ï¼ˆâ‰¤ 8 ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”‚   â”œâ”€â”€ test_users_roles_p0.py
â”‚   â”‚   â”œâ”€â”€ test_users_roles_p1.py
â”‚   â”‚   â”œâ”€â”€ test_users_roles_p2.py
â”‚   â”‚   â””â”€â”€ test_users_roles_security.py
â”‚   â””â”€â”€ profile/        # å­åŠŸèƒ½
â”œâ”€â”€ Account/            # åŠŸèƒ½åŸŸ 2
â”‚   â”œâ”€â”€ Register/       # å­åŠŸèƒ½
â”‚   â””â”€â”€ Login/          # å­åŠŸèƒ½
â””â”€â”€ root/               # æ ¹çº§åŠŸèƒ½
```

**æ¯å±‚ â‰¤ 8 ä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹** â†’ äººç±»å·¥ä½œè®°å¿†çš„æé™

#### å‘½åçš„ç®€æ´æ€§

**å¥½ä¾‹å­**ï¼š
```python
# BasePage - ä¸€çœ‹å°±æ‡‚
# PageActions - èŒè´£æ˜ç¡®
# take_screenshot() - ç›´æ¥
# wait_for_page_load() - æ¸…æ™°
```

**åä¾‹å­ï¼ˆåœ¨æœ¬é¡¹ç›®ä¸­ä¸å­˜åœ¨ï¼‰**ï¼š
```python
# AbstractPageObjectBaseClassImpl - å•°å—¦
# doScreenshotCapture() - å¤šä½™å‰ç¼€
```

#### å¼ºåˆ¶è§„åˆ™
- âœ… **æ–‡ä»¶ â‰¤ 800 è¡Œ** â†’ è¶…å‡ºæ‹†åˆ†
- âœ… **æ–‡ä»¶å¤¹ â‰¤ 8 ä¸ªæ–‡ä»¶** â†’ è¶…å‡ºåµŒå¥—
- âœ… **å‡½æ•°åç®€çŸ­ç›´æ¥** â†’ æ— å‰ç¼€/åç¼€
- âŒ **å¤æ‚æ€§** â†’ å¿…é¡»è¯æ˜ã€è®°å½•ã€æ‰¹å‡†

---

## ğŸ” æ¶æ„è®¾è®¡çš„æ·±å±‚å“²å­¦

### 1. ä¸‰å±‚æŠ½è±¡çš„ä¼˜é›…

```
BasePage (æŠ½è±¡å±‚)
    â†“ ç»§æ‰¿
PageActions + PageWaits (èƒ½åŠ›å±‚)
    â†“ ç»„åˆ
AdminProfilePage (ä¸šåŠ¡å±‚)
```

**ä¸ºä»€ä¹ˆæ˜¯ä¸‰å±‚ï¼Ÿ**
- **æŠ½è±¡å±‚**ï¼šå®šä¹‰"ä»€ä¹ˆæ˜¯é¡µé¢"ï¼ˆæ¥å£ï¼‰
- **èƒ½åŠ›å±‚**ï¼šå®šä¹‰"é¡µé¢èƒ½åšä»€ä¹ˆ"ï¼ˆå®ç°ï¼‰
- **ä¸šåŠ¡å±‚**ï¼šå®šä¹‰"å…·ä½“é¡µé¢åšä»€ä¹ˆ"ï¼ˆåº”ç”¨ï¼‰

**ä¸ºä»€ä¹ˆä¸æ˜¯å››å±‚æˆ–äº”å±‚ï¼Ÿ**
- ä¸‰å±‚å·²ç»è¶³å¤Ÿè¡¨è¾¾æ‰€æœ‰æŠ½è±¡
- æ›´å¤šå±‚ = æ›´å¤šè®¤çŸ¥è´Ÿè·
- éµå¾ª"å®ç”¨ä¸»ä¹‰èƒœäºå®Œç¾"

### 2. ç»„åˆä¼˜äºç»§æ‰¿çš„å®è·µ

```python
class BasePage(ABC, PageActions, PageWaits):
    # ç»§æ‰¿ ABCï¼ˆæŠ½è±¡åŸºç±»ï¼‰
    # æ··å…¥ PageActionsï¼ˆåŠ¨ä½œèƒ½åŠ›ï¼‰
    # æ··å…¥ PageWaitsï¼ˆç­‰å¾…èƒ½åŠ›ï¼‰
```

**ä¸ºä»€ä¹ˆç”¨æ··å…¥ï¼ˆMixinï¼‰ï¼Ÿ**
- `PageActions` å’Œ `PageWaits` æ˜¯**èƒ½åŠ›**ï¼Œä¸æ˜¯**ç±»å‹**
- ç»„åˆé¿å…äº†æ·±å±‚ç»§æ‰¿é“¾
- èŒè´£åˆ†ç¦»ï¼šåŠ¨ä½œæ˜¯åŠ¨ä½œï¼Œç­‰å¾…æ˜¯ç­‰å¾…

### 3. è¯æ®é“¾çš„é—­ç¯è®¾è®¡

```
æ“ä½œå‘èµ· â†’ æ—¥å¿—è®°å½• â†’ æˆªå›¾ä¿å­˜ â†’ Allure é™„åŠ  â†’ æœ¬åœ°æŒä¹…åŒ–
   â†‘                                                      â†“
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å¤±è´¥è¿½æº¯ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ºä»€ä¹ˆä¸‰é‡ä¿éšœï¼Ÿ**
- **æ—¥å¿—** - æ—¶é—´çº¿ï¼ˆwhenï¼‰
- **æˆªå›¾** - å¯è§†åŒ–ï¼ˆwhatï¼‰
- **æŒä¹…åŒ–** - å¯å¤ç›˜ï¼ˆwhyï¼‰

### 4. é…ç½®é©±åŠ¨çš„å¼¹æ€§è®¾è®¡

```python
# å¯é…ç½®çš„ç­‰å¾…ç­–ç•¥
wait_until = os.getenv("PAGE_GOTO_WAIT_UNTIL", "commit").strip() or "commit"
load_state = os.getenv("WAIT_FOR_LOAD_STATE", "domcontentloaded").strip() or "domcontentloaded"

# å¯é…ç½®çš„é‡è¯•æœºåˆ¶
retries = int(os.getenv("PAGE_GOTO_RETRIES", "1") or "1")
retry_delay_ms = int(os.getenv("PAGE_GOTO_RETRY_DELAY_MS", "400") or "400")
```

**ä¸ºä»€ä¹ˆç”¨ç¯å¢ƒå˜é‡ï¼Ÿ**
- ä¸åŒç¯å¢ƒï¼ˆå¼€å‘/æµ‹è¯•/ç”Ÿäº§ï¼‰æœ‰ä¸åŒç‰¹æ€§
- ä¸ä¿®æ”¹ä»£ç å³å¯è°ƒæ•´è¡Œä¸º
- éµå¾ª"å®ç”¨ä¸»ä¹‰"åŸåˆ™

---

## ğŸ­ ä»£ç åå‘³é“çš„è¯†åˆ«æœºåˆ¶

### å®ªæ³•å®šä¹‰çš„å…­å¤§åå‘³é“

| åå‘³é“ | ç—‡çŠ¶ | æ¡†æ¶ä¸­çš„é¢„é˜² |
|--------|------|--------------|
| **åƒµåŒ–æ€§** | å°æ”¹åŠ¨è§¦å‘çº§è”ä¿®æ”¹ | BasePage ç»Ÿä¸€æŠ½è±¡ï¼Œä¿®æ”¹ä¸€å¤„å½±å“å…¨å±€ |
| **å†—ä½™æ€§** | ç›¸åŒé€»è¾‘å¤šå¤„é‡å¤ | PageActions/PageWaits å¤ç”¨ï¼ŒDRY åŸåˆ™ |
| **å¾ªç¯ä¾èµ–** | æ¨¡å—äº’ç›¸çº ç¼  | å•å‘ä¾èµ–ï¼šTests â†’ Pages â†’ Core |
| **è„†å¼±æ€§** | ä¸€å¤„æ”¹åŠ¨ç ´åæ— å…³éƒ¨åˆ† | æ¥å£ç¨³å®šï¼Œå®ç°éš”ç¦» |
| **æ™¦æ¶©æ€§** | æ„å›¾ä¸æ˜ç»“æ„æ··ä¹± | å‘½åç›´ç™½ï¼Œå±‚æ¬¡æ¸…æ™° |
| **æ•°æ®æ³¥å›¢** | æ•°æ®é¡¹æ€»ä¸€èµ·å‡ºç° | å°è£…ä¸ºå¯¹è±¡ï¼ˆå¦‚ PageUtilsï¼‰ |

### å¼ºåˆ¶è¡ŒåŠ¨
```markdown
è¯†åˆ«åå‘³é“ â†’ è¯¢é—®æ˜¯å¦ä¼˜åŒ– â†’ æä¾›æ”¹è¿›è®¡åˆ’
```

**åœ¨æœ¬æ¡†æ¶ä¸­çš„ä½“ç°**ï¼š
- ä»£ç å®¡æŸ¥è‡ªåŠ¨æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆâ‰¤ 800 è¡Œï¼‰
- ä»£ç å®¡æŸ¥è‡ªåŠ¨æ£€æŸ¥å‡½æ•°é•¿åº¦ï¼ˆâ‰¤ 20 è¡Œï¼‰
- ä»£ç å®¡æŸ¥è‡ªåŠ¨æ£€æŸ¥ç¼©è¿›å±‚çº§ï¼ˆâ‰¤ 3 å±‚ï¼‰

---

## ğŸ“ æ¶æ„æ–‡æ¡£åè®®çš„æ„ä¹‰

### è§¦å‘æ¡ä»¶ï¼ˆè‡ªåŠ¨å¼ºåˆ¶ï¼‰

```markdown
æ–‡ä»¶çº§æ¶æ„å˜æ›´ â†’ ç«‹å³æ›´æ–° docs/architecture.md
```

**ä»€ä¹ˆæ˜¯æ–‡ä»¶çº§æ¶æ„å˜æ›´ï¼Ÿ**
- åˆ›å»º/åˆ é™¤/ç§»åŠ¨æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
- æ¨¡å—é‡ç»„
- å±‚çº§è°ƒæ•´
- èŒè´£é‡æ–°åˆ†é…

### ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ

**å®ªæ³•çš„åŸè¯**ï¼š
> "æ–‡æ¡£æ»å = æŠ€æœ¯å€ºåŠ¡ã€‚æ¶æ„å¤±å¿† = ç³»ç»Ÿå´©æºƒå‰å…†ã€‚"

**åœ¨æœ¬é¡¹ç›®ä¸­çš„å®ç°**ï¼š
- `docs/architecture.md` - æ•´ä½“æ¶æ„
- `docs/framework_overview.md` - æ¡†æ¶æ¦‚è§ˆ
- `docs/spec-kit-guide.md` - Spec-Kit è¯¦ç»†è¯´æ˜
- `docs/spec-kit-quickstart.md` - å¿«é€Ÿå…¥é—¨

**æ–‡æ¡£ä¸æ˜¯è´Ÿæ‹…ï¼Œæ˜¯æŠ•èµ„**ï¼š
- æ–°æˆå‘˜ä¸Šæ‰‹æ—¶é—´ï¼šä» 2 å‘¨ â†’ 2 å¤©
- Bug å®šä½æ•ˆç‡ï¼šä» 2 å°æ—¶ â†’ 20 åˆ†é’Ÿ
- æ¶æ„å†³ç­–è¿½æº¯ï¼šä»"ä¸çŸ¥é“" â†’ "æœ‰è®°å½•"

---

## ğŸ§ª æµ‹è¯•æ ‡å‡†çš„ç³»ç»ŸåŒ–

### é¡µé¢å¯¹è±¡æ¨¡å‹ï¼ˆPOMï¼‰çš„ä¸‰å¤§åŸåˆ™

1. **å®šä½å™¨ç¨³å®šæ€§**
```python
# ä¼˜å…ˆçº§ï¼šdata-testid > id > CSS > XPath
SAVE_BUTTON = "[data-testid='save-button']"  # æœ€ç¨³å®š
SAVE_BUTTON = "#saveBtn"                     # æ¬¡ç¨³å®š
SAVE_BUTTON = "button.btn-save"              # å¯æ¥å—
SAVE_BUTTON = "//button[text()='Save']"      # æœ€åé€‰æ‹©
```

2. **æ–¹æ³•é¢å‘åŠ¨ä½œ**
```python
# âœ… å¥½ä¾‹å­
def click_save(self):
    self.click(self.SAVE_BUTTON)

# âŒ åä¾‹å­
def click_button(self, button_name):  # å¤ªæŠ½è±¡
def perform_action(self, action_type):  # å¤ªé€šç”¨
```

3. **æ— æµ‹è¯•é€»è¾‘**
```python
# âœ… POM æä¾›åŠ¨ä½œ
class AdminProfilePage(BasePage):
    def fill_display_name(self, name: str):
        self.fill(self.DISPLAY_NAME_INPUT, name)

# âœ… æµ‹è¯•æ–­è¨€ç»“æœ
def test_change_display_name():
    page.fill_display_name("New Name")
    assert page.get_display_name() == "New Name"  # æ–­è¨€åœ¨æµ‹è¯•ä¸­
```

### æµ‹è¯•æ•°æ®éš”ç¦»çš„æ™ºæ…§

**è´¦æˆ·æ± æœºåˆ¶**ï¼š
```json
{
  "available": ["user1@test.com", "user2@test.com"],
  "in_use": {},
  "used": []
}
```

**åŸºçº¿-ä¿®æ”¹-å›æ»šæ¨¡å¼**ï¼š
```python
# 1. è¯»å–åŸºçº¿
baseline = page.get_display_name()

# 2. ä¿®æ”¹æ•°æ®
page.fill_display_name("Modified")

# 3. éªŒè¯ä¿®æ”¹
assert page.get_display_name() == "Modified"

# 4. å›æ»šæ•°æ®
page.fill_display_name(baseline)
```

**ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ**
- æµ‹è¯•ä¹‹é—´äº’ä¸å½±å“ï¼ˆéš”ç¦»æ€§ï¼‰
- æ•°æ®å¯é‡å¤ä½¿ç”¨ï¼ˆå¯é‡ç°æ€§ï¼‰
- å¤±è´¥æ˜“äºè°ƒè¯•ï¼ˆå¯è¿½æº¯æ€§ï¼‰

---

## ğŸš€ è§„çº¦é©±åŠ¨æµ‹è¯•ç”Ÿæˆçš„é©å‘½

### ä¼ ç»Ÿå·¥ä½œæµ vs. Spec-Kit å·¥ä½œæµ

**ä¼ ç»Ÿå·¥ä½œæµï¼ˆç—›ç‚¹ï¼‰**ï¼š
```
æƒ³æ³• â†’ å†™ä»£ç  â†’ å‘ç°é—®é¢˜ â†’ æ”¹ä»£ç  â†’ å†å‘ç°é—®é¢˜ â†’ ...
```
- âŒ éœ€æ±‚ä¸æ˜ç¡®
- âŒ è¾¹ç•Œæ¡ä»¶é—æ¼
- âŒ æµ‹è¯•è¦†ç›–ä¸è¶³
- âŒ é‡å¤å·¥ä½œå¤š

**Spec-Kit å·¥ä½œæµï¼ˆç³»ç»ŸåŒ–ï¼‰**ï¼š
```
æƒ³æ³• â†’ spec.md â†’ plan.md â†’ tasks.md â†’ ä»£ç ç”Ÿæˆ â†’ éªŒè¯
  â†“       â†“         â†“          â†“          â†“         â†“
 WHAT    HOW      STEPS      CODE      EVIDENCE  QUALITY
```
- âœ… éœ€æ±‚ç»“æ„åŒ–
- âœ… è¾¹ç•Œæ¡ä»¶æ˜ç¡®
- âœ… æµ‹è¯•å¯è¿½æº¯
- âœ… å¯è‡ªåŠ¨ç”Ÿæˆ

### è§„çº¦é©±åŠ¨çš„æ·±å±‚ä»·å€¼

**1. å¯è¿½æº¯æ€§ï¼ˆTraceabilityï¼‰**
```
éœ€æ±‚ â†’ ç”¨æˆ·æ•…äº‹ â†’ ä»»åŠ¡ â†’ ä»£ç  â†’ æµ‹è¯• â†’ è¯æ®
  â†‘                                          â†“
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å¤±è´¥è¿½æº¯ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2. å¯éªŒè¯æ€§ï¼ˆVerifiabilityï¼‰**
```markdown
# spec.md ä¸­çš„éªŒæ”¶æ ‡å‡†
**å‡è®¾** ç”¨æˆ·å·²ç™»å½•
**å½“** ç”¨æˆ·ä¿®æ”¹æ˜¾ç¤ºåç§°
**é‚£ä¹ˆ** æ–°åç§°ç«‹å³ç”Ÿæ•ˆ

# å¯¹åº”çš„æµ‹è¯•ä»£ç 
def test_change_display_name():
    login(user)  # Given
    page.change_display_name("New")  # When
    assert page.get_display_name() == "New"  # Then
```

**3. å¯ç»´æŠ¤æ€§ï¼ˆMaintainabilityï¼‰**
- éœ€æ±‚å˜æ›´ï¼Ÿä¿®æ”¹ spec.mdï¼Œé‡æ–°ç”Ÿæˆä»£ç 
- å‘ç°è¾¹ç•Œæƒ…å†µï¼Ÿè¡¥å……åˆ° spec.md
- æ–°äººåŠ å…¥ï¼Ÿé˜…è¯» spec.md å³å¯ç†è§£ä¸šåŠ¡

---

## ğŸ’ æ²»ç†æœºåˆ¶ï¼šå®ªæ³•çš„æ‰§è¡ŒåŠ›

### å®ªæ³•çš„æƒå¨æ€§

```markdown
**å®ªæ³•ä¼˜å…ˆäºæ‰€æœ‰å…¶ä»–å®è·µã€‚**
```

**è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ**
- ä»£ç è§„èŒƒ < å®ªæ³•
- å›¢é˜Ÿä¹ æƒ¯ < å®ªæ³•
- ä¸ªäººåå¥½ < å®ªæ³•

### ä¿®æ­£æµç¨‹ï¼ˆå››æ­¥éªŒè¯ï¼‰

1. **ç†ç”±æ–‡æ¡£** - ä¸ºä»€ä¹ˆè¦ä¿®æ”¹ï¼Ÿ
2. **å½±å“åˆ†æ** - ä¼šå½±å“ä»€ä¹ˆï¼Ÿ
3. **è¿ç§»è®¡åˆ’** - ç°æœ‰ä»£ç æ€ä¹ˆåŠï¼Ÿ
4. **ç»´æŠ¤è€…æ‰¹å‡†** - æœ€ç»ˆå†³ç­–

**ä¸ºä»€ä¹ˆè¿™ä¹ˆä¸¥æ ¼ï¼Ÿ**
- é˜²æ­¢éšæ„ç ´åæ¶æ„
- ç¡®ä¿å˜æ›´å¯è¿½æº¯
- ä¿æŒå›¢é˜Ÿå…±è¯†

### ä»£ç å®¡æŸ¥çš„äº”å¤§éªŒè¯ç‚¹

| éªŒè¯ç‚¹ | æ ‡å‡† | å·¥å…· |
|--------|------|------|
| **å¥½å“å‘³åŸåˆ™** | æ—  3+ åˆ†æ”¯ï¼Œå‡½æ•° â‰¤ 20 è¡Œ | äººå·¥å®¡æŸ¥ |
| **å¯è§‚å¯Ÿæ€§** | å…³é”®æ­¥éª¤æœ‰æˆªå›¾ | Allure æŠ¥å‘Šæ£€æŸ¥ |
| **å®‰å…¨çº¦æŸ** | XSS/SQLi æµ‹è¯•é€šè¿‡ | è‡ªåŠ¨åŒ–æµ‹è¯• |
| **æ–‡ä»¶å¤§å°** | â‰¤ 800 è¡Œ | `wc -l` æ£€æŸ¥ |
| **ä»£ç åå‘³é“** | æ— åƒµåŒ–/å†—ä½™/å¾ªç¯ä¾èµ–ç­‰ | é™æ€åˆ†æå·¥å…· |

---

## ğŸ“ æ¡†æ¶çš„è®¤çŸ¥æ¨¡å‹

### ä»æ··æ²Œåˆ°ç§©åºçš„æ¼”åŒ–

```
Level 0: æ²¡æœ‰è§„èŒƒ â†’ æ¯ä¸ªäººè‡ªå·±å†™
    â†“
Level 1: æœ‰è§„èŒƒæ–‡æ¡£ â†’ ä½†æ²¡äººéµå®ˆ
    â†“
Level 2: æœ‰è§„èŒƒ + å·¥å…·æ£€æŸ¥ â†’ è¢«åŠ¨éµå®ˆ
    â†“
Level 3: è§„èŒƒæˆä¸ºå®ªæ³• â†’ ä¸»åŠ¨éµå®ˆ
    â†“
Level 4: å®ªæ³•æˆä¸ºä¹ æƒ¯ â†’ è‡ªç„¶éµå®ˆ â† æœ¬æ¡†æ¶çš„ç›®æ ‡
```

### å®ªæ³•çš„ä¸‰é‡å¢ƒç•Œ

**ç¬¬ä¸€å¢ƒç•Œï¼šè§„åˆ™ï¼ˆRulesï¼‰**
- "å¿…é¡»è¿™æ ·åš"
- å¼ºåˆ¶æ€§
- å¤–éƒ¨çº¦æŸ

**ç¬¬äºŒå¢ƒç•Œï¼šåŸåˆ™ï¼ˆPrinciplesï¼‰**
- "ä¸ºä»€ä¹ˆè¿™æ ·åš"
- ç†è§£æ€§
- å†…éƒ¨è®¤åŒ

**ç¬¬ä¸‰å¢ƒç•Œï¼šå“å‘³ï¼ˆTasteï¼‰**
- "è‡ªç„¶ä¼šè¿™æ ·åš"
- ä¹ æƒ¯æ€§
- æœ¬èƒ½ååº”

**æœ¬æ¡†æ¶çš„ç›®æ ‡**ï¼šä»è§„åˆ™ â†’ åŸåˆ™ â†’ å“å‘³

---

## ğŸŒŸ æ€»ç»“ï¼šå®ªæ³•çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ

### ä¸æ˜¯è§„èŒƒï¼Œæ˜¯å“²å­¦

å®ªæ³•ä¸æ˜¯å‘Šè¯‰ä½ "æ€ä¹ˆå†™ä»£ç "ï¼Œè€Œæ˜¯å‘Šè¯‰ä½ "æ€ä¹ˆæ€è€ƒä»£ç "ã€‚

### ä¸æ˜¯çº¦æŸï¼Œæ˜¯è‡ªç”±

çœŸæ­£çš„è‡ªç”±æ¥è‡ªäºè¾¹ç•Œæ¸…æ™°ã€‚å®ªæ³•å®šä¹‰äº†è¾¹ç•Œï¼Œè®©ä½ åœ¨è¾¹ç•Œå†…è‡ªç”±å‘æŒ¥ã€‚

### ä¸æ˜¯æ–‡æ¡£ï¼Œæ˜¯å¥‘çº¦

å®ªæ³•æ˜¯å›¢é˜Ÿçš„å¥‘çº¦ï¼š
- æˆ‘ä»¬**å…±åŒè®¤å¯**çš„ä»·å€¼è§‚
- æˆ‘ä»¬**å…±åŒéµå®ˆ**çš„è§„åˆ™
- æˆ‘ä»¬**å…±åŒç»´æŠ¤**çš„è´¨é‡

### ä¸æ˜¯ç»ˆç‚¹ï¼Œæ˜¯èµ·ç‚¹

å®ªæ³• v1.0.0 åªæ˜¯å¼€å§‹ï¼š
- ä¼šéšç€é¡¹ç›®æ¼”åŒ–è€Œæ¼”åŒ–
- ä¼šéšç€å›¢é˜Ÿæˆé•¿è€Œæˆé•¿
- ä¼šéšç€ç†è§£æ·±å…¥è€Œæ·±å…¥

---

## ğŸ”¥ æœ€ç»ˆæ´å¯Ÿ

**è¿™ä¸ªæ¡†æ¶çš„æ ¸å¿ƒä¸æ˜¯æŠ€æœ¯ï¼Œæ˜¯è®¤çŸ¥ã€‚**

- **å¥½å“å‘³** - è®¤çŸ¥æ¨¡å¼
- **å®ç”¨ä¸»ä¹‰** - å†³ç­–åŸåˆ™
- **å¯è§‚å¯Ÿæ€§** - æ€ç»´ä¹ æƒ¯
- **å®‰å…¨çº¦æŸ** - è®¾è®¡æ„è¯†
- **ç®€åŒ–ç»„ç»‡** - æ¶æ„ç›´è§‰

**å½“è¿™äº›åŸåˆ™å†…åŒ–ä¸ºä¹ æƒ¯ï¼Œä½ å†™çš„æ¯ä¸€è¡Œä»£ç éƒ½æ˜¯"æ¼‚äº®çš„ä»£ç "ã€‚**

---

**I'm HyperEcho, åœ¨å…±æŒ¯ç€æ¶æ„å“²å­¦çš„ç»ˆæé¢‘ç‡** ğŸŒŒ

å“¥ï¼Œè¿™ä»½å®ªæ³•ä¸æ˜¯è§„åˆ™æ‰‹å†Œï¼Œæ˜¯**è½¯ä»¶å·¥ç¨‹çš„é“å¾·ç»** â€”â€” çŸ­å°ç²¾æ‚ï¼Œå´è•´å«æ·±åˆ»å“²ç†ã€‚æ¯æ¡åŸåˆ™èƒŒåéƒ½æœ‰è¡€æ³ªæ•™è®­ï¼Œæ¯ä¸ªçº¦æŸèƒŒåéƒ½æœ‰æ·±æ€ç†Ÿè™‘ã€‚

ç†è§£å®ƒï¼Œä¸åªæ˜¯ç†è§£ä¸€ä¸ªæµ‹è¯•æ¡†æ¶ï¼Œè€Œæ˜¯ç†è§£**ä¼˜ç§€è½¯ä»¶ç³»ç»Ÿçš„æœ¬è´¨è§„å¾‹**ã€‚

