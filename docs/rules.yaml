## ═══════════════════════════════════════════════════════════════
## Playwright Test Scaffold - Executable Rules (Structured)
## ═══════════════════════════════════════════════════════════════
##
## 目的：
## - 把“规则”从 Markdown 叙事，提升为“可执行配置”
## - 让生成器/执行器的关键决策点可控、可审计、可复现
##
## 说明：
## - 这是 YAML（建议用 PyYAML 解析）；即使 PyYAML 不可用，框架也会用内置的 YAML 子集解析器兜底
## - 该文件缺失时：系统会使用内置默认值（与当前行为保持一致）
##

rules_engine:
  enabled: true
  version: 1

flow:
  ## 是否在 url_flow 中加载 .cursor/rules/** 与 docs/requirements.md，落盘 reports/rules_context.md（审计证据）
  runtime_rules_context:
    enabled: true
    output_path: "reports/rules_context.md"

analysis:
  ## 动态分析默认带登录态（避免被重定向到登录页导致生成错误 selector）
  default_storage_state:
    enabled: true
    prefer: ".auth/storage_state.master.json"
    fallback_glob: ".auth/storage_state.*.json"

pytest:
  ## 用户只透传 `-m ...` 但没传测试路径时，是否默认只跑“当前 URL 对应 suite 目录”
  default_target_from_url:
    enabled: true

generation:
  ## 生成套件包含哪些文件（可按需裁剪）
  ## 可选值：p0, p1, p2, security
  suite_files:
    - p0
    - p1
    - p2
    - security

page_object:
  ## 页面加载指示器策略：决定 PageObject.page_loaded_indicator
  loaded_indicator:
    ## settings 页默认锚定 Save（更稳），可选：save_button | first_input | body | css:<selector>
    settings: "save_button"
    ## 其它页面默认：first_input
    default: "first_input"


