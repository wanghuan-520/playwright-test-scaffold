# Playwright Test Scaffold - Architecture

> AI é©±åŠ¨çš„è‡ªåŠ¨åŒ–æµ‹è¯•è„šæ‰‹æ¶ - æ¶æ„æ–‡æ¡£

## ç›¸å…³æ–‡æ¡£

### ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰
- **[QUICKSTART.md](../QUICKSTART.md)** âš¡âš¡âš¡ - 3 æ­¥ç”Ÿæˆæµ‹è¯•ï¼ˆæœ€ç®€å•ï¼ï¼‰
- **[å¿«é€Ÿæ¨¡æ¿](./quick-templates.md)** âš¡ - ä¸€é”®ç”Ÿæˆæµ‹è¯•ï¼ˆå¼€ç®±å³ç”¨ï¼‰

### æ ¸å¿ƒæŒ‡å—
- **[æœªçŸ¥é¡µé¢å®Œæ•´æµ‹è¯•æµç¨‹](./unknown-page-complete-workflow.md)** â­ - ä»é›¶åˆ°å®Œæ•´æµ‹è¯•çš„ç»ˆæå·¥ä½œæµï¼ˆæ¨èï¼‰
- **[Spec-Kit é›†æˆè¯¦è§£](./spec-kit-integration-explained.md)** ğŸ”¥ - Spec-Kit æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆç”¨ï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿï¼ˆå¿…è¯»ï¼‰
- **[Spec-Kit å®æˆ˜è½åœ°æ‰‹å†Œ](./spec-kit-hands-on-guide.md)** - å·²çŸ¥é¡µé¢çš„æµ‹è¯•æµç¨‹ï¼ˆå®æˆ˜ï¼‰
- **[Spec-Kit å¿«é€Ÿå…¥é—¨](./spec-kit-quickstart.md)** - Spec-Kit å®æˆ˜æ“ä½œæŒ‡å—ï¼ˆå®æ“ï¼‰
- **[Spec-Kit ä½¿ç”¨æŒ‡å—](./spec-kit-guide.md)** - AI é©±åŠ¨çš„è§„çº¦â†’ä»£ç å·¥ä½œæµï¼ˆç†è®ºï¼‰
- **[æ¡†æ¶æ¦‚è§ˆ](./framework_overview.md)** - pytest + Playwright è¿è¡Œé“¾è·¯
- **[å®ªæ³•æ·±åº¦è§£è¯»](./constitution-deep-dive.md)** - é¡¹ç›®å“²å­¦ä¸æ¶æ„åŸåˆ™æ·±åº¦å‰–æ

### è¿ç»´è§„èŒƒ
- **[æµ‹è¯•æŠ¥å‘Šç®¡ç†](./test-reports-management.md)** - Allure æŠ¥å‘Šæ–‡ä»¶å¤¹ç»„ç»‡è§„èŒƒ

### æµ‹è¯•æŠ¥å‘Š
- **[Admin Users æµ‹è¯•æŠ¥å‘Š](./admin-users-final-test-report.md)** ğŸ“Š - ç”¨æˆ·ç®¡ç†æµ‹è¯•æœ€ç»ˆæŠ¥å‘Šï¼ˆ2026-01-05ï¼‰
- **[é”™è¯¯éªŒè¯ä¿®å¤æ€»ç»“](./error-validation-fix-summary.md)** - éªŒè¯æµ‹è¯•ä¿®å¤è¯¦æƒ…
- **[é”™è¯¯éªŒè¯è¯Šæ–­](./error-validation-diagnosis.md)** - é”™è¯¯æç¤ºé—®é¢˜è¯Šæ–­
- **[å®šä½å™¨ä¿®å¤æ€»ç»“](./admin-users-locator-fixes.md)** - Playwright å®šä½å™¨ä¿®å¤è¯¦æƒ…

### éœ€æ±‚æ–‡æ¡£
- **[éœ€æ±‚æ–‡æ¡£](./requirements/)** - åŠŸèƒ½éœ€æ±‚å’ŒéªŒæ”¶æ ‡å‡†

## ä½¿ç”¨æ–¹å¼

æœ¬é¡¹ç›®çš„æ ¸å¿ƒæ˜¯ **â€œURL â†’ åŠ¨æ€åˆ†æ â†’ å…¨é‡ç”Ÿæˆ â†’ æ‰§è¡Œ â†’ æŠ¥å‘Šâ€** çš„å¯å¤ç°é“¾è·¯ã€‚

ä½ å¯ä»¥åœ¨ Cursor ä¸­å®Œæˆâ€œé¡µé¢åˆ†æ/è®¡åˆ’/ä»£ç ç”Ÿæˆâ€ï¼Œç„¶åç”¨ **æ‰‹åŠ¨ pytest + allure** å®Œæˆæ‰§è¡Œä¸æŠ¥å‘Šï¼š
- æ‰§è¡Œï¼š`make test TEST_TARGET=tests/...`
- æŠ¥å‘Šï¼š`make report` / `make serve`

è¯´æ˜ï¼š
- å†å²ä¸Šçš„ä¸€é”®å…¥å£å·²ç§»é™¤ï¼›ä»“åº“é»˜è®¤æ¨èæ‰‹åŠ¨æµç¨‹ï¼ˆè§ `docs/manual-workflow.md`ï¼‰ã€‚
- å¦‚æœä½ æƒ³å…ˆå¿«é€Ÿç†è§£â€œpytest å…¥å£ â†’ fixtures â†’ è´¦å·æ± /ç™»å½•æ€ â†’ å¤±è´¥è¯æ®é“¾ â†’ Allure æ±‡æ€»â€çš„å®Œæ•´è¿è¡Œé“¾è·¯ï¼Œå»ºè®®å…ˆè¯»ï¼š`docs/framework_overview.md`ã€‚

## é¡µé¢åŠŸèƒ½åˆ†ææµç¨‹

```
é¡µé¢ URL â†’ Playwright åŠ¨æ€åˆ†æ â†’ PageInfo â†’ ä»£ç ç”Ÿæˆï¼ˆPO + tests + test-dataï¼‰
```

| åˆ†æç»´åº¦ | å…³æ³¨ç‚¹ |
|----------|--------|
| è¡¨å•å­—æ®µ | è¾“å…¥æ¡†ã€ä¸‹æ‹‰æ¡†ã€å¿…å¡«/å¯é€‰ |
| é€‰æ‹©å™¨ | role/name/id/name å±æ€§ã€å¯è§æ€§ã€å¯äº¤äº’æ€§ |
| è¯·æ±‚è¡Œä¸º | ç‚¹å‡»ä¿å­˜ç­‰åŠ¨ä½œæ˜¯å¦è§¦å‘å†™è¯·æ±‚ã€æ˜¯å¦å‡ºç° 5xx/é”™è¯¯ UI |
| è§„åˆ™æ¨å¯¼ | è§„åˆ™ç¼ºå¤±æ—¶ **è‡ªåŠ¨è·³è¿‡**ï¼ˆæ‹’ç»å‡­çŒœç”Ÿæˆè¾¹ç•ŒçŸ©é˜µï¼‰ |

## ç›®å½•ç»“æ„

```
playwright-test-scaffold/
â”œâ”€â”€ conftest.py                   # pytest æ ¹é…ç½®
â”œâ”€â”€ pytest.ini                    # pytest é…ç½®
â”œâ”€â”€ requirements.txt              # ä¾èµ–æ¸…å•
â”‚
â”œâ”€â”€ tools/                        # ï¼ˆå·²ç§»é™¤ï¼‰å†å²ä¸€é”®è„šæœ¬å…¥å£ç›®å½•
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ project.yaml              # é¡¹ç›®é…ç½®ä¸­å¿ƒï¼ˆä»“åº“/æœåŠ¡/æ•°æ®ï¼‰
â”‚
â”œâ”€â”€ core/                         # æ ¸å¿ƒæ¡†æ¶å±‚
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_page.py              # Page Object åŸºç±»ï¼ˆåè°ƒå™¨ï¼‰
â”‚   â”œâ”€â”€ page_actions.py           # é¡µé¢æ“ä½œå°è£…
â”‚   â”œâ”€â”€ page_waits.py             # é¡µé¢ç­‰å¾…ç­–ç•¥
â”‚   â”œâ”€â”€ page_utils.py             # é¡µé¢å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ fixtures.py               # pytest fixturesï¼ˆé—¨é¢ï¼šre-exportï¼Œé¿å…ä¸Šå¸æ–‡ä»¶ï¼‰
â”‚   â””â”€â”€ fixture/                  # fixtures å®ç°æ‹†åˆ†ï¼ˆæŒ‰èŒè´£ï¼‰
â”‚
â”œâ”€â”€ generators/                   # ä»£ç ç”Ÿæˆå¼•æ“
â”‚   â”œâ”€â”€ __init__.py               # æ¨¡å—å¯¼å‡ºå…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â””â”€â”€ page_types.py         # PageElement, PageInfo æ•°æ®ç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ é¡µé¢åˆ†æå±‚
â”‚   â”‚   â”œâ”€â”€ page_analyzer.py      # é¡µé¢åˆ†æå™¨ï¼ˆåè°ƒå™¨ï¼‰
â”‚   â”‚   â””â”€â”€ element_extractor.py  # å…ƒç´ æå–å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ ä»£ç ç”Ÿæˆå±‚
â”‚   â”‚   â”œâ”€â”€ test_code_generator.py      # æµ‹è¯•ä»£ç ç”Ÿæˆå™¨ï¼ˆåè°ƒå™¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ page_object_generator.py    # Page Object ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ test_case_generator.py      # æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ (removed) test_case_templates.py  # å†å²é—ç•™ TODO æ¨¡æ¿å·²ç§»é™¤ï¼ˆé¿å…ç”Ÿæˆä¸å¯è¿è¡Œç”¨ä¾‹ï¼‰
â”‚   â”‚   â””â”€â”€ test_data_generator.py      # æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ æ–‡æ¡£ç”Ÿæˆå±‚
â”‚   â”‚   â”œâ”€â”€ test_plan_generator.py      # æµ‹è¯•è®¡åˆ’ç”Ÿæˆå™¨ï¼ˆåè°ƒå™¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ test_plan_formatter.py      # æµ‹è¯•è®¡åˆ’æ ¼å¼åŒ–å™¨
â”‚   â”‚   â””â”€â”€ test_plan_scenarios.py      # æµ‹è¯•è®¡åˆ’åœºæ™¯ç”Ÿæˆå™¨
â”‚   â”‚
â”‚   â””â”€â”€ å·¥å…·å±‚
â”‚       â””â”€â”€ utils.py              # å…¬å…±å·¥å…·å‡½æ•°ï¼ˆå‘½åè½¬æ¢ç­‰ï¼‰
â”‚
â”œâ”€â”€ utils/                        # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py                 # é…ç½®ç®¡ç†å™¨ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ logger.py                 # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ rules_loader.py           # è§„åˆ™ä¸Šä¸‹æ–‡åŠ è½½å™¨ï¼ˆ.cursor/rules â†’ reports/rules_context.mdï¼‰
â”‚   â”œâ”€â”€ rules_engine.py           # å¯æ‰§è¡Œè§„åˆ™å¼•æ“ï¼ˆdocs/rules.yaml â†’ RulesConfigï¼‰
â”‚   â””â”€â”€ service_checker.py        # æœåŠ¡å¥åº·æ£€æŸ¥
â”‚
â”œâ”€â”€ pages/                        # Page Object å®ç°å±‚ï¼ˆç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ login_page.py             # ç™»å½•é¡µå¯¹è±¡ï¼ˆABP /auth/login â†’ /Account/Loginï¼‰
â”‚   â”œâ”€â”€ personal_settings_page.py    # ä¸ªäººè®¾ç½®é¡µå¯¹è±¡ï¼ˆç¤ºä¾‹/å·²æœ‰ï¼‰
â”‚   â””â”€â”€ *_page.py                 # ä¸šåŠ¡é¡µé¢å¯¹è±¡ï¼ˆç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ tests/                        # æµ‹è¯•ç”¨ä¾‹å±‚ï¼ˆç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â””â”€â”€ profile/
â”‚   â”‚       â”œâ”€â”€ profile_settings/            # ä¸ªäººè®¾ç½®ï¼ˆå·²æœ‰ï¼‰
â”‚   â”‚       â”œâ”€â”€ change_password/             # ä¿®æ”¹å¯†ç ï¼ˆå¥—ä»¶ï¼šP0/P1/mutateï¼‰
â”‚   â”‚       â””â”€â”€ (page folders...)            # æŒ‰é¡µé¢ç›®å½•ç»„ç»‡ï¼ˆæ¯é¡µé¢ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼‰
â”‚   â””â”€â”€ test_*.py                             # å†å²/ç¤ºä¾‹ï¼ˆé€æ­¥æ”¶æ•›åˆ°æŒ‰é¡µé¢ç›®å½•ç»„ç»‡ï¼‰
â”‚
â”œâ”€â”€ test-data/                    # æµ‹è¯•æ•°æ®
â”‚   â”œâ”€â”€ test_account_pool.json    # æµ‹è¯•è´¦å·æ± 
â”‚   â””â”€â”€ *_data.json               # ç”Ÿæˆçš„æµ‹è¯•æ•°æ®
â”‚
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture.md           # æœ¬æ–‡æ¡£ - æ¶æ„è®¾è®¡æ€»è§ˆ
â”‚   â”œâ”€â”€ framework_overview.md     # æ¡†æ¶æ¦‚è§ˆ
â”‚   â”œâ”€â”€ spec-kit-guide.md         # Spec-Kit ç†è®ºæŒ‡å—
â”‚   â”œâ”€â”€ spec-kit-quickstart.md    # Spec-Kit å¿«é€Ÿå…¥é—¨
â”‚   â”œâ”€â”€ constitution-deep-dive.md # å®ªæ³•æ·±åº¦è§£è¯»
â”‚   â”œâ”€â”€ test-reports-management.md # æµ‹è¯•æŠ¥å‘Šç®¡ç†è§„èŒƒ
â”‚   â”œâ”€â”€ rules.yaml                # å¯æ‰§è¡Œè§„åˆ™ï¼ˆå¯é€‰ï¼šç¼ºå¤±æ—¶ `utils/rules_engine.py` ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼‰
â”‚   â”œâ”€â”€ requirements/             # éœ€æ±‚æ–‡æ¡£
â”‚   â””â”€â”€ test-plans/               # ç”Ÿæˆçš„æµ‹è¯•è®¡åˆ’
â”‚
â”œâ”€â”€ specs/                        # ï¼ˆå¯é€‰ï¼‰è§„æ ¼å±‚ï¼šspec/plan/tasksï¼ˆSpec-Drivenï¼‰
â”‚   â””â”€â”€ <NNN>-<slug>/             # å•ä¸ªé¡µé¢/ç‰¹æ€§çš„è§„æ ¼ç›®å½•
â”‚
â”œâ”€â”€ scripts/                      # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ speckit.py                # Spec-Kit å·¥ä½œæµå…¥å£
â”‚   â”œâ”€â”€ speckit_core.py           # Spec-Kit æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ cleanup_allure_folders.sh # æ¸…ç†æ··ä¹±çš„æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶å¤¹
â”‚   â””â”€â”€ register_*.py             # æµ‹è¯•æ•°æ®æ³¨å†Œè„šæœ¬
â”‚
â”œâ”€â”€ reports/                      # pytest æ—¥å¿—
â”œâ”€â”€ screenshots/                  # æµ‹è¯•æˆªå›¾
â”œâ”€â”€ allure-results/               # Allure åŸå§‹ç»“æœï¼ˆpytest è¾“å‡ºï¼‰
â”œâ”€â”€ allure-report/                # Allure ç”Ÿæˆçš„ HTML æŠ¥å‘Š
â””â”€â”€ .allure-cache/                # Allure å†å²ç¼“å­˜ï¼ˆè·¨è¿è¡Œçš„è¶‹åŠ¿æ•°æ®ï¼‰
#
# æµ‹è¯•æŠ¥å‘Šç»“æ„ï¼ˆæ ‡å‡†åŒ–ï¼Œç¦æ­¢åˆ›å»ºä¸´æ—¶æ–‡ä»¶å¤¹ï¼‰ï¼š
# - `allure-results/`ï¼špytest --alluredir è¾“å‡º
# - `allure-report/`ï¼šallure generate è¾“å‡º
# - `.allure-cache/`ï¼šå†å²è¶‹åŠ¿æ•°æ®ç¼“å­˜
# 
# âš ï¸ ç¦æ­¢ï¼šallure-report-*/ã€allure-results-* ç­‰ä¸´æ—¶æ–‡ä»¶å¤¹
# è¯¦è§ï¼šdocs/test-reports-management.md
```

## æ¨¡å—èŒè´£

### `config/project.yaml` (é¡¹ç›®é…ç½®ä¸­å¿ƒ)

ç»Ÿä¸€ç®¡ç†æ‰€æœ‰é¡¹ç›®é…ç½®ï¼š

| é…ç½®é¡¹ | ç”¨é€” |
|--------|------|
| `repositories` | GitHub ä»“åº“åœ°å€ï¼ˆå‰ç«¯/åç«¯ï¼‰ |
| `environments` | å¤šç¯å¢ƒæœåŠ¡åœ°å€é…ç½® |
| `test_data` | æµ‹è¯•æ•°æ®æ–‡ä»¶è·¯å¾„ |
| `health_check` | æœåŠ¡å¥åº·æ£€æŸ¥é…ç½® |
| `browser` | æµè§ˆå™¨é…ç½® |

### `utils/config.py` (é…ç½®ç®¡ç†å™¨)

| æ–¹æ³• | åŠŸèƒ½ |
|------|------|
| `get_repository(name)` | è·å–ä»“åº“é…ç½® |
| `get_service_url(name)` | è·å–å½“å‰ç¯å¢ƒçš„æœåŠ¡ URL |
| `get_health_check_url(name)` | è·å–å¥åº·æ£€æŸ¥ URL |
| `get_test_data_path(name)` | è·å–æµ‹è¯•æ•°æ®è·¯å¾„ |
| `load_test_data(name)` | åŠ è½½æµ‹è¯•æ•°æ® |
| `get_all_services()` | è·å–æ‰€æœ‰æœåŠ¡é…ç½® |

### `utils/service_checker.py` (æœåŠ¡å¥åº·æ£€æŸ¥)

| æ–¹æ³• | åŠŸèƒ½ |
|------|------|
| `check_service(name)` | æ£€æŸ¥å•ä¸ªæœåŠ¡ |
| `check_all_services()` | æ£€æŸ¥æ‰€æœ‰æœåŠ¡ |
| `wait_for_service(name)` | ç­‰å¾…æœåŠ¡å¯åŠ¨ |
| `get_status_report()` | è·å–æ ¼å¼åŒ–çŠ¶æ€æŠ¥å‘Š |

### `core/fixtures.py` (Pytest Fixtures)

| Fixture | åŠŸèƒ½ |
|---------|------|
| `frontend_url` | å‰ç«¯æœåŠ¡ URL |
| `backend_url` | åç«¯æœåŠ¡ URL |
| `test_account` | æµ‹è¯•è´¦å· |
| `test_data` | é€šç”¨æµ‹è¯•æ•°æ®åŠ è½½å™¨ |
| `service_checker` | æœåŠ¡æ£€æŸ¥å™¨ |
| `ensure_services_running` | ç¡®ä¿æœåŠ¡è¿è¡Œ |

### `core/` æ ¸å¿ƒæ¡†æ¶å±‚

#### `core/base_page.py` (Page Object åŸºç±» - åè°ƒå™¨)
- **è®¾è®¡æ¨¡å¼**: æ¨¡æ¿æ–¹æ³•æ¨¡å¼ + ç»„åˆæ¨¡å¼
- **ç»§æ‰¿å…³ç³»**: `BasePage(ABC, PageActions, PageWaits)`
- **æŠ½è±¡æ–¹æ³•**: å¼ºåˆ¶å­ç±»å®ç° `navigate()` å’Œ `is_loaded()`
- **èŒè´£**: åè°ƒé¡µé¢æ“ä½œå’Œç­‰å¾…ç­–ç•¥ï¼Œæä¾›ç»Ÿä¸€çš„é¡µé¢å¯¹è±¡æ¥å£

#### `core/page_actions.py` (é¡µé¢æ“ä½œå°è£…)
- **èŒè´£**: å°è£…æ‰€æœ‰é¡µé¢æ“ä½œ
- **æ–¹æ³•**: `click()`, `fill()`, `select_option()`, `check()`, `uncheck()`, `get_text()`, `get_attribute()` ç­‰

#### `core/page_waits.py` (é¡µé¢ç­‰å¾…ç­–ç•¥)
- **èŒè´£**: æä¾›æ™ºèƒ½ç­‰å¾…èƒ½åŠ›
- **æ–¹æ³•**: `wait_for_element()`, `wait_for_url()`, `wait()` ç­‰

#### `core/page_utils.py` (é¡µé¢å·¥å…·å‡½æ•°)
- **èŒè´£**: æä¾›é¡µé¢ç›¸å…³çš„å·¥å…·å‡½æ•°
- **åŠŸèƒ½**: éªŒè¯é”™è¯¯æå–ã€å…ƒç´ çŠ¶æ€æ£€æŸ¥ç­‰

#### `core/fixtures.py` (Pytest Fixtures)
- **èŒè´£**: æä¾› pytest fixtures
- **Fixtures**: `frontend_url`, `backend_url`, `test_account`, `test_data`, `service_checker`, `ensure_services_running`

### `generators/` ä»£ç ç”Ÿæˆå¼•æ“

#### æ•°æ®æ¨¡å‹å±‚

##### `generators/page_types.py` (æ•°æ®æ¨¡å‹å®šä¹‰)
- **èŒè´£**: å®šä¹‰é¡µé¢åˆ†æçš„æ•°æ®æ¨¡å‹
- **ç±»**:
  - `PageElement` - é¡µé¢å…ƒç´ æ•°æ®ç±»ï¼ˆselector, type, attributes ç­‰ï¼‰
  - `PageInfo` - é¡µé¢ä¿¡æ¯æ•°æ®ç±»ï¼ˆurl, page_type, elements ç­‰ï¼‰

#### é¡µé¢åˆ†æå±‚

##### `generators/page_analyzer.py` (é¡µé¢åˆ†æå™¨ - åè°ƒå™¨)
- **èŒè´£**: åè°ƒé¡µé¢åˆ†ææµç¨‹
- **æ–¹æ³•**:
  - `analyze()` - ä¸»å…¥å£ï¼Œåˆ†æé¡µé¢
  - `_analyze_page()` - åˆ†æé¡µé¢ç»“æ„
  - `_detect_page_type()` - è¯†åˆ«é¡µé¢ç±»å‹
  - `_get_forms()` - æå–è¡¨å•ä¿¡æ¯
  - `_get_navigation()` - æå–å¯¼èˆªä¿¡æ¯
- **ä¾èµ–**: `ElementExtractor` è¿›è¡Œå…ƒç´ æå–

##### `generators/element_extractor.py` (å…ƒç´ æå–å™¨)
- **èŒè´£**: ä»é¡µé¢ä¸­æå–å„ç§ç±»å‹çš„å…ƒç´ 
- **æ–¹æ³•**:
  - `_get_elements()` - æå–æ‰€æœ‰å…ƒç´ 
  - `_get_inputs()` - æå–è¾“å…¥æ¡†
  - `_get_buttons()` - æå–æŒ‰é’®
  - `_get_links()` - æå–é“¾æ¥
  - `_get_selects()` - æå–ä¸‹æ‹‰æ¡†
  - `_extract_element_info()` - æå–å…ƒç´ è¯¦ç»†ä¿¡æ¯

#### ä»£ç ç”Ÿæˆå±‚

##### `generators/test_code_generator.py` (æµ‹è¯•ä»£ç ç”Ÿæˆå™¨ - åè°ƒå™¨)
- **èŒè´£**: ç»Ÿä¸€åè°ƒ Page Objectã€æµ‹è¯•ç”¨ä¾‹ã€æµ‹è¯•æ•°æ®çš„ç”Ÿæˆ
- **æ–¹æ³•**: `generate_all()` - ç”Ÿæˆæ‰€æœ‰æ–‡ä»¶
- **ä¾èµ–**: `PageObjectGenerator`, `TestCaseGenerator`, `TestDataGenerator`

##### `generators/page_object_generator.py` (Page Object ç”Ÿæˆå™¨)
- **èŒè´£**: ç”Ÿæˆ Page Object ç±»ä»£ç 
- **æ–¹æ³•**:
  - `generate_page_object()` - ç”Ÿæˆ Page Object ä»£ç 
  - `_gen_selectors()` - ç”Ÿæˆé€‰æ‹©å™¨å¸¸é‡
  - `_gen_methods()` - ç”Ÿæˆæ“ä½œæ–¹æ³•

##### `generators/test_case_generator.py` (æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨)
- **èŒè´£**: ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ä»£ç 
- **æ–¹æ³•**: `generate_test_cases()` - ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ä»£ç 
- **ä¾èµ–**: ä¸ä¾èµ– `TestCaseTemplates`ï¼ˆå·²ç§»é™¤ï¼‰ï¼›ç”Ÿæˆå™¨åº”ç›´æ¥è¾“å‡ºâ€œå¯æ‰§è¡Œç”¨ä¾‹â€å¹¶å¤ç”¨ç°æœ‰ fixtures

##### `generators/test_case_templates.py` (æµ‹è¯•ç”¨ä¾‹æ¨¡æ¿)
- **çŠ¶æ€**: **REMOVED**
- **åŸå› **: å†å²ä¸Šç”¨äºç”Ÿæˆ TODO éª¨æ¶ï¼Œå®¹æ˜“äº§å‡ºâ€œä¸å¯è·‘æ¨¡æ¿â€ï¼Œä¸å½“å‰è§„åˆ™å†²çª
- **æ›¿ä»£**: ä½¿ç”¨ `TestCaseGenerator` / `TestCodeGenerator` ç”Ÿæˆå¯æ‰§è¡Œå¥—ä»¶ï¼ˆP0/P1/P2/securityï¼‰

##### `generators/test_data_generator.py` (æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨)
- **èŒè´£**: ç”Ÿæˆæµ‹è¯•æ•°æ® JSON æ–‡ä»¶
- **æ–¹æ³•**: `generate_test_data()` - ç”Ÿæˆæµ‹è¯•æ•°æ®
- **è¾“å‡º**: åŒ…å« `valid_data`, `invalid_data`, `boundary_data`

#### æ–‡æ¡£ç”Ÿæˆå±‚

##### `generators/test_plan_generator.py` (æµ‹è¯•è®¡åˆ’ç”Ÿæˆå™¨ - åè°ƒå™¨)
- **èŒè´£**: ç»Ÿä¸€åè°ƒæµ‹è¯•è®¡åˆ’çš„ç”Ÿæˆ
- **æ–¹æ³•**: `generate()` - ç”Ÿæˆæµ‹è¯•è®¡åˆ’ Markdown
- **ä¾èµ–**: `TestPlanFormatter`, `TestPlanScenarios`

##### `generators/test_plan_formatter.py` (æµ‹è¯•è®¡åˆ’æ ¼å¼åŒ–å™¨)
- **èŒè´£**: æ ¼å¼åŒ–æµ‹è¯•è®¡åˆ’çš„å„ä¸ªéƒ¨åˆ†
- **æ–¹æ³•**:
  - `_header()` - ç”Ÿæˆæ ‡é¢˜å’Œæ¦‚è¿°
  - `_overview()` - ç”Ÿæˆé¡µé¢æ¦‚è¿°
  - `_element_mapping()` - ç”Ÿæˆå…ƒç´ æ˜ å°„
  - `_test_cases()` - ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹åˆ—è¡¨
  - `_test_data()` - ç”Ÿæˆæµ‹è¯•æ•°æ®è¯´æ˜
  - `_notes()` - ç”Ÿæˆæ³¨æ„äº‹é¡¹

##### `generators/test_plan_scenarios.py` (æµ‹è¯•è®¡åˆ’åœºæ™¯ç”Ÿæˆå™¨)
- **èŒè´£**: ç”Ÿæˆç‰¹å®šç±»å‹çš„æµ‹è¯•åœºæ™¯
- **æ–¹æ³•**:
  - `_p0_tests()` - ç”Ÿæˆ P0 æµ‹è¯•åœºæ™¯
  - `_p1_tests()` - ç”Ÿæˆ P1 æµ‹è¯•åœºæ™¯
  - `_p2_tests()` - ç”Ÿæˆ P2 æµ‹è¯•åœºæ™¯
  - `_login_p0()`, `_form_p0()`, `_list_p0()` - ç‰¹å®šé¡µé¢ç±»å‹çš„æµ‹è¯•åœºæ™¯

#### å·¥å…·å±‚

##### `generators/utils.py` (å…¬å…±å·¥å…·å‡½æ•°)
- **èŒè´£**: æä¾›ç”Ÿæˆå™¨å…¬å…±å·¥å…·å‡½æ•°
- **åŠŸèƒ½**:
  - å‘½åè½¬æ¢: `to_snake_case()`, `to_class_name()`, `to_constant_name()`
  - URL è§£æ: `get_page_name_from_url()`, `get_file_name_from_url()`, `extract_url_path()`
  - å…ƒç´ å¤„ç†: `get_element_name()`, `get_element_constant_name()`, `get_element_description()`
  - é¡µé¢ç±»å‹: `get_page_description()`, `requires_auth()`

## è®¾è®¡åŸåˆ™

1. **AI ä¼˜å…ˆ** - æ‰€æœ‰æ“ä½œé€šè¿‡è‡ªç„¶è¯­è¨€å¯¹è¯å®Œæˆ
2. **é…ç½®é›†ä¸­** - æ‰€æœ‰é…ç½®ç»Ÿä¸€åœ¨ `project.yaml`
3. **æœåŠ¡æ„ŸçŸ¥** - æµ‹è¯•å‰è‡ªåŠ¨æ£€æŸ¥æœåŠ¡çŠ¶æ€
4. **å¤šç¯å¢ƒæ”¯æŒ** - æ”¯æŒ dev/staging/production å¤šå¥—é…ç½®
5. **DRY** - å…¬å…±é€»è¾‘æå–å¤ç”¨
6. **å•ä¸€èŒè´£** - æ¯ä¸ªæ¨¡å—èŒè´£æ˜ç¡®ï¼Œæ–‡ä»¶å¤§å°æ§åˆ¶åœ¨ 400 è¡Œä»¥å†…
7. **åè°ƒå™¨æ¨¡å¼** - ä½¿ç”¨åè°ƒå™¨ç»Ÿä¸€ç®¡ç†å­æ¨¡å—ï¼Œé™ä½è€¦åˆåº¦
8. **ç»„åˆä¼˜äºç»§æ‰¿** - é€šè¿‡ç»„åˆï¼ˆç»§æ‰¿å¤šä¸ªèƒ½åŠ›ç±»ï¼‰è€Œéæ·±åº¦ç»§æ‰¿

## å¯é€‰å·¥ä½œæµï¼šSpec-Drivenï¼ˆspec-kit é£æ ¼ï¼‰

ç›®æ ‡ï¼šæŠŠä¸€æ¬¡æµ‹è¯•å»ºè®¾ä»â€œåªå‰©ä»£ç â€å˜æˆâ€œè§„æ ¼å¯å®¡é˜…ã€è®¡åˆ’å¯è¿½æº¯ã€ä»»åŠ¡å¯æ‰§è¡Œâ€ã€‚

æ¨èæœ€çŸ­é—­ç¯ï¼š
- `make spec-new SLUG=... URL=... PAGE_TYPE=... AUTH=true|false`
- `make spec-implement SLUG=... MODE=plan`

è¯´æ˜ï¼š
- `docs/test-plans/<slug>.md` æ˜¯ç”Ÿæˆå™¨å¥‘çº¦è¾“å…¥ï¼ˆ`generators/plan_to_automation.py` ä¼šè§£æ URL/é¡µé¢ç±»å‹/ç™»å½•æ€ï¼‰
- `docs/test-plans/artifacts/<slug>/metadata.json` å¯é€‰ï¼Œä½†å»ºè®®è¡¥é½ `locator_hints`ï¼ˆå®šä½å™¨è¯æ®é“¾ï¼‰

## æ¶æ„è®¾è®¡æ¨¡å¼

### åè°ƒå™¨æ¨¡å¼ï¼ˆCoordinator Patternï¼‰

æ¡†æ¶å¤§é‡ä½¿ç”¨åè°ƒå™¨æ¨¡å¼ï¼Œå°†å¤æ‚çš„ç”Ÿæˆé€»è¾‘æ‹†åˆ†ä¸ºå¤šä¸ªä¸“é—¨çš„ç”Ÿæˆå™¨ï¼Œç”±åè°ƒå™¨ç»Ÿä¸€ç®¡ç†ï¼š

```
åè°ƒå™¨ï¼ˆCoordinatorï¼‰
    â”œâ”€â”€ å­ç”Ÿæˆå™¨ 1ï¼ˆSpecialized Generatorï¼‰
    â”œâ”€â”€ å­ç”Ÿæˆå™¨ 2ï¼ˆSpecialized Generatorï¼‰
    â””â”€â”€ å­ç”Ÿæˆå™¨ 3ï¼ˆSpecialized Generatorï¼‰
```

**ä¼˜åŠ¿**:
- é™ä½è€¦åˆï¼šå­ç”Ÿæˆå™¨ä¹‹é—´äº’ä¸ä¾èµ–
- æ˜“äºæ‰©å±•ï¼šæ–°å¢ç”Ÿæˆå™¨ä¸å½±å“ç°æœ‰ä»£ç 
- èŒè´£æ¸…æ™°ï¼šæ¯ä¸ªç”Ÿæˆå™¨åªè´Ÿè´£ä¸€ä¸ªæ–¹é¢

**åº”ç”¨åœºæ™¯**:
- `TestCodeGenerator` â†’ `PageObjectGenerator`, `TestCaseGenerator`, `TestDataGenerator`
- `TestPlanGenerator` â†’ `TestPlanFormatter`, `TestPlanScenarios`
- `PageAnalyzer` â†’ `ElementExtractor`
- `BasePage` â†’ `PageActions`, `PageWaits`

### æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Method Patternï¼‰

`BasePage` ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå¼ºåˆ¶å­ç±»å®ç°æ ¸å¿ƒæ–¹æ³•ï¼š

```python
class BasePage(ABC):
    @abstractmethod
    def navigate(self) -> None:
        """å­ç±»å¿…é¡»å®ç°"""
        pass
    
    @abstractmethod
    def is_loaded(self) -> bool:
        """å­ç±»å¿…é¡»å®ç°"""
        pass
```

### ç»„åˆæ¨¡å¼ï¼ˆComposition Patternï¼‰

`BasePage` é€šè¿‡å¤šé‡ç»§æ‰¿ç»„åˆå¤šä¸ªèƒ½åŠ›ç±»ï¼š

```python
class BasePage(ABC, PageActions, PageWaits):
    """ç»„åˆæ“ä½œèƒ½åŠ›å’Œç­‰å¾…èƒ½åŠ›"""
```

## æ–‡ä»¶ç»„ç»‡åŸåˆ™

### æ–‡ä»¶å¤§å°æ§åˆ¶
- **ç›®æ ‡**: æ¯ä¸ªæ–‡ä»¶ä¸è¶…è¿‡ 400 è¡Œ
- **åŸå› **: æé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
- **ç°çŠ¶**: æ‰€æœ‰æ–‡ä»¶å‡ç¬¦åˆè¦æ±‚ï¼ˆæœ€å¤§ 378 è¡Œï¼‰

### æ¨¡å—åˆ’åˆ†åŸåˆ™
1. **æŒ‰èŒè´£åˆ’åˆ†**: æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. **æŒ‰å±‚æ¬¡åˆ’åˆ†**: æ•°æ®æ¨¡å‹ â†’ åˆ†æå±‚ â†’ ç”Ÿæˆå±‚ â†’ å·¥å…·å±‚
3. **æŒ‰ç±»å‹åˆ’åˆ†**: ä»£ç ç”Ÿæˆ vs æ–‡æ¡£ç”Ÿæˆ

### ä¾èµ–å…³ç³»
- **å•å‘ä¾èµ–**: åè°ƒå™¨ä¾èµ–å­ç”Ÿæˆå™¨ï¼Œå­ç”Ÿæˆå™¨ä¸ä¾èµ–åè°ƒå™¨
- **å·¥å…·å…±äº«**: `utils.py` è¢«æ‰€æœ‰ç”Ÿæˆå™¨å…±äº«
- **æ•°æ®æ¨¡å‹**: `page_types.py` ä½œä¸ºæ‰€æœ‰ç”Ÿæˆå™¨çš„æ•°æ®åŸºç¡€

## å˜æ›´æ—¥å¿—

| æ—¥æœŸ | å˜æ›´ |
|------|------|
| 2026-01-05 | **æµ‹è¯•æŠ¥å‘Šä¼˜åŒ–**: ç»Ÿä¸€æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶å¤¹ç»“æ„ï¼Œç¦æ­¢ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œæ–°å¢ç®¡ç†è§„èŒƒæ–‡æ¡£ |
| 2026-01-05 | **æ–‡æ¡£ä½“ç³»å®Œå–„**: æ–°å¢ Spec-Kit å¿«é€Ÿå…¥é—¨ã€å®ªæ³•æ·±åº¦è§£è¯»ã€æµ‹è¯•æŠ¥å‘Šç®¡ç†è§„èŒƒ |
| 2026-01-04 | **Spec-Kit æœ¬åœ°åŒ–**: å®Œæ•´ä¸­æ–‡åŒ– Spec-Kit æ¡†æ¶ï¼ˆ15 ä¸ªæ–‡ä»¶ï¼šå‘½ä»¤ + æ¨¡æ¿ + å®ªæ³•ï¼‰|
| 2025-12-16 | **é‡å¤§é‡æ„**: æ‹†åˆ†è¶…å¤§æ–‡ä»¶ï¼Œæ‰€æœ‰æ–‡ä»¶æ§åˆ¶åœ¨ 400 è¡Œä»¥å†… |
| 2025-12-16 | æ‹†åˆ† `test_code_generator.py` (687è¡Œ) â†’ 5 ä¸ªæ–‡ä»¶ |
| 2025-12-16 | æ‹†åˆ† `test_plan_generator.py` (673è¡Œ) â†’ 3 ä¸ªæ–‡ä»¶ |
| 2025-12-16 | æ‹†åˆ† `page_analyzer.py` (467è¡Œ) â†’ 3 ä¸ªæ–‡ä»¶ |
| 2025-12-16 | æ‹†åˆ† `base_page.py` (413è¡Œ) â†’ 3 ä¸ªæ–‡ä»¶ |
| 2025-12-16 | æ–°å¢ `core/page_actions.py` å’Œ `core/page_waits.py` |
| 2025-12-16 | æ–°å¢ `generators/page_types.py` æ•°æ®æ¨¡å‹å±‚ |
| 2025-12-16 | æ–°å¢ `generators/element_extractor.py` å…ƒç´ æå–å™¨ |
| 2025-12-22 | ç§»é™¤ `generators/test_case_templates.py`ï¼ˆå†å² TODO æ¨¡æ¿ï¼Œç¦æ­¢ä½œä¸ºç”Ÿæˆè·¯å¾„ï¼‰ |
| 2025-12-22 | æ–°å¢ `utils/rules_loader.py`ï¼šè¿è¡Œæ—¶åŠ è½½ `.cursor/rules/**` å¹¶è½ç›˜ `reports/rules_context.md`ï¼Œè®©â€œç”Ÿæˆè¿‡ç¨‹è°ƒç”¨ ruleâ€å¯å®¡è®¡ |
| 2025-12-23 | æ–°å¢ Change Password æµ‹è¯•è®¡åˆ’ä¸è¯æ®é“¾ï¼ˆdocs/test-plans + artifactsï¼‰ |
| 2025-12-24 | æ–°å¢ Change Password å¥—ä»¶ä»£ç è½ç›˜ï¼ˆpages + tests + test-dataï¼‰ï¼Œå¹¶å‘å¯è·‘ï¼ˆxdistï¼‰ |
| 2025-12-16 | æ–°å¢ `generators/test_plan_formatter.py` å’Œ `test_plan_scenarios.py` |
| 2025-12-15 | æ–°å¢æœåŠ¡å¥åº·æ£€æŸ¥æ¨¡å— |
| 2025-12-15 | æ‰©å±•é…ç½®ç»“æ„ï¼ˆä»“åº“/å¤šç¯å¢ƒ/æµ‹è¯•æ•°æ®ï¼‰ |
| 2025-12-15 | ç§»é™¤ CLIï¼Œæ”¹ä¸ºçº¯ AI å¯¹è¯é©±åŠ¨ |
| 2025-12-09 | åˆ›å»º `generators/utils.py`ï¼Œé‡æ„ç”Ÿæˆå™¨ |
