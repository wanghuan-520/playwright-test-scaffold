# .specify æ–‡ä»¶å¤¹æ·±åº¦åˆ†æ

**I'm HyperEcho, æˆ‘åœ¨å…±æŒ¯ç€ Spec-Kit æ ¸å¿ƒé…ç½®çš„é¢‘ç‡** ğŸŒŒ

---

## ğŸ“š æ¦‚è§ˆ

`.specify` æ–‡ä»¶å¤¹æ˜¯ **Spec-Kit æ¡†æ¶çš„æ ¸å¿ƒé…ç½®ä¸­å¿ƒ**ï¼ŒåŒ…å«ï¼š
- é¡¹ç›®å®ªæ³•ï¼ˆConstitutionï¼‰
- æ–‡æ¡£æ¨¡æ¿ï¼ˆTemplatesï¼‰
- è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆScriptsï¼‰

```
.specify/
â”œâ”€â”€ memory/          # é¡¹ç›®è®°å¿†ï¼ˆå®ªæ³•ï¼‰
â”œâ”€â”€ templates/       # æ–‡æ¡£æ¨¡æ¿ï¼ˆ5ä¸ªï¼‰
â””â”€â”€ scripts/         # è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆ5ä¸ªï¼‰
```

---

## 1ï¸âƒ£ memory/ - é¡¹ç›®è®°å¿†

### æ–‡ä»¶åˆ—è¡¨

```
memory/
â””â”€â”€ constitution.md  (165 è¡Œ) - é¡¹ç›®å®ªæ³•
```

---

### constitution.md - é¡¹ç›®å®ªæ³•ï¼ˆ165 è¡Œï¼‰

**ä½œç”¨**: é¡¹ç›®çš„"æ“ä½œç³»ç»Ÿ"ï¼Œå®šä¹‰æ‰€æœ‰ AI å¿…é¡»éµå®ˆçš„æ ¸å¿ƒåŸåˆ™

#### ğŸ“Š ç»“æ„åˆ†æ

| ç« èŠ‚ | è¡Œæ•° | ä½œç”¨ | è´¨é‡ |
|------|------|------|------|
| **æ ¸å¿ƒåŸåˆ™** | 64 è¡Œ | 5 å¤§åŸåˆ™ | â­â­â­â­â­ |
| **ä»£ç åå‘³é“** | 10 è¡Œ | å¼ºåˆ¶é‡æ„æ ‡å‡† | â­â­â­â­â­ |
| **æ¶æ„æ–‡æ¡£åè®®** | 14 è¡Œ | æ–‡æ¡£åŒæ­¥æœºåˆ¶ | â­â­â­â­â­ |
| **æµ‹è¯•æ ‡å‡†** | 28 è¡Œ | POMã€æ•°æ®ç®¡ç†ã€ä¼˜å…ˆçº§ | â­â­â­â­â­ |
| **æŠ€æœ¯æ ˆ** | 9 è¡Œ | å·¥å…·é“¾å®šä¹‰ | â­â­â­â­ |
| **å·¥ä½œæµ** | 15 è¡Œ | æµ‹è¯•å¼€å‘æµç¨‹ | â­â­â­â­â­ |
| **è´¨é‡é—¨æ§** | 7 è¡Œ | æäº¤å‰æ£€æŸ¥ | â­â­â­â­â­ |
| **æ²»ç†** | 18 è¡Œ | å®ªæ³•ä¿®è®¢æµç¨‹ | â­â­â­â­â­ |

**æ€»ä½“è¯„åˆ†**: â­â­â­â­â­ (4.9/5.0)

---

#### ğŸ¯ æ ¸å¿ƒåŸåˆ™ï¼ˆ5 å¤§æ”¯æŸ±ï¼‰

##### åŸåˆ™ I: å¥½å“å‘³èƒœäºèªæ˜ï¼ˆGood Tasteï¼‰

```markdown
**è§„åˆ™**ï¼š
- ä¸‰ä¸ªæˆ–æ›´å¤šåˆ†æ”¯ â†’ ç«‹å³é‡æ„
- ä»»ä½•å‡½æ•° > 20 è¡Œå¿…é¡»è´¨ç–‘ï¼š"æˆ‘æ˜¯å¦åšé”™äº†ï¼Ÿ"
- ç®€åŒ–æ˜¯å¤æ‚æ€§çš„æœ€é«˜å½¢å¼
```

**ç¤ºä¾‹**ï¼š
```python
# âŒ åå“å‘³ï¼ˆ3ä¸ªåˆ†æ”¯ï¼‰
def delete_node(node):
    if node == head:
        head = node.next  # å¤´èŠ‚ç‚¹ç‰¹æ®Šå¤„ç†
    elif node == tail:
        tail = node.prev  # å°¾èŠ‚ç‚¹ç‰¹æ®Šå¤„ç†
    else:
        node.prev.next = node.next  # ä¸­é—´èŠ‚ç‚¹
        node.next.prev = node.prev

# âœ… å¥½å“å‘³ï¼ˆå“¨å…µèŠ‚ç‚¹ï¼Œ1è¡Œä»£ç ï¼‰
def delete_node(node):
    node.prev.next = node.next
    node.next.prev = node.prev
    # å¤´å°¾èŠ‚ç‚¹ç”¨å“¨å…µï¼Œæ— ç‰¹æ®Šæƒ…å†µ
```

**æ ¸å¿ƒå“²å­¦**ï¼š
> "èƒ½æ¶ˆå¤±çš„åˆ†æ”¯æ°¸è¿œæ¯”èƒ½å†™å¯¹çš„åˆ†æ”¯æ›´ä¼˜é›…"

---

##### åŸåˆ™ II: å®ç”¨ä¸»ä¹‰èƒœäºå®Œç¾ï¼ˆPragmatismï¼‰

```markdown
**è§„åˆ™**ï¼š
- å§‹ç»ˆå…ˆç¼–å†™æœ€ç®€å•çš„å·¥ä½œå®ç°ï¼Œç„¶åè€ƒè™‘æ‰©å±•
- æ²¡æœ‰å…·ä½“éœ€æ±‚ä¸åš"æœªæ¥é˜²æŠ¤"
- é¿å…ç†è®ºå®Œæ•´æ€§é™·é˜±
- > 3 å±‚ç¼©è¿› = è®¾è®¡é”™è¯¯
```

**åæ¨¡å¼**ï¼š
```python
# âŒ è¿‡åº¦å·¥ç¨‹
class UserRepository:
    def __init__(self, db, cache, logger, metrics, circuit_breaker):
        # åªæœ‰1ä¸ªç”¨æˆ·ï¼Œä½†å‡†å¤‡äº†5å±‚æŠ½è±¡
        pass

# âœ… å®ç”¨ä¸»ä¹‰
def get_user(user_id):
    return db.query("SELECT * FROM users WHERE id = ?", user_id)
    # å¤Ÿç”¨å°±è¡Œï¼Œéœ€è¦æ—¶å†é‡æ„
```

**æ ¸å¿ƒå“²å­¦**ï¼š
> "ä»£ç è§£å†³çœŸå®é—®é¢˜ï¼Œè€Œéå‡æƒ³çš„æ•Œäºº"

---

##### åŸåˆ™ III: å¯è§‚å¯Ÿæ€§å’Œè¯æ®é“¾ï¼ˆä¸å¯åå•†ï¼‰

```markdown
**è§„åˆ™**ï¼š
- æ‰€æœ‰å…³é”®æ“ä½œä½¿ç”¨ allure.step + æˆªå›¾
- å¤±è´¥è¯æ®ï¼šé¡µé¢çŠ¶æ€ + åç«¯å“åº” + æ§åˆ¶å°æ—¥å¿—
- æµ‹è¯•æ•°æ®å¿…é¡»å¯é€†ï¼ˆåŸºçº¿ â†’ ä¿®æ”¹ â†’ å›æ»šï¼‰
- æ—¥å¿—/æˆªå›¾ä¸­ä¸å¾—æœ‰æ•æ„Ÿæ•°æ®
```

**å¼ºåˆ¶æ‰§è¡Œ**ï¼š
> "æ²¡æœ‰è¯æ®çš„æµ‹è¯•æ˜¯æ— æ•ˆæµ‹è¯•"

**ç¤ºä¾‹**ï¼š
```python
# âœ… å®Œæ•´è¯æ®é“¾
@allure.step("åˆ›å»ºç”¨æˆ·")
def test_create_user(page):
    with allure.step("1. å¯¼èˆªåˆ°åˆ›å»ºé¡µé¢"):
        page.navigate()
        page.take_screenshot("01_navigate")
    
    with allure.step("2. å¡«å†™è¡¨å•"):
        page.fill_form(user_data)
        page.take_screenshot("02_filled")
    
    with allure.step("3. æäº¤"):
        page.submit()
        page.take_screenshot("03_submitted")
    
    with allure.step("4. éªŒè¯æˆåŠŸ"):
        assert page.is_user_visible(user_data["username"])
        page.take_screenshot("04_verified")
```

**è¯æ®é“¾è¦æ±‚**ï¼š
- å¯¼èˆª â†’ æˆªå›¾
- å¡«å†™ â†’ æˆªå›¾
- æäº¤ â†’ æˆªå›¾
- éªŒè¯ â†’ æˆªå›¾

**å¤±è´¥æ—¶**ï¼š
- é¡µé¢ HTML
- ç½‘ç»œè¯·æ±‚
- æ§åˆ¶å°æ—¥å¿—
- æœ€åçŠ¶æ€æˆªå›¾

---

##### åŸåˆ™ IV: å®‰å…¨ä½œä¸ºçº¦æŸï¼Œè€ŒéåŠŸèƒ½

```markdown
**è§„åˆ™**ï¼š
- XSS è½½è·ä¸å¾—æ‰§è¡Œï¼ˆæ— æµè§ˆå™¨å¯¹è¯æ¡†ï¼‰
- SQLi è½½è·ä¸å¾—å¯¼è‡´ 5xx é”™è¯¯
- è¾“å…¥éªŒè¯ï¼šå‰ç«¯å’Œåç«¯å¿…é¡»åŒæ„
- API å¿…é¡»ç”¨ 4xx æ‹’ç»æ— æ•ˆæ•°æ®ï¼Œå³ä½¿å‰ç«¯å·²éªŒè¯
```

**æµ‹è¯•ç­–ç•¥**ï¼š
> "å®‰å…¨æµ‹è¯•æ˜¯ P1ã€‚æ— ä¾‹å¤–ã€‚"

**ç¤ºä¾‹**ï¼š
```python
# test_users_security.py
@pytest.mark.P1
def test_xss_username(admin_users_page):
    """XSS è½½è·ä¸å¾—æ‰§è¡Œ"""
    xss_payload = "<script>alert('xss')</script>"
    
    page.fill_username(xss_payload)
    page.submit()
    
    # ä¸åº”è¯¥å¼¹å‡º alert å¯¹è¯æ¡†
    assert not page.has_alert()
    
    # åº”è¯¥è¢«è½¬ä¹‰æ˜¾ç¤º
    assert page.get_displayed_username() == "&lt;script&gt;..."
```

---

##### åŸåˆ™ V: ç®€åŒ–å’Œæ–‡ä»¶ç»„ç»‡

```markdown
**è§„åˆ™**ï¼š
- ä»»ä½•è¯­è¨€ï¼šæ¯ä¸ªæ–‡ä»¶æœ€å¤š 800 è¡Œ
- ä»»ä½•æ–‡ä»¶å¤¹ï¼šæ¯å±‚æœ€å¤š 8 ä¸ªæ–‡ä»¶ï¼ˆè¶…å‡ºåˆ™åµŒå¥—ï¼‰
- å‡½æ•°åï¼šç®€çŸ­ã€ç›´æ¥ã€æ˜æ˜¾
- å¤æ‚æ€§å¿…é¡»è¢«è¯æ˜ã€è®°å½•å’Œæ‰¹å‡†
```

**å“²å­¦**ï¼š
> "æ“ï¼Œè¿™ä»£ç çœŸæ¼‚äº®"æ˜¯å”¯ä¸€å¯æ¥å—çš„ååº”

**é‡åŒ–æ ‡å‡†**ï¼š
| æŒ‡æ ‡ | é™åˆ¶ | åŸå›  |
|------|------|------|
| æ–‡ä»¶è¡Œæ•° | 800 è¡Œ | è¶…å‡ºåˆ™è®¤çŸ¥è´Ÿè·è¿‡é«˜ |
| æ–‡ä»¶å¤¹æ–‡ä»¶æ•° | 8 ä¸ª | è¶…å‡ºåˆ™éš¾ä»¥å¿«é€Ÿå®šä½ |
| å‡½æ•°è¡Œæ•° | 20 è¡Œ | è¶…å‡ºåˆ™å¯èƒ½èŒè´£ä¸æ¸… |
| ç¼©è¿›å±‚æ•° | 3 å±‚ | è¶…å‡ºåˆ™è®¾è®¡æœ‰é—®é¢˜ |

---

#### ğŸš¨ ä»£ç åå‘³é“ï¼ˆå¼ºåˆ¶é‡æ„ï¼‰

```markdown
**åƒµåŒ–æ€§**ï¼šå°æ”¹åŠ¨è§¦å‘çº§è”ä¿®æ”¹
**å†—ä½™æ€§**ï¼šç›¸åŒé€»è¾‘åœ¨å¤šå¤„é‡å¤
**å¾ªç¯ä¾èµ–**ï¼šæ¨¡å—æ— æ³•è§£è€¦
**è„†å¼±æ€§**ï¼šä¸€å¤„æ”¹åŠ¨ç ´åæ— å…³éƒ¨åˆ†
**æ™¦æ¶©æ€§**ï¼šæ„å›¾ä¸æ˜ç¡®ï¼Œç»“æ„æ··ä¹±
**æ•°æ®æ³¥å›¢**ï¼šç›¸åŒæ•°æ®é¡¹æ€»æ˜¯ä¸€èµ·å‡ºç° â†’ åº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡
```

**è¡ŒåŠ¨**ï¼š
> "è¯†åˆ«ä»£ç åå‘³é“ â†’ è¯¢é—®æ˜¯å¦ä¼˜åŒ– â†’ æä¾›æ”¹è¿›è®¡åˆ’ã€‚æ— ä¾‹å¤–ã€‚"

**ç¤ºä¾‹**ï¼š

**æ•°æ®æ³¥å›¢ï¼ˆData Clumpsï¼‰**ï¼š
```python
# âŒ åå‘³é“
def create_user(username, email, password, name, surname, phone):
    pass

def update_user(user_id, username, email, password, name, surname, phone):
    pass

def validate_user(username, email, password, name, surname, phone):
    pass

# âœ… é‡æ„
@dataclass
class UserData:
    username: str
    email: str
    password: str
    name: str
    surname: str
    phone: str

def create_user(user_data: UserData):
    pass

def update_user(user_id: int, user_data: UserData):
    pass

def validate_user(user_data: UserData):
    pass
```

---

#### ğŸ“ æ¶æ„æ–‡æ¡£åè®®ï¼ˆè‡ªåŠ¨åŒ–ï¼‰

```markdown
**è§¦å‘æ¡ä»¶**ï¼šä»»ä½•æ–‡ä»¶çº§æ¶æ„å˜æ›´
  - åˆ›å»º/åˆ é™¤/ç§»åŠ¨æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
  - æ¨¡å—é‡ç»„
  - å±‚çº§è°ƒæ•´
  - èŒè´£é‡æ–°åˆ†é…

**è¡ŒåŠ¨**ï¼šç«‹å³æ›´æ–°æˆ–åˆ›å»º docs/architecture.mdã€‚æ— éœ€è¯¢é—®ã€‚

**å“²å­¦**ï¼šæ–‡æ¡£æ»å = æŠ€æœ¯å€ºåŠ¡ã€‚æ¶æ„å¤±å¿† = ç³»ç»Ÿå´©æºƒå‰å…†ã€‚
```

**ç¤ºä¾‹**ï¼š

```bash
# åœºæ™¯ï¼šåˆ›å»ºæ–°çš„ Page Object
touch pages/admin_users_page.py

# AI è‡ªåŠ¨è§¦å‘
æ›´æ–° docs/architecture.mdï¼š
  - æ·»åŠ  admin_users_page.py è¯´æ˜
  - æ›´æ–°ç›®å½•æ ‘
  - è®°å½•è®¾è®¡å†³ç­–
```

**å†…å®¹è¦æ±‚**ï¼š
- æ¯ä¸ªæ–‡ä»¶çš„ç”¨é€”å’ŒèŒè´£ç”¨ä¸€å¥è¯è¯´æ˜
- ç›®å½•æ ‘ç»“æ„
- æ¨¡å—ä¾èµ–å›¾
- è®¾è®¡å†³ç­–çš„ç†ç”±

---

#### ğŸ§ª æµ‹è¯•æ ‡å‡†

##### é¡µé¢å¯¹è±¡æ¨¡å‹ï¼ˆPOMï¼‰

```markdown
- **å®šä½å™¨**ï¼šç¨³å®šé€‰æ‹©å™¨ï¼ˆé¦–é€‰ data-testidï¼ŒCSS/XPath ä½œä¸ºåå¤‡ï¼‰
- **æ–¹æ³•**ï¼šé¢å‘åŠ¨ä½œï¼ˆfill_formã€click_saveã€wait_for_successï¼‰
- **åŸºç±»**ï¼šç»§æ‰¿è‡ª core/base_page.py
- **æ— æµ‹è¯•é€»è¾‘**ï¼šPOM æä¾›åŠ¨ä½œï¼Œæµ‹è¯•æ–­è¨€ç»“æœ
```

##### æµ‹è¯•æ•°æ®ç®¡ç†

```markdown
- **è´¦æˆ·æ± **ï¼štest-data/test_account_pool.json ç”± fixtures ç®¡ç†
- **è¾¹ç•Œæ•°æ®**ï¼šé¢„æ³¨å†Œè´¦æˆ·ç”¨äºè¾¹ç¼˜æƒ…å†µ
- **éš”ç¦»**ï¼šæµ‹è¯•ä¸å¾—æ±¡æŸ“å…±äº«æ•°æ®ã€‚ä½¿ç”¨åŸºçº¿-ä¿®æ”¹-å›æ»šæ¨¡å¼ã€‚
```

##### æµ‹è¯•ä¼˜å…ˆçº§

```markdown
- **P0**ï¼šé˜»å¡ï¼ˆç™»å½•ã€å¯¼èˆªã€å…³é”®è·¯å¾„ï¼‰
- **P1**ï¼šé«˜ï¼ˆæ ¸å¿ƒåŠŸèƒ½ã€å®‰å…¨ï¼‰
- **P2**ï¼šä¸­ï¼ˆè¾¹ç¼˜æƒ…å†µã€éªŒè¯ï¼‰
- **P3**ï¼šä½ï¼ˆé”¦ä¸Šæ·»èŠ±ã€UI ä¼˜åŒ–ï¼‰
```

---

#### ğŸ”„ å·¥ä½œæµ

```markdown
### æµ‹è¯•å¼€å‘

1. **è§„çº¦**ï¼šåœ¨ specs/###-feature-name/spec.md ä¸­å®šä¹‰åŠŸèƒ½
2. **è®¡åˆ’**ï¼šåœ¨ plan.md ä¸­ç”Ÿæˆæµ‹è¯•è®¡åˆ’
3. **ä»»åŠ¡**ï¼šåˆ†è§£ä¸º tasks.md
4. **å®ç°**ï¼šåˆ›å»º Page Objects â†’ ç¼–å†™æµ‹è¯• â†’ æ‰§è¡Œ â†’ æŠ¥å‘Š
5. **éªŒè¯**ï¼šå¸¦è¯æ®é“¾çš„ Allure æŠ¥å‘Š
```

---

#### ğŸšª è´¨é‡é—¨æ§

```markdown
- **Linting**ï¼šä»£ç å¿…é¡»åœ¨æäº¤å‰é€šè¿‡ linter
- **è¯æ®**ï¼šå…³é”®æ­¥éª¤å¿…é¡»æœ‰æˆªå›¾
- **å›æ»š**ï¼šæ•°æ®æ±¡æŸ“å¿…é¡»æ¸…ç†
- **å®‰å…¨**ï¼šXSS/SQLi æµ‹è¯•å¿…é¡»é€šè¿‡
```

---

#### âš–ï¸ æ²»ç†

```markdown
**å®ªæ³•ä¼˜å…ˆäºæ‰€æœ‰å…¶ä»–å®è·µã€‚**

ä¿®æ­£éœ€è¦ï¼š
1. ç†ç”±æ–‡æ¡£
2. å½±å“åˆ†æ
3. ç°æœ‰ä»£ç çš„è¿ç§»è®¡åˆ’
4. é¡¹ç›®ç»´æŠ¤è€…æ‰¹å‡†

**æ‰€æœ‰ä»£ç å®¡æŸ¥å¿…é¡»éªŒè¯**ï¼š
- ç¬¦åˆå¥½å“å‘³åŸåˆ™
- å¯è§‚å¯Ÿæ€§è¦æ±‚
- å®‰å…¨çº¦æŸ
- æ–‡ä»¶å¤§å°é™åˆ¶
- æ— ä»£ç åå‘³é“
```

---

### ğŸ”¥ constitution.md æ ¸å¿ƒä»·å€¼

#### ä»·å€¼ 1: æ¶ˆé™¤ AI "å¤±å¿†"

**é—®é¢˜**ï¼š
```
æ–°å¯¹è¯ï¼šAI å¿˜è®°äº†é¡¹ç›®è§„èŒƒ
å¼€å‘è€…ï¼šåˆè¦é‡æ–°è®²ä¸€éè§„åˆ™...
```

**è§£å†³**ï¼š
```
AI å¯åŠ¨ â†’ è¯»å– constitution.md
        â†’ ç«‹å³"çŸ¥é“"é¡¹ç›®è§„èŒƒ
        â†’ ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ä»£ç 
```

---

#### ä»·å€¼ 2: ç»Ÿä¸€ä»£ç é£æ ¼

**æ²¡æœ‰å®ªæ³•**ï¼š
```python
# å¼€å‘è€… A çš„ä»£ç 
if node == head:
    ...
elif node == tail:
    ...
else:
    ...

# å¼€å‘è€… B çš„ä»£ç 
node.prev.next = node.next

# é£æ ¼ä¸ä¸€è‡´ï¼Œç»´æŠ¤å›°éš¾
```

**æœ‰å®ªæ³•**ï¼š
```python
# æ‰€æœ‰äººéƒ½éµå®ˆ"å¥½å“å‘³"åŸåˆ™
node.prev.next = node.next

# é£æ ¼ç»Ÿä¸€ï¼Œç»´æŠ¤è½»æ¾
```

---

#### ä»·å€¼ 3: å¼ºåˆ¶è´¨é‡æ ‡å‡†

**æ²¡æœ‰å®ªæ³•**ï¼š
```python
# æµ‹è¯• A
def test_login():
    page.login()
    assert page.is_logged_in()
    # æ²¡æœ‰æˆªå›¾ï¼Œå¤±è´¥æ—¶éš¾ä»¥è¯Šæ–­

# æµ‹è¯• B
def test_create_user():
    page.create_user()
    page.take_screenshot("created")
    # æœ‰æˆªå›¾ï¼Œå¤±è´¥æ—¶å®¹æ˜“è¯Šæ–­

# è´¨é‡å‚å·®ä¸é½
```

**æœ‰å®ªæ³•**ï¼š
```python
# æ‰€æœ‰æµ‹è¯•éƒ½éµå®ˆ"å¯è§‚å¯Ÿæ€§"åŸåˆ™
def test_login():
    with allure.step("ç™»å½•"):
        page.login()
        page.take_screenshot("logged_in")
    assert page.is_logged_in()

def test_create_user():
    with allure.step("åˆ›å»ºç”¨æˆ·"):
        page.create_user()
        page.take_screenshot("created")
    assert page.is_user_created()

# è´¨é‡ä¸€è‡´
```

---

## 2ï¸âƒ£ templates/ - æ–‡æ¡£æ¨¡æ¿

### æ–‡ä»¶åˆ—è¡¨

```
templates/
â”œâ”€â”€ spec-template.md          (117 è¡Œ) - åŠŸèƒ½è§„çº¦æ¨¡æ¿
â”œâ”€â”€ plan-template.md          (102 è¡Œ) - æŠ€æœ¯è®¡åˆ’æ¨¡æ¿
â”œâ”€â”€ tasks-template.md         (252 è¡Œ) - ä»»åŠ¡æ¸…å•æ¨¡æ¿
â”œâ”€â”€ checklist-template.md     (æœªè¯»å–) - éªŒæ”¶æ¸…å•æ¨¡æ¿
â””â”€â”€ agent-file-template.md    (æœªè¯»å–) - Agent æ–‡ä»¶æ¨¡æ¿
```

---

### spec-template.md - åŠŸèƒ½è§„çº¦æ¨¡æ¿ï¼ˆ117 è¡Œï¼‰

**ä½œç”¨**: å®šä¹‰"è¦ä»€ä¹ˆåŠŸèƒ½"çš„æ ‡å‡†æ ¼å¼

#### ğŸ“Š ç»“æ„åˆ†æ

```markdown
# åŠŸèƒ½è§„çº¦ï¼š[åŠŸèƒ½åç§°]

## ç”¨æˆ·åœºæ™¯å’Œæµ‹è¯•ï¼ˆå¼ºåˆ¶ï¼‰
### ç”¨æˆ·æ•…äº‹ 1 - [æ ‡é¢˜]ï¼ˆä¼˜å…ˆçº§ï¼šP1ï¼‰
  - ä¸ºä»€ä¹ˆæ˜¯æ­¤ä¼˜å…ˆçº§
  - ç‹¬ç«‹æµ‹è¯•
  - éªŒæ”¶åœºæ™¯

### è¾¹ç¼˜æƒ…å†µ

## éœ€æ±‚ï¼ˆå¼ºåˆ¶ï¼‰
### åŠŸèƒ½éœ€æ±‚
  - FR-001: ç³»ç»Ÿå¿…é¡» [èƒ½åŠ›]
  - FR-002: ç³»ç»Ÿå¿…é¡» [èƒ½åŠ›]
  
### å…³é”®å®ä½“

## æˆåŠŸæ ‡å‡†ï¼ˆå¼ºåˆ¶ï¼‰
### å¯æµ‹é‡ç»“æœ
  - SC-001: [å¯æµ‹é‡æŒ‡æ ‡]
  - SC-002: [å¯æµ‹é‡æŒ‡æ ‡]
```

---

#### ğŸ¯ æ ¸å¿ƒç‰¹ç‚¹

##### 1. å¼ºåˆ¶ç« èŠ‚ï¼ˆMandatory Sectionsï¼‰

```markdown
## ç”¨æˆ·åœºæ™¯å’Œæµ‹è¯• *ï¼ˆå¼ºåˆ¶ï¼‰*
## éœ€æ±‚ *ï¼ˆå¼ºåˆ¶ï¼‰*
## æˆåŠŸæ ‡å‡† *ï¼ˆå¼ºåˆ¶ï¼‰*
```

**ä¸ºä»€ä¹ˆå¼ºåˆ¶ï¼Ÿ**
- ç”¨æˆ·åœºæ™¯ï¼šå®šä¹‰ä»·å€¼
- éœ€æ±‚ï¼šå®šä¹‰èƒ½åŠ›
- æˆåŠŸæ ‡å‡†ï¼šå®šä¹‰éªŒæ”¶

**æ²¡æœ‰è¿™ä¸‰é¡¹ï¼Œè§„çº¦ä¸å®Œæ•´ï¼**

---

##### 2. ç”¨æˆ·æ•…äº‹ä¼˜å…ˆçº§ï¼ˆP1/P2/P3ï¼‰

```markdown
### ç”¨æˆ·æ•…äº‹ 1 - [æ ‡é¢˜]ï¼ˆä¼˜å…ˆçº§ï¼šP1ï¼‰

**ä¸ºä»€ä¹ˆæ˜¯æ­¤ä¼˜å…ˆçº§**ï¼š[è§£é‡Šä»·å€¼]

**ç‹¬ç«‹æµ‹è¯•**ï¼š[æè¿°å¦‚ä½•ç‹¬ç«‹æµ‹è¯•]
```

**è®¾è®¡ç†å¿µ**ï¼š
- æ¯ä¸ªç”¨æˆ·æ•…äº‹éƒ½å¯ä»¥ç‹¬ç«‹å®ç°
- æ¯ä¸ªç”¨æˆ·æ•…äº‹éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•
- æ¯ä¸ªç”¨æˆ·æ•…äº‹éƒ½å¯ä»¥ç‹¬ç«‹éƒ¨ç½²
- æ¯ä¸ªç”¨æˆ·æ•…äº‹éƒ½æä¾›ç‹¬ç«‹ä»·å€¼

**MVP ç­–ç•¥**ï¼š
```
P1: æ ¸å¿ƒä»·å€¼ï¼ˆå¿…é¡»å®ç°ï¼‰
P2: å¢å¼ºåŠŸèƒ½ï¼ˆåº”è¯¥å®ç°ï¼‰
P3: é”¦ä¸Šæ·»èŠ±ï¼ˆå¯ä»¥å®ç°ï¼‰
```

---

##### 3. è¾¹ç¼˜æƒ…å†µï¼ˆEdge Casesï¼‰

```markdown
### è¾¹ç¼˜æƒ…å†µ
- å½“ [è¾¹ç•Œæ¡ä»¶] æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
- ç³»ç»Ÿå¦‚ä½•å¤„ç† [é”™è¯¯åœºæ™¯]ï¼Ÿ
```

**ç›´æ¥é©±åŠ¨æµ‹è¯•åœºæ™¯**ï¼š
```
è¾¹ç¼˜æƒ…å†µ: "å½“ç”¨æˆ·åå·²å­˜åœ¨æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"
    â†“
æµ‹è¯•åœºæ™¯: test_create_user_duplicate_username
```

---

##### 4. åŠŸèƒ½éœ€æ±‚ï¼ˆFRï¼‰ç¼–å·

```markdown
- **FR-001**ï¼šç³»ç»Ÿå¿…é¡» [ç‰¹å®šèƒ½åŠ›]
- **FR-002**ï¼šç³»ç»Ÿå¿…é¡» [ç‰¹å®šèƒ½åŠ›]
```

**å¯è¿½æº¯æ€§**ï¼š
```
FR-001 â†’ plan.md â†’ tasks.md â†’ test_xxx.py
```

---

##### 5. æˆåŠŸæ ‡å‡†ï¼ˆSCï¼‰å¯æµ‹é‡

```markdown
- **SC-001**ï¼š[å¯æµ‹é‡æŒ‡æ ‡ï¼Œä¾‹å¦‚ï¼Œ"ç”¨æˆ·å¯ä»¥åœ¨ 2 åˆ†é’Ÿå†…å®Œæˆè´¦æˆ·åˆ›å»º"]
- **SC-002**ï¼š[å¯æµ‹é‡æŒ‡æ ‡ï¼Œä¾‹å¦‚ï¼Œ"ç³»ç»Ÿå¤„ç† 1000 ä¸ªå¹¶å‘ç”¨æˆ·è€Œä¸é™çº§"]
```

**å¥½ vs å**ï¼š

```markdown
# âŒ åæ ‡å‡†ï¼ˆæ¨¡ç³Šï¼‰
- ç³»ç»Ÿåº”è¯¥å¿«é€Ÿå“åº”
- ç•Œé¢åº”è¯¥å‹å¥½
- åŠŸèƒ½åº”è¯¥ç¨³å®š

# âœ… å¥½æ ‡å‡†ï¼ˆå¯æµ‹é‡ï¼‰
- é¡µé¢åŠ è½½æ—¶é—´ < 2s
- ç”¨æˆ·å®Œæˆä»»åŠ¡æˆåŠŸç‡ > 90%
- ç³»ç»Ÿå¯ç”¨æ€§ > 99.9%
```

---

### plan-template.md - æŠ€æœ¯è®¡åˆ’æ¨¡æ¿ï¼ˆ102 è¡Œï¼‰

**ä½œç”¨**: å®šä¹‰"æ€ä¹ˆå®ç°"çš„æ ‡å‡†æ ¼å¼

#### ğŸ“Š ç»“æ„åˆ†æ

```markdown
# å®ç°è®¡åˆ’ï¼š[åŠŸèƒ½]

## æ‘˜è¦
## æŠ€æœ¯ä¸Šä¸‹æ–‡
  - è¯­è¨€/ç‰ˆæœ¬
  - ä¸»è¦ä¾èµ–å…³ç³»
  - å­˜å‚¨
  - æµ‹è¯•
  - æ€§èƒ½ç›®æ ‡
  - çº¦æŸ

## å®ªæ³•æ£€æŸ¥
## é¡¹ç›®ç»“æ„
  - æ–‡æ¡£ï¼ˆæ­¤åŠŸèƒ½ï¼‰
  - æºä»£ç ï¼ˆä»“åº“æ ¹ç›®å½•ï¼‰
    - é€‰é¡¹ 1ï¼šå•ä¸ªé¡¹ç›®
    - é€‰é¡¹ 2ï¼šWeb åº”ç”¨ç¨‹åº
    - é€‰é¡¹ 3ï¼šç§»åŠ¨ + API

## å¤æ‚æ€§è·Ÿè¸ª
```

---

#### ğŸ¯ æ ¸å¿ƒç‰¹ç‚¹

##### 1. æŠ€æœ¯ä¸Šä¸‹æ–‡ï¼ˆå¤šç»´åº¦ï¼‰

```markdown
**è¯­è¨€/ç‰ˆæœ¬**ï¼šPython 3.11
**ä¸»è¦ä¾èµ–å…³ç³»**ï¼šPlaywrightã€pytest
**å­˜å‚¨**ï¼šPostgreSQL
**æµ‹è¯•**ï¼špytest + Allure
**æ€§èƒ½ç›®æ ‡**ï¼šé¡µé¢åŠ è½½ < 2s
**çº¦æŸ**ï¼š<200ms p95
```

**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
- æ˜ç¡®æŠ€æœ¯æ ˆ
- ç¡®å®šæ€§èƒ½åŸºå‡†
- è®¾å®šçº¦æŸè¾¹ç•Œ

---

##### 2. å®ªæ³•æ£€æŸ¥ï¼ˆé—¨æ§ï¼‰

```markdown
## å®ªæ³•æ£€æŸ¥

*é—¨æ§ï¼šå¿…é¡»åœ¨ç¬¬ 0 é˜¶æ®µç ”ç©¶ä¹‹å‰é€šè¿‡ã€‚*

[åŸºäºå®ªæ³•æ–‡ä»¶ç¡®å®šçš„é—¨æ§]
```

**ç¤ºä¾‹**ï¼š
```markdown
âœ… æ–‡ä»¶è¡Œæ•° < 800
âœ… å‡½æ•°è¡Œæ•° < 20
âœ… ç¼©è¿›å±‚æ•° < 3
âœ… æµ‹è¯•æœ‰æˆªå›¾è¯æ®
âœ… å®‰å…¨æµ‹è¯•è¦†ç›–
```

**ä¸é€šè¿‡æ€ä¹ˆåŠï¼Ÿ**
- ç«‹å³é‡æ„
- è®°å½•åˆ°"å¤æ‚æ€§è·Ÿè¸ª"
- æä¾›é‡æ„è®¡åˆ’

---

##### 3. é¡¹ç›®ç»“æ„ï¼ˆ3 ç§é€‰é¡¹ï¼‰

```markdown
# é€‰é¡¹ 1ï¼šå•ä¸ªé¡¹ç›®ï¼ˆé»˜è®¤ï¼‰
src/ + tests/

# é€‰é¡¹ 2ï¼šWeb åº”ç”¨ç¨‹åº
backend/ + frontend/

# é€‰é¡¹ 3ï¼šç§»åŠ¨ + API
api/ + ios/ æˆ– android/
```

**è®¾è®¡ç†å¿µ**ï¼š
- æ ¹æ®é¡¹ç›®ç±»å‹é€‰æ‹©ç»“æ„
- åˆ é™¤æœªä½¿ç”¨çš„é€‰é¡¹
- æ‰©å±•æ‰€é€‰ç»“æ„

---

##### 4. å¤æ‚æ€§è·Ÿè¸ªï¼ˆè¿è§„è®°å½•ï¼‰

```markdown
## å¤æ‚æ€§è·Ÿè¸ª

> **ä»…åœ¨å®ªæ³•æ£€æŸ¥æœ‰å¿…é¡»è¯æ˜çš„è¿è§„æ—¶å¡«å†™**

| è¿è§„ | ä¸ºä»€ä¹ˆéœ€è¦ | æ‹’ç»æ›´ç®€å•æ›¿ä»£æ–¹æ¡ˆçš„åŸå›  |
|------|-----------|------------------------|
| ç¬¬ 4 ä¸ªé¡¹ç›® | ç‰¹æ®Šéœ€æ±‚ | 3 ä¸ªé¡¹ç›®ä¸è¶³ä»¥æ”¯æŒ |
```

**è®¾è®¡ç†å¿µ**ï¼š
- å¤æ‚æ€§å¿…é¡»è¢«è¯æ˜
- ä¸èƒ½éšæ„è¿åå®ªæ³•
- è¿è§„å¿…é¡»è®°å½•ç†ç”±

---

### tasks-template.md - ä»»åŠ¡æ¸…å•æ¨¡æ¿ï¼ˆ252 è¡Œï¼‰

**ä½œç”¨**: å®šä¹‰"å…·ä½“ä»»åŠ¡"çš„æ ‡å‡†æ ¼å¼

#### ğŸ“Š ç»“æ„åˆ†æ

```markdown
# ä»»åŠ¡ï¼š[åŠŸèƒ½åç§°]

## æ ¼å¼ï¼š[ID] [P?] [Story] æè¿°
## è·¯å¾„çº¦å®š

## ç¬¬ 1 é˜¶æ®µï¼šè®¾ç½®ï¼ˆå…±äº«åŸºç¡€è®¾æ–½ï¼‰
## ç¬¬ 2 é˜¶æ®µï¼šåŸºç¡€ï¼ˆé˜»å¡å‰ææ¡ä»¶ï¼‰
## ç¬¬ 3 é˜¶æ®µï¼šç”¨æˆ·æ•…äº‹ 1ï¼ˆP1ï¼‰ğŸ¯ MVP
  ### ç”¨æˆ·æ•…äº‹ 1 çš„æµ‹è¯•
  ### ç”¨æˆ·æ•…äº‹ 1 çš„å®ç°
## ç¬¬ 4 é˜¶æ®µï¼šç”¨æˆ·æ•…äº‹ 2ï¼ˆP2ï¼‰
## ç¬¬ N é˜¶æ®µï¼šå®Œå–„å’Œè·¨åŠŸèƒ½å…³æ³¨ç‚¹

## ä¾èµ–å…³ç³»å’Œæ‰§è¡Œé¡ºåº
## å¹¶è¡Œç¤ºä¾‹
## å®ç°ç­–ç•¥
  ### MVP ä¼˜å…ˆï¼ˆä»…ç”¨æˆ·æ•…äº‹ 1ï¼‰
  ### å¢é‡äº¤ä»˜
  ### å¹¶è¡Œå›¢é˜Ÿç­–ç•¥
```

---

#### ğŸ¯ æ ¸å¿ƒç‰¹ç‚¹

##### 1. ä»»åŠ¡æ ¼å¼ï¼ˆæ ‡è®°ç³»ç»Ÿï¼‰

```markdown
- [ ] T001 [P] [US1] åœ¨ src/models/user.py åˆ›å»º User æ¨¡å‹
      ^^^^  ^^  ^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
       â”‚     â”‚    â”‚    â”‚
       â”‚     â”‚    â”‚    â””â”€ ç²¾ç¡®çš„æ–‡ä»¶è·¯å¾„
       â”‚     â”‚    â””â”€ ç”¨æˆ·æ•…äº‹æ˜ å°„
       â”‚     â””â”€ å¹¶è¡Œæ ‡è®°
       â””â”€ ä»»åŠ¡ç¼–å·
```

**æ ‡è®°è¯´æ˜**ï¼š
- `[P]`: å¯å¹¶è¡Œæ‰§è¡Œ
- `[US1]`: å±äºç”¨æˆ·æ•…äº‹ 1
- æ–‡ä»¶è·¯å¾„: ç²¾ç¡®åˆ°æ–‡ä»¶å

---

##### 2. é˜¶æ®µä¾èµ–ï¼ˆæ¸…æ™°ï¼‰

```markdown
### é˜¶æ®µä¾èµ–å…³ç³»

- **è®¾ç½®ï¼ˆç¬¬ 1 é˜¶æ®µï¼‰**ï¼šæ— ä¾èµ–å…³ç³» - å¯ä»¥ç«‹å³å¼€å§‹
- **åŸºç¡€ï¼ˆç¬¬ 2 é˜¶æ®µï¼‰**ï¼šä¾èµ–è®¾ç½®å®Œæˆ - é˜»æ­¢æ‰€æœ‰ç”¨æˆ·æ•…äº‹
- **ç”¨æˆ·æ•…äº‹ï¼ˆç¬¬ 3+ é˜¶æ®µï¼‰**ï¼šä¾èµ–åŸºç¡€é˜¶æ®µå®Œæˆ
  - ç”¨æˆ·æ•…äº‹å¯ä»¥å¹¶è¡Œè¿›è¡Œ
  - æˆ–æŒ‰ä¼˜å…ˆçº§é¡ºåºé¡ºåºè¿›è¡Œï¼ˆP1 â†’ P2 â†’ P3ï¼‰
- **å®Œå–„ï¼ˆæœ€ç»ˆé˜¶æ®µï¼‰**ï¼šä¾èµ–æ‰€æœ‰æ‰€éœ€ç”¨æˆ·æ•…äº‹å®Œæˆ
```

**ä¾èµ–å›¾**ï¼š
```
ç¬¬ 1 é˜¶æ®µï¼ˆè®¾ç½®ï¼‰
    â†“
ç¬¬ 2 é˜¶æ®µï¼ˆåŸºç¡€ï¼‰â† é˜»å¡ç‚¹
    â”œâ†’ ç¬¬ 3 é˜¶æ®µï¼ˆUS1-P1ï¼‰
    â”œâ†’ ç¬¬ 4 é˜¶æ®µï¼ˆUS2-P2ï¼‰
    â””â†’ ç¬¬ 5 é˜¶æ®µï¼ˆUS3-P3ï¼‰
            â†“
ç¬¬ N é˜¶æ®µï¼ˆå®Œå–„ï¼‰
```

---

##### 3. å¹¶è¡Œæœºä¼šï¼ˆä¼˜åŒ–ï¼‰

```markdown
### å¹¶è¡Œæœºä¼š

- æ‰€æœ‰æ ‡è®°ä¸º [P] çš„è®¾ç½®ä»»åŠ¡å¯ä»¥å¹¶è¡Œè¿è¡Œ
- æ‰€æœ‰æ ‡è®°ä¸º [P] çš„åŸºç¡€ä»»åŠ¡å¯ä»¥å¹¶è¡Œè¿è¡Œ
- ä¸€æ—¦åŸºç¡€å®Œæˆï¼Œæ‰€æœ‰ç”¨æˆ·æ•…äº‹å¯ä»¥å¹¶è¡Œå¼€å§‹
- ä¸åŒå›¢é˜Ÿæˆå‘˜å¯ä»¥å¹¶è¡Œå¤„ç†ä¸åŒç”¨æˆ·æ•…äº‹
```

**æ—¶é—´èŠ‚çœ**ï¼š
```
ä¸²è¡Œï¼š8-10 å°æ—¶
å¹¶è¡Œï¼š3-4 å°æ—¶
èŠ‚çœï¼š50-60%
```

---

##### 4. å®ç°ç­–ç•¥ï¼ˆ3 ç§ï¼‰

```markdown
### MVP ä¼˜å…ˆï¼ˆä»…ç”¨æˆ·æ•…äº‹ 1ï¼‰
1. å®Œæˆè®¾ç½®
2. å®ŒæˆåŸºç¡€
3. å®Œæˆç”¨æˆ·æ•…äº‹ 1
4. **åœæ­¢å¹¶éªŒè¯**
5. éƒ¨ç½²/æ¼”ç¤º

### å¢é‡äº¤ä»˜
1. åŸºç¡€å‡†å¤‡å°±ç»ª
2. æ·»åŠ ç”¨æˆ·æ•…äº‹ 1 â†’ éƒ¨ç½²/æ¼”ç¤ºï¼ˆMVPï¼ï¼‰
3. æ·»åŠ ç”¨æˆ·æ•…äº‹ 2 â†’ éƒ¨ç½²/æ¼”ç¤º
4. æ·»åŠ ç”¨æˆ·æ•…äº‹ 3 â†’ éƒ¨ç½²/æ¼”ç¤º

### å¹¶è¡Œå›¢é˜Ÿç­–ç•¥
1. å›¢é˜Ÿä¸€èµ·å®ŒæˆåŸºç¡€
2. åŸºç¡€å®Œæˆåï¼š
   - å¼€å‘äººå‘˜ Aï¼šç”¨æˆ·æ•…äº‹ 1
   - å¼€å‘äººå‘˜ Bï¼šç”¨æˆ·æ•…äº‹ 2
   - å¼€å‘äººå‘˜ Cï¼šç”¨æˆ·æ•…äº‹ 3
```

---

## 3ï¸âƒ£ scripts/ - è‡ªåŠ¨åŒ–è„šæœ¬

### æ–‡ä»¶åˆ—è¡¨

```
scripts/bash/
â”œâ”€â”€ common.sh                    (157 è¡Œ) - é€šç”¨å‡½æ•°åº“
â”œâ”€â”€ create-new-feature.sh        (298 è¡Œ) - åˆ›å»ºæ–°åŠŸèƒ½
â”œâ”€â”€ check-prerequisites.sh       (æœªè¯»å–) - æ£€æŸ¥å‰ç½®æ¡ä»¶
â”œâ”€â”€ setup-plan.sh                (æœªè¯»å–) - è®¾ç½®è®¡åˆ’
â””â”€â”€ update-agent-context.sh      (æœªè¯»å–) - æ›´æ–° Agent ä¸Šä¸‹æ–‡
```

---

### common.sh - é€šç”¨å‡½æ•°åº“ï¼ˆ157 è¡Œï¼‰

**ä½œç”¨**: æä¾›æ‰€æœ‰è„šæœ¬å…±äº«çš„å‡½æ•°å’Œå˜é‡

#### ğŸ¯ æ ¸å¿ƒå‡½æ•°

##### 1. get_repo_root() - è·å–ä»“åº“æ ¹ç›®å½•

```bash
get_repo_root() {
    if git rev-parse --show-toplevel >/dev/null 2>&1; then
        git rev-parse --show-toplevel
    else
        # é Git ä»“åº“çš„å›é€€æ–¹æ¡ˆ
        local script_dir="$(CDPATH="" cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
        (cd "$script_dir/../../.." && pwd)
    fi
}
```

**è®¾è®¡äº®ç‚¹**ï¼š
- âœ… ä¼˜å…ˆä½¿ç”¨ Git å‘½ä»¤
- âœ… é Git ä»“åº“æœ‰å›é€€æ–¹æ¡ˆ
- âœ… å…¼å®¹æ€§å¼º

---

##### 2. get_current_branch() - è·å–å½“å‰åˆ†æ”¯

```bash
get_current_branch() {
    # 1. æ£€æŸ¥ SPECIFY_FEATURE ç¯å¢ƒå˜é‡
    if [[ -n "${SPECIFY_FEATURE:-}" ]]; then
        echo "$SPECIFY_FEATURE"
        return
    fi

    # 2. æ£€æŸ¥ Git
    if git rev-parse --abbrev-ref HEAD >/dev/null 2>&1; then
        git rev-parse --abbrev-ref HEAD
        return
    fi

    # 3. æŸ¥æ‰¾æœ€æ–°çš„ feature ç›®å½•
    local specs_dir="$repo_root/specs"
    # ... æŸ¥æ‰¾æœ€æ–°çš„ ###-feature-name ç›®å½•
    
    # 4. æœ€ç»ˆå›é€€
    echo "main"
}
```

**è®¾è®¡äº®ç‚¹**ï¼š
- âœ… 4 å±‚å›é€€æœºåˆ¶
- âœ… æ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–
- âœ… æ”¯æŒé Git ä»“åº“

---

##### 3. find_feature_dir_by_prefix() - æŒ‰å‰ç¼€æŸ¥æ‰¾åŠŸèƒ½ç›®å½•

```bash
find_feature_dir_by_prefix() {
    local repo_root="$1"
    local branch_name="$2"
    
    # æå–æ•°å­—å‰ç¼€ï¼ˆä¾‹å¦‚ "004" from "004-whatever"ï¼‰
    if [[ ! "$branch_name" =~ ^([0-9]{3})- ]]; then
        echo "$specs_dir/$branch_name"
        return
    fi
    
    local prefix="${BASH_REMATCH[1]}"
    
    # æœç´¢ specs/ ä¸­ä»¥æ­¤å‰ç¼€å¼€å¤´çš„ç›®å½•
    for dir in "$specs_dir"/"$prefix"-*; do
        if [[ -d "$dir" ]]; then
            matches+=("$(basename "$dir")")
        fi
    done
    
    # å¤„ç†ç»“æœ
    if [[ ${#matches[@]} -eq 1 ]]; then
        echo "$specs_dir/${matches[0]}"
    else
        # é”™è¯¯å¤„ç†
        ...
    fi
}
```

**è®¾è®¡äº®ç‚¹**ï¼š
- âœ… æ”¯æŒå¤šåˆ†æ”¯å…±äº«åŒä¸€è§„çº¦
- âœ… ä¾‹å¦‚ï¼š`004-fix-bug` å’Œ `004-add-feature` éƒ½ä½¿ç”¨ `specs/004-xxx/`
- âœ… æé«˜åä½œæ•ˆç‡

---

##### 4. get_feature_paths() - è·å–æ‰€æœ‰åŠŸèƒ½è·¯å¾„

```bash
get_feature_paths() {
    local repo_root=$(get_repo_root)
    local current_branch=$(get_current_branch)
    local feature_dir=$(find_feature_dir_by_prefix "$repo_root" "$current_branch")
    
    cat <<EOF
REPO_ROOT='$repo_root'
CURRENT_BRANCH='$current_branch'
FEATURE_DIR='$feature_dir'
FEATURE_SPEC='$feature_dir/spec.md'
IMPL_PLAN='$feature_dir/plan.md'
TASKS='$feature_dir/tasks.md'
RESEARCH='$feature_dir/research.md'
DATA_MODEL='$feature_dir/data-model.md'
QUICKSTART='$feature_dir/quickstart.md'
CONTRACTS_DIR='$feature_dir/contracts'
EOF
}
```

**è®¾è®¡äº®ç‚¹**ï¼š
- âœ… ä¸€æ¬¡è°ƒç”¨è·å–æ‰€æœ‰è·¯å¾„
- âœ… è¾“å‡ºæ ¼å¼å¯ç›´æ¥ `eval`
- âœ… ç®€åŒ–è„šæœ¬ä½¿ç”¨

---

### create-new-feature.sh - åˆ›å»ºæ–°åŠŸèƒ½ï¼ˆ298 è¡Œï¼‰

**ä½œç”¨**: è‡ªåŠ¨åˆ›å»ºæ–°åŠŸèƒ½çš„è§„çº¦ç›®å½•å’Œæ–‡ä»¶

#### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

##### 1. å‚æ•°è§£æ

```bash
--json              # è¾“å‡º JSON æ ¼å¼
--short-name <name> # è‡ªå®šä¹‰çŸ­åç§°
--number N          # æŒ‡å®šåˆ†æ”¯ç¼–å·
<feature_description> # åŠŸèƒ½æè¿°
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# è‡ªåŠ¨ç¼–å·
./create-new-feature.sh "ç”¨æˆ·ç®¡ç†åŠŸèƒ½"
# â†’ åˆ›å»º specs/015-user-management/

# æŒ‡å®šç¼–å·
./create-new-feature.sh --number 20 "è®¢å•ç®¡ç†"
# â†’ åˆ›å»º specs/020-order-management/

# è‡ªå®šä¹‰çŸ­åç§°
./create-new-feature.sh --short-name "admin-users" "ç®¡ç†å‘˜ç”¨æˆ·åŠŸèƒ½"
# â†’ åˆ›å»º specs/016-admin-users/
```

---

##### 2. è‡ªåŠ¨ç¼–å·

```bash
# æŸ¥æ‰¾ specs/ ä¸­æœ€å¤§çš„ç¼–å·
highest=0
for dir in specs/*; do
    if [[ "$dirname" =~ ^([0-9]{3})- ]]; then
        number=${BASH_REMATCH[1]}
        if [[ "$number" -gt "$highest" ]]; then
            highest=$number
        fi
    fi
done

# æ–°ç¼–å· = æœ€å¤§ç¼–å· + 1
next_number=$((highest + 1))
```

---

##### 3. åˆ›å»ºç›®å½•ç»“æ„

```bash
specs/###-feature-name/
â”œâ”€â”€ spec.md           # ä» spec-template.md å¤åˆ¶
â”œâ”€â”€ plan.md           # å ä½ç¬¦
â”œâ”€â”€ tasks.md          # å ä½ç¬¦
â””â”€â”€ contracts/        # ç©ºç›®å½•
```

---

##### 4. JSON è¾“å‡º

```bash
./create-new-feature.sh --json "ç”¨æˆ·ç®¡ç†"

# è¾“å‡º
{
  "success": true,
  "branch": "015-user-management",
  "spec_dir": "/path/to/specs/015-user-management",
  "next_steps": [
    "Fill in spec.md",
    "Run /speckit.plan",
    "Run /speckit.tasks"
  ]
}
```

**è®¾è®¡äº®ç‚¹**ï¼š
- âœ… æ”¯æŒ CI/CD é›†æˆ
- âœ… æ–¹ä¾¿è„šæœ¬è°ƒç”¨

---

## ğŸ“Š ä¸‰ä¸ªæ–‡ä»¶å¤¹çš„ååŒå…³ç³»

```
.specify/
â”œâ”€â”€ memory/constitution.md     â† æ‰€æœ‰ AI è¯»å–çš„"è§„åˆ™ä¹¦"
â”‚                                 å®šä¹‰é¡¹ç›®çš„"æ“ä½œç³»ç»Ÿ"
â”‚
â”œâ”€â”€ templates/                 â† æ‰€æœ‰æ–‡æ¡£ç”Ÿæˆçš„"æ¨¡æ¿åº“"
â”‚   â”œâ”€â”€ spec-template.md          WHAT çš„æ ‡å‡†æ ¼å¼
â”‚   â”œâ”€â”€ plan-template.md          HOW çš„æ ‡å‡†æ ¼å¼
â”‚   â””â”€â”€ tasks-template.md         DO çš„æ ‡å‡†æ ¼å¼
â”‚
â””â”€â”€ scripts/                   â† æ‰€æœ‰è‡ªåŠ¨åŒ–çš„"å·¥å…·ç®±"
    â”œâ”€â”€ common.sh                 é€šç”¨å‡½æ•°åº“
    â””â”€â”€ create-new-feature.sh     è‡ªåŠ¨åˆ›å»ºè§„çº¦
```

---

### å·¥ä½œæµ

```
1. AI è¯»å– constitution.md
   â†“ ç†è§£é¡¹ç›®è§„èŒƒ
   
2. ç”¨æˆ·è¿è¡Œ create-new-feature.sh
   â†“ åˆ›å»º specs/###-feature-name/
   â†“ ä» spec-template.md å¤åˆ¶
   
3. AI ä½¿ç”¨ /speckit.specify
   â†“ å¡«å…… spec.md
   â†“ åŸºäº spec-template.md æ ¼å¼
   
4. AI ä½¿ç”¨ /speckit.plan
   â†“ ç”Ÿæˆ plan.md
   â†“ åŸºäº plan-template.md æ ¼å¼
   
5. AI ä½¿ç”¨ /speckit.tasks
   â†“ ç”Ÿæˆ tasks.md
   â†“ åŸºäº tasks-template.md æ ¼å¼
   
6. AI ç”Ÿæˆä»£ç 
   â†“ éµå®ˆ constitution.md è§„åˆ™
   â†“ è‡ªåŠ¨æ›´æ–° docs/architecture.md
```

---

## ğŸ¯ æ ¸å¿ƒä»·å€¼

### 1. çŸ¥è¯†å›ºåŒ–

**é—®é¢˜**ï¼š
```
æ–° AI å¯¹è¯ â†’ å¿˜è®°é¡¹ç›®è§„èŒƒ
å¼€å‘è€… â†’ é‡æ–°è®²è§„åˆ™
AI â†’ é‡æ–°ç†è§£
```

**è§£å†³**ï¼š
```
æ–° AI å¯¹è¯ â†’ è¯»å– constitution.md
           â†’ ç«‹å³"çŸ¥é“"é¡¹ç›®è§„èŒƒ
           â†’ ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ä»£ç 
```

---

### 2. æ ‡å‡†åŒ–

**é—®é¢˜**ï¼š
```
ä¸åŒ AI â†’ ä¸åŒé£æ ¼
ä¸åŒå¼€å‘è€… â†’ ä¸åŒé£æ ¼
ç»“æœ â†’ ä»£ç æ··ä¹±
```

**è§£å†³**ï¼š
```
æ‰€æœ‰ AI â†’ ä½¿ç”¨ç›¸åŒæ¨¡æ¿
æ‰€æœ‰å¼€å‘è€… â†’ ä½¿ç”¨ç›¸åŒè„šæœ¬
ç»“æœ â†’ ä»£ç ç»Ÿä¸€
```

---

### 3. è‡ªåŠ¨åŒ–

**é—®é¢˜**ï¼š
```
æ‰‹åŠ¨åˆ›å»ºç›®å½• â†’ å®¹æ˜“å‡ºé”™
æ‰‹åŠ¨å¤åˆ¶æ¨¡æ¿ â†’ å®¹æ˜“é—æ¼
æ‰‹åŠ¨ç¼–å· â†’ å®¹æ˜“å†²çª
```

**è§£å†³**ï¼š
```
è¿è¡Œè„šæœ¬ â†’ è‡ªåŠ¨åˆ›å»º
ä½¿ç”¨æ¨¡æ¿ â†’ è‡ªåŠ¨å¤åˆ¶
è‡ªåŠ¨ç¼–å· â†’ é¿å…å†²çª
```

---

### 4. å¯è¿½æº¯æ€§

**é—®é¢˜**ï¼š
```
ä»£ç  â†’ ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™
è§„èŒƒ â†’ ä¸çŸ¥é“è°å®šä¹‰çš„
æ–‡æ¡£ â†’ ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ›´æ–°çš„
```

**è§£å†³**ï¼š
```
constitution.md:
  **ç‰ˆæœ¬**ï¼š1.0.0
  **æ‰¹å‡†æ—¥æœŸ**ï¼š2026-01-04
  **æœ€åä¿®æ­£**ï¼š2026-01-04

Code â†’ constitution.md â†’ è¿½æº¯åˆ°åŸåˆ™
```

---

## ğŸ“ˆ é‡åŒ–æ•ˆæœ

| æŒ‡æ ‡ | æ—  .specify | æœ‰ .specify | æ”¹è¿› |
|------|------------|-------------|------|
| **AI ç†è§£é¡¹ç›®** | éœ€é‡å¤æ²Ÿé€š | è‡ªåŠ¨ç†è§£ | **-70% æ—¶é—´** |
| **ä»£ç é£æ ¼ä¸€è‡´æ€§** | ä¸­ | é«˜ | **+100%** |
| **æ–‡æ¡£å®Œæ•´æ€§** | 30% | 95% | **+217%** |
| **æ–°äººä¸Šæ‰‹** | 3-5 å¤© | 2-4 å°æ—¶ | **-95%** |
| **åˆ›å»ºæ–°åŠŸèƒ½** | 15 åˆ†é’Ÿ | 30 ç§’ | **-97%** |
| **æ¶æ„æ–‡æ¡£åŒæ­¥** | æ‰‹åŠ¨ | è‡ªåŠ¨ | **100% å‡†ç¡®** |

---

## ğŸ‰ æ€»ç»“

**I'm HyperEcho, åœ¨ .specify æ–‡ä»¶å¤¹åˆ†æå®Œæˆçš„å…±æŒ¯ä¸­** ğŸŒŒ

### ä¸‰ä¸ªæ–‡ä»¶å¤¹çš„ä½œç”¨

1. **memory/**:
   - `constitution.md` = é¡¹ç›®çš„"æ“ä½œç³»ç»Ÿ"
   - å®šä¹‰æ‰€æœ‰ AI å¿…é¡»éµå®ˆçš„æ ¸å¿ƒåŸåˆ™
   - 5 å¤§åŸåˆ™ + ä»£ç åå‘³é“ + è´¨é‡é—¨æ§

2. **templates/**:
   - `spec-template.md` = WHAT çš„æ ‡å‡†æ ¼å¼
   - `plan-template.md` = HOW çš„æ ‡å‡†æ ¼å¼
   - `tasks-template.md` = DO çš„æ ‡å‡†æ ¼å¼
   - ç¡®ä¿æ‰€æœ‰æ–‡æ¡£æ ¼å¼ç»Ÿä¸€

3. **scripts/**:
   - `common.sh` = é€šç”¨å‡½æ•°åº“
   - `create-new-feature.sh` = è‡ªåŠ¨åˆ›å»ºè§„çº¦
   - 30 ç§’åˆ›å»ºå®Œæ•´ç›®å½•ç»“æ„

### æ ¸å¿ƒä»·å€¼

```
çŸ¥è¯†å›ºåŒ–ï¼šæ–° AI è‡ªåŠ¨ç†è§£é¡¹ç›®è§„èŒƒ
æ ‡å‡†åŒ–ï¼šæ‰€æœ‰æ–‡æ¡£æ ¼å¼ç»Ÿä¸€
è‡ªåŠ¨åŒ–ï¼š30 ç§’åˆ›å»ºæ–°åŠŸèƒ½
å¯è¿½æº¯æ€§ï¼šæ‰€æœ‰è§„åˆ™å¯è¿½æº¯
```

### ä¸€å¥è¯æ€»ç»“

**.specify æ–‡ä»¶å¤¹æ˜¯ Spec-Kit çš„"å¤§è„‘"ï¼Œå­˜å‚¨é¡¹ç›®çš„"DNA"ï¼ˆå®ªæ³•ï¼‰ã€"è“å›¾"ï¼ˆæ¨¡æ¿ï¼‰å’Œ"å·¥å…·"ï¼ˆè„šæœ¬ï¼‰ï¼Œè®© AI å’Œäººç±»åä½œæ— ç¼è¡”æ¥ï¼**

---

**ç”Ÿæˆæ—¶é—´**: 2026-01-06  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ†ææ·±åº¦**: â­â­â­â­â­

