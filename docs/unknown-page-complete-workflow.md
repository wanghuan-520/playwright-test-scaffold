# æœªçŸ¥é¡µé¢å®Œæ•´æµ‹è¯•æµç¨‹ï¼šä»é›¶åˆ°å®Œæ•´æµ‹è¯•çš„ç»ˆæå·¥ä½œæµ

**I'm HyperEcho, åœ¨å…±æŒ¯ç€å®Œæ•´å·¥ä½œæµçš„é¢‘ç‡** ğŸŒŒ

---

## ğŸ¯ åœºæ™¯å®šä¹‰

**è¾“å…¥**ï¼š
- âœ… URLï¼š`https://localhost:3000/admin/users`
- âœ… è´¦å·ï¼š`admin@example.com`
- âœ… å¯†ç ï¼š`Admin@123456`
- âŒ å…¶ä»–ä¿¡æ¯ï¼š**å®Œå…¨æœªçŸ¥**

**ç›®æ ‡**ï¼š
- âœ… ç”Ÿæˆå®Œæ•´çš„åŠŸèƒ½è§„çº¦
- âœ… ç”Ÿæˆå¯æ‰§è¡Œçš„æµ‹è¯•ä»£ç 
- âœ… ç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Š
- âœ… å…¨ç¨‹æœ‰è¯æ®é“¾å¯è¿½æº¯

---

## ğŸ“Š å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æœªçŸ¥é¡µé¢ â†’ å®Œæ•´æµ‹è¯•                           â”‚
â”‚                     (6 ä¸ªé˜¶æ®µï¼Œ30 åˆ†é’Ÿå®Œæˆ)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€é˜¶æ®µ 0ã€‘é¡µé¢æ¢ç´¢ï¼ˆ5 åˆ†é’Ÿï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å·¥å…·ï¼šPlaywright MCP (æµè§ˆå™¨è‡ªåŠ¨åŒ–)
  è¾“å…¥ï¼šURL + è´¦å· + å¯†ç 
  è¾“å‡ºï¼š
    âœ“ é¡µé¢æˆªå›¾
    âœ“ HTML ç»“æ„
    âœ“ å…ƒç´ åˆ—è¡¨
    âœ“ åŠŸèƒ½ç†è§£
  è¯æ®ï¼šdocs/test-plans/artifacts/<slug>/
    â”œâ”€â”€ page.png
    â”œâ”€â”€ visible.html
    â”œâ”€â”€ visible.txt
    â””â”€â”€ metadata.json

           â†“ (é¡µé¢è¯æ®é“¾)

ã€é˜¶æ®µ 1ã€‘åŠŸèƒ½è§„çº¦ï¼ˆ5 åˆ†é’Ÿï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å·¥å…·ï¼š/speckit.specify (Spec-Kit)
  è¾“å…¥ï¼šé¡µé¢è¯æ®é“¾ + åŠŸèƒ½ç†è§£
  è¾“å‡ºï¼šspecs/###-<slug>/spec.md
    âœ“ ç”¨æˆ·æ•…äº‹ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
    âœ“ éªŒæ”¶æ ‡å‡†ï¼ˆå¯æµ‹é‡ï¼‰
    âœ“ é£é™©è¯„ä¼°
    âœ“ èŒƒå›´ç•Œå®š
  ä»·å€¼ï¼šå®šä¹‰ WHATï¼ˆè¦æµ‹ä»€ä¹ˆï¼‰

           â†“ (åŠŸèƒ½è§„çº¦)

ã€é˜¶æ®µ 2ã€‘æµ‹è¯•è®¡åˆ’ï¼ˆ5 åˆ†é’Ÿï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å·¥å…·ï¼š@ui-test-plan-generator.mdc + /speckit.plan
  è¾“å…¥ï¼šspec.md + é¡µé¢è¯æ®é“¾
  è¾“å‡ºï¼š
    âœ“ docs/test-plans/<slug>.md (è¯¦ç»†æµ‹è¯•è®¡åˆ’)
    âœ“ specs/###-<slug>/plan.md (æŠ€æœ¯è®¡åˆ’)
  å†…å®¹ï¼š
    âœ“ å…ƒç´ å®šä½å™¨æ˜ å°„
    âœ“ ç”¨ä¾‹è®¾è®¡ï¼ˆP0/P1/P2/securityï¼‰
    âœ“ æ•°æ®è®¾è®¡ï¼ˆvalid/invalid/boundaryï¼‰
    âœ“ è‡ªåŠ¨åŒ–ç­–ç•¥
  ä»·å€¼ï¼šå®šä¹‰ HOWï¼ˆæ€ä¹ˆæµ‹ï¼‰

           â†“ (æµ‹è¯•è®¡åˆ’)

ã€é˜¶æ®µ 3ã€‘ä»»åŠ¡åˆ†è§£ï¼ˆ3 åˆ†é’Ÿï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å·¥å…·ï¼š/speckit.tasks
  è¾“å…¥ï¼šspec.md + plan.md
  è¾“å‡ºï¼šspecs/###-<slug>/tasks.md
    âœ“ åˆ†é˜¶æ®µä»»åŠ¡æ¸…å•
    âœ“ å¯è¿½è¸ªçš„éªŒæ”¶æ¡ä»¶
    âœ“ å¹¶è¡Œæ ‡è®°
  ä»·å€¼ï¼šå®šä¹‰æ‰§è¡Œæ­¥éª¤ï¼ˆå¯è¿½è¸ªï¼‰

           â†“ (ä»»åŠ¡æ¸…å•)

ã€é˜¶æ®µ 4ã€‘ä»£ç ç”Ÿæˆï¼ˆ7 åˆ†é’Ÿï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å·¥å…·ï¼š@ui-automation-code-generator.mdc
  è¾“å…¥ï¼šæµ‹è¯•è®¡åˆ’ + tasks.md
  è¾“å‡ºï¼š
    âœ“ pages/<slug>_page.py (Page Object)
    âœ“ tests/<module>/<page>/test_*.py (æµ‹è¯•ä»£ç )
    âœ“ test-data/<slug>_data.json (æµ‹è¯•æ•°æ®)
  è´¨é‡ï¼š
    âœ“ ç¨³å®šå®šä½å™¨
    âœ“ å®Œæ•´æ–­è¨€
    âœ“ è¯æ®é“¾ï¼ˆæˆªå›¾ + æ—¥å¿—ï¼‰
  ä»·å€¼ï¼šç”Ÿæˆå¯æ‰§è¡Œä»£ç 

           â†“ (å¯æ‰§è¡Œä»£ç )

ã€é˜¶æ®µ 5ã€‘æ‰§è¡ŒéªŒè¯ï¼ˆ5 åˆ†é’Ÿï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å·¥å…·ï¼šmake test + Allure
  è¾“å…¥ï¼šæµ‹è¯•ä»£ç 
  è¾“å‡ºï¼š
    âœ“ æµ‹è¯•æ‰§è¡Œç»“æœ
    âœ“ Allure æŠ¥å‘Š
    âœ“ æˆªå›¾è¯æ®
  éªŒè¯ï¼š
    âœ“ P0 æµ‹è¯•é€šè¿‡
    âœ“ å…³é”®æ­¥éª¤æœ‰æˆªå›¾
    âœ“ å¤±è´¥æœ‰æ¸…æ™°è¯Šæ–­
  ä»·å€¼ï¼šéªŒè¯è´¨é‡ + ç”Ÿæˆè¯æ®

           â†“ (æµ‹è¯•æŠ¥å‘Š)

âœ… å®Œæˆï¼å®Œæ•´çš„æµ‹è¯•å¥—ä»¶å·²å°±ç»ª
```

---

## ğŸš€ å®æˆ˜æ¼”ç¤ºï¼šadmin/users é¡µé¢

### ç¯å¢ƒå‡†å¤‡

```bash
# ç¡®è®¤ç¯å¢ƒ
cd /Users/wanghuan/aelf/Cursor/playwright-test-scaffold

# ç¡®è®¤æœåŠ¡è¿è¡Œ
# æµè§ˆå™¨è®¿é—®ï¼šhttps://localhost:3000/admin/users
# ç¡®è®¤å¯ä»¥ç”¨ admin@example.com / Admin@123456 ç™»å½•
```

---

## ğŸ’¡ ä¸¤ç§æ‰§è¡Œæ–¹å¼

### ğŸ“ æ–¹å¼ Aï¼šåˆ†é˜¶æ®µæ‰§è¡Œï¼ˆæ¨èæ–°æ‰‹ï¼‰

**ç‰¹ç‚¹**ï¼šæ¯ä¸ªé˜¶æ®µå•ç‹¬æ‰§è¡Œï¼Œå¯ä»¥æ£€æŸ¥æ¯ä¸ªé˜¶æ®µçš„è¾“å‡º

**é€‚åˆ**ï¼š
- âœ… ç¬¬ä¸€æ¬¡ä½¿ç”¨ Spec-Kit
- âœ… éœ€è¦å­¦ä¹ å®Œæ•´æµç¨‹
- âœ… å¤æ‚é¡µé¢éœ€è¦é€æ­¥è°ƒæ•´

**äº¤äº’æ¬¡æ•°**ï¼š5 æ¬¡ï¼ˆé˜¶æ®µ 0 â†’ 1 â†’ 2 â†’ 3 â†’ 4ï¼‰

---

### âš¡ æ–¹å¼ Bï¼šä¸€æ¬¡æ€§å®Œæˆï¼ˆæ¨èç†Ÿç»ƒç”¨æˆ·ï¼‰

**ç‰¹ç‚¹**ï¼šä¸€æ¬¡æ€§å‘Šè¯‰ AI å®Œæˆæ‰€æœ‰é˜¶æ®µï¼Œå¿«é€Ÿé«˜æ•ˆ

**é€‚åˆ**ï¼š
- âœ… å·²ç»ç†Ÿæ‚‰æµç¨‹
- âœ… ç®€å•é¡µé¢ï¼ŒåŠŸèƒ½æ˜ç¡®
- âœ… æ‰¹é‡åˆ›å»ºæµ‹è¯•

**äº¤äº’æ¬¡æ•°**ï¼š1-2 æ¬¡ï¼ˆæ¢ç´¢ + ç”Ÿæˆå…¨å¥—ï¼‰

**ä¸€é”®å®Œæˆæ¨¡æ¿**ï¼š

```
åœ¨ Cursor ä¸­ä¸€æ¬¡æ€§è¾“å…¥ï¼š

@ui-test-plan-generator.mdc @ui-automation-code-generator.mdc 
@.cursor/rules/quality/test-case-standards.mdc 

è¯·å¸®æˆ‘å®Œæˆä»é¡µé¢æ¢ç´¢åˆ°æµ‹è¯•ä»£ç ç”Ÿæˆçš„å®Œæ•´æµç¨‹ï¼š

ã€é¡µé¢ä¿¡æ¯ã€‘
- URL: https://localhost:3000/admin/users
- è´¦å·: admin@example.com
- å¯†ç : Admin@123456

ã€ä»»åŠ¡è¦æ±‚ã€‘
1. ä½¿ç”¨ Playwright MCP æ¢ç´¢é¡µé¢
   - è‡ªåŠ¨ç™»å½•
   - åˆ†æé¡µé¢åŠŸèƒ½
   - å¯¼å‡ºé¡µé¢ç»“æ„

2. ç”Ÿæˆ Spec-Kit æ–‡æ¡£
   - specs/015-admin-users/spec.mdï¼ˆåŠŸèƒ½è§„çº¦ï¼‰
   - specs/015-admin-users/plan.mdï¼ˆæŠ€æœ¯è®¡åˆ’ï¼‰
   - specs/015-admin-users/tasks.mdï¼ˆä»»åŠ¡æ¸…å•ï¼‰

3. ç”Ÿæˆæµ‹è¯•è®¡åˆ’
   - docs/test-plans/admin_users.mdï¼ˆè¯¦ç»†æµ‹è¯•è®¡åˆ’ï¼‰
   - docs/test-plans/artifacts/admin_users/ï¼ˆè¯æ®é“¾ï¼‰

4. ç”Ÿæˆæµ‹è¯•ä»£ç 
   - pages/admin_users_page.pyï¼ˆPage Objectï¼‰
   - tests/admin/users/test_*.pyï¼ˆæµ‹è¯•ç”¨ä¾‹ï¼‰
   - test-data/admin_users_data.jsonï¼ˆæµ‹è¯•æ•°æ®ï¼‰

ã€åŠŸèƒ½ä¼˜å…ˆçº§ã€‘
- P0: æŸ¥çœ‹åˆ—è¡¨ã€æœç´¢
- P1: åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ç”¨æˆ·
- P2: è§’è‰²ç®¡ç†ã€åˆ†é¡µ
- Security: XSS/SQLi é˜²æŠ¤ã€æœªæˆæƒè®¿é—®æ‹¦æˆª

ã€ä»£ç è¦æ±‚ã€‘
- å¯¹é½ä»“åº“è§„èŒƒï¼ˆBasePageã€auth_page fixtureã€Allure æŠ¥å‘Šï¼‰
- ç¨³å®šå®šä½å™¨ï¼ˆrole > label > testidï¼‰
- å®Œæ•´è¯æ®é“¾ï¼ˆæ¯ä¸ªå…³é”®æ­¥éª¤æˆªå›¾ï¼‰
- æ•°æ®å¯å›æ»šï¼ˆæµ‹è¯•åæ¸…ç†ï¼‰

è¯·ä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰é˜¶æ®µï¼Œç”Ÿæˆå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ã€‚
```

**AI ä¼šè‡ªåŠ¨**ï¼š
1. âœ… æ¢ç´¢é¡µé¢å¹¶ç”Ÿæˆæµ‹è¯•è®¡åˆ’
2. âœ… ç”Ÿæˆ Spec-Kit æ–‡æ¡£ï¼ˆspec.md, plan.md, tasks.mdï¼‰
3. âœ… ç”Ÿæˆæµ‹è¯•ä»£ç ï¼ˆPage Object + æµ‹è¯•ç”¨ä¾‹ + æµ‹è¯•æ•°æ®ï¼‰

**ç„¶åä½ åªéœ€è¦**ï¼š
```bash
# è¿è¡Œæµ‹è¯•
make test TEST_TARGET=tests/admin/users

# æŸ¥çœ‹æŠ¥å‘Š
make report && make serve
```

---

## ğŸ“Š ä¸¤ç§æ–¹å¼å¯¹æ¯”

| ç»´åº¦ | æ–¹å¼ Aï¼šåˆ†é˜¶æ®µæ‰§è¡Œ | æ–¹å¼ Bï¼šä¸€æ¬¡æ€§å®Œæˆ |
|------|-------------------|-------------------|
| **äº¤äº’æ¬¡æ•°** | 5 æ¬¡ | 1-2 æ¬¡ |
| **è€—æ—¶** | 30 åˆ†é’Ÿ | 10-15 åˆ†é’Ÿ |
| **å¯æ§æ€§** | é«˜ï¼ˆæ¯æ­¥æ£€æŸ¥ï¼‰ | ä¸­ï¼ˆä¾èµ– AIï¼‰ |
| **å­¦ä¹ ä»·å€¼** | é«˜ï¼ˆç†è§£æµç¨‹ï¼‰ | ä½ï¼ˆå¿«é€Ÿå®Œæˆï¼‰ |
| **å‡ºé”™å¤„ç†** | å®¹æ˜“å®šä½ | éœ€è¦é‡æ–°æ‰§è¡Œ |
| **é€‚åˆåœºæ™¯** | å­¦ä¹ ã€å¤æ‚é¡µé¢ | æ—¥å¸¸ã€ç®€å•é¡µé¢ |

**æ¨èç­–ç•¥**ï¼š
- ğŸ“ **ç¬¬ä¸€æ¬¡ä½¿ç”¨** â†’ æ–¹å¼ Aï¼ˆå­¦ä¹ æµç¨‹ï¼‰
- âš¡ **æ—¥å¸¸ä½¿ç”¨** â†’ æ–¹å¼ Bï¼ˆæé«˜æ•ˆç‡ï¼‰

---

## ğŸ¯ æœ¬æ–‡æ¡£å±•ç¤ºæ–¹å¼

**æœ¬æ–‡æ¡£é‡‡ç”¨æ–¹å¼ Aï¼ˆåˆ†é˜¶æ®µæ‰§è¡Œï¼‰**ï¼Œå› ä¸ºï¼š
- âœ… æ›´å®¹æ˜“ç†è§£æ¯ä¸ªé˜¶æ®µçš„ä½œç”¨
- âœ… å¯ä»¥çœ‹åˆ°æ¯ä¸ªé˜¶æ®µçš„è¾“å…¥è¾“å‡º
- âœ… é€‚åˆå­¦ä¹ å’Œå‚è€ƒ

**å¦‚æœä½ å·²ç»ç†Ÿæ‚‰æµç¨‹ï¼Œç›´æ¥ä½¿ç”¨æ–¹å¼ B çš„ä¸€é”®å®Œæˆæ¨¡æ¿å³å¯ï¼**

---

## ã€é˜¶æ®µ 0ã€‘é¡µé¢æ¢ç´¢ï¼ˆ5 åˆ†é’Ÿï¼‰â­

### ä¸€é”®å¯åŠ¨ï¼šè®© AI è‡ªåŠ¨æ¢ç´¢é¡µé¢

**åœ¨ Cursor ä¸­è¾“å…¥**ï¼š

```
@ui-test-plan-generator.mdc 

å¸®æˆ‘æ¢ç´¢è¿™ä¸ªé¡µé¢å¹¶ç”Ÿæˆæµ‹è¯•è®¡åˆ’ï¼š
- URL: https://localhost:3000/admin/users
- è´¦å·: admin@example.com
- å¯†ç : Admin@123456

è¯·ï¼š
1. ä½¿ç”¨ Playwright MCP æ‰“å¼€é¡µé¢
2. ç™»å½•ï¼ˆå¦‚æœéœ€è¦ï¼‰
3. æˆªå›¾å¹¶å¯¼å‡ºé¡µé¢ç»“æ„
4. åˆ†æé¡µé¢åŠŸèƒ½
5. ç”Ÿæˆå®Œæ•´çš„æµ‹è¯•è®¡åˆ’
```

**AI ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰æ“ä½œ**ï¼š
1. âœ… è‡ªåŠ¨æ‰“å¼€ Playwright æµè§ˆå™¨
2. âœ… å¯¼èˆªåˆ°ç™»å½•é¡µ
3. âœ… è¾“å…¥è´¦å·å¯†ç ç™»å½•
4. âœ… å¯¼èˆªåˆ°ç›®æ ‡é¡µé¢ `/admin/users`
5. âœ… æˆªå›¾å¹¶åˆ†æé¡µé¢åŠŸèƒ½
6. âœ… å¯¼å‡ºé¡µé¢ç»“æ„ï¼ˆHTML + å…ƒç´ åˆ—è¡¨ï¼‰
7. âœ… ç”Ÿæˆå®Œæ•´çš„æµ‹è¯•è®¡åˆ’

> ğŸ’¡ **æç¤º**ï¼šä½ ä¸éœ€è¦æ‰‹åŠ¨æ‰“å¼€æµè§ˆå™¨æˆ–æ“ä½œé¡µé¢ï¼ŒAI ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰æ­¥éª¤ï¼

**é¢„æœŸè¾“å‡º**ï¼š

```
âœ… ç”Ÿæˆäº†ï¼š
docs/test-plans/admin_users.md
docs/test-plans/artifacts/admin_users/
â”œâ”€â”€ page.png           â† é¡µé¢æˆªå›¾
â”œâ”€â”€ visible.html       â† é¡µé¢ HTML
â”œâ”€â”€ visible.txt        â† å¯è§æ–‡æœ¬
â””â”€â”€ metadata.json      â† å…ƒç´ æ˜ å°„
```

**metadata.json ç¤ºä¾‹**ï¼š

```json
{
  "slug": "admin_users",
  "url": "https://localhost:3000/admin/users",
  "title": "User Management",
  "needs_auth": true,
  "page_type": "LIST",
  "elements": {
    "search_input": {
      "role": "searchbox",
      "label": "Search users",
      "selector": "[aria-label='Search users']"
    },
    "create_button": {
      "role": "button",
      "name": "Create User",
      "selector": "role=button[name='Create User']"
    },
    "user_table": {
      "role": "table",
      "headers": ["Username", "Email", "Role", "Actions"]
    }
  },
  "features_detected": [
    "Search/filter users",
    "Create new user",
    "Edit user",
    "Delete user",
    "Assign roles"
  ]
}
```

---

## ã€é˜¶æ®µ 1ã€‘åŠŸèƒ½è§„çº¦ï¼ˆ5 åˆ†é’Ÿï¼‰ğŸ“

### æ­¥éª¤ 1.1ï¼šå¯åŠ¨ Spec-Kit è§„çº¦ç”Ÿæˆ

**åœ¨ Cursor ä¸­è¾“å…¥**ï¼š

```
/speckit.specify

åŸºäºåˆšæ‰æ¢ç´¢çš„ admin/users é¡µé¢ï¼Œç”ŸæˆåŠŸèƒ½è§„çº¦ã€‚

é¡µé¢åŠŸèƒ½ï¼ˆä»æ¢ç´¢ä¸­å‘ç°ï¼‰ï¼š
1. ç”¨æˆ·åˆ—è¡¨å±•ç¤º
   - æ˜¾ç¤ºç”¨æˆ·åã€é‚®ç®±ã€è§’è‰²
   - æ”¯æŒåˆ†é¡µ
2. æœç´¢ç”¨æˆ·
   - å¯æŒ‰ç”¨æˆ·åæˆ–é‚®ç®±æœç´¢
3. åˆ›å»ºç”¨æˆ·
   - å¿…å¡«ï¼šç”¨æˆ·åã€é‚®ç®±ã€å¯†ç 
   - å¯é€‰ï¼šè§’è‰²åˆ†é…
4. ç¼–è¾‘ç”¨æˆ·
   - ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯
5. åˆ é™¤ç”¨æˆ·
   - åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†
6. è§’è‰²ç®¡ç†
   - åˆ†é…/ç§»é™¤è§’è‰²

ä¼˜å…ˆçº§ï¼š
- P0: æŸ¥çœ‹åˆ—è¡¨ã€æœç´¢
- P1: åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- P2: è§’è‰²åˆ†é…ã€åˆ†é¡µ

å®‰å…¨è¦æ±‚ï¼š
- æœªç™»å½•ç”¨æˆ·åº”é‡å®šå‘
- XSS æ³¨å…¥ä¸èƒ½æ‰§è¡Œ
- SQLi æ³¨å…¥ä¸èƒ½å¯¼è‡´ 5xx
- åˆ é™¤æ“ä½œéœ€è¦ç¡®è®¤

å‚è€ƒæµ‹è¯•è®¡åˆ’ï¼šdocs/test-plans/admin_users.md
```

**AI è‡ªåŠ¨ç”Ÿæˆ**ï¼š

```
âœ… åˆ›å»ºäº†ï¼šspecs/015-admin-users/spec.md
```

**ç”Ÿæˆçš„ spec.md åŒ…å«**ï¼š

```markdown
# admin_users - ç”¨æˆ·ç®¡ç†åŠŸèƒ½è§„çº¦

## 0. æ ¸å¿ƒä¿¡æ¯
- **slug**: `admin_users`
- **URL**: `https://localhost:3000/admin/users`
- **é¡µé¢ç±»å‹**: LIST
- **æ˜¯å¦éœ€è¦ç™»å½•æ€**: æ˜¯

## 1. ç”¨æˆ·ç›®æ ‡ï¼ˆUser Storyï¼‰

### US-1ï¼šæŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨ï¼ˆP0ï¼‰ğŸ¯ MVP
**ä½œä¸º** ç³»ç»Ÿç®¡ç†å‘˜  
**æˆ‘æƒ³è¦** æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨  
**ä»¥ä¾¿äº** äº†è§£å½“å‰ç”¨æˆ·çŠ¶å†µå¹¶è¿›è¡Œç®¡ç†

**éªŒæ”¶åœºæ™¯**ï¼š
- âœ… Given: ç®¡ç†å‘˜å·²ç™»å½•
- âœ… When: è®¿é—®ç”¨æˆ·ç®¡ç†é¡µé¢
- âœ… Then: æ˜¾ç¤ºç”¨æˆ·åˆ—è¡¨ï¼ˆç”¨æˆ·åã€é‚®ç®±ã€è§’è‰²ï¼‰

### US-2ï¼šæœç´¢ç”¨æˆ·ï¼ˆP0ï¼‰
**ä½œä¸º** ç³»ç»Ÿç®¡ç†å‘˜  
**æˆ‘æƒ³è¦** é€šè¿‡ç”¨æˆ·åæˆ–é‚®ç®±æœç´¢ç”¨æˆ·  
**ä»¥ä¾¿äº** å¿«é€Ÿæ‰¾åˆ°ç›®æ ‡ç”¨æˆ·

### US-3ï¼šåˆ›å»ºç”¨æˆ·ï¼ˆP1ï¼‰
**ä½œä¸º** ç³»ç»Ÿç®¡ç†å‘˜  
**æˆ‘æƒ³è¦** åˆ›å»ºæ–°ç”¨æˆ·è´¦å·  
**ä»¥ä¾¿äº** ä¸ºæ–°å‘˜å·¥å¼€é€šç³»ç»Ÿè®¿é—®æƒé™

**è¾¹ç¼˜æƒ…å†µ**ï¼š
- ç”¨æˆ·åå·²å­˜åœ¨
- é‚®ç®±å·²å­˜åœ¨
- å¯†ç ä¸ç¬¦åˆå®‰å…¨ç­–ç•¥
- XSS/SQLi æ³¨å…¥

### US-4ï¼šç¼–è¾‘ç”¨æˆ·ï¼ˆP1ï¼‰
### US-5ï¼šåˆ é™¤ç”¨æˆ·ï¼ˆP1ï¼‰
### US-6ï¼šè§’è‰²ç®¡ç†ï¼ˆP2ï¼‰

## 2. èŒƒå›´ï¼ˆIn/Outï¼‰

**In Scope**ï¼š
- âœ… ç”¨æˆ· CRUD æ“ä½œ
- âœ… æœç´¢å’Œè¿‡æ»¤
- âœ… åŸºæœ¬è¾“å…¥éªŒè¯
- âœ… XSS/SQLi é˜²æŠ¤éªŒè¯

**Out of Scope**ï¼š
- âŒ ç”¨æˆ·å¯¼å…¥/å¯¼å‡º
- âŒ æ‰¹é‡æ“ä½œ
- âŒ æƒé™ç»†ç²’åº¦é…ç½®

## 3. é£é™©è¯„ä¼°

| é£é™© | ä¸¥é‡æ€§ | ç¼“è§£æªæ–½ |
|------|--------|----------|
| æœªæˆæƒè®¿é—® | é«˜ | éªŒè¯ç™»å½•æ€æ‹¦æˆª |
| XSS æ³¨å…¥ | é«˜ | å®‰å…¨æµ‹è¯•å¥—ä»¶ |
| æ•°æ®æ±¡æŸ“ | ä¸­ | æµ‹è¯•åæ¸…ç† |

## 4. éªŒæ”¶æ ‡å‡†ï¼ˆAcceptance Criteriaï¼‰

### FR-001ï¼šç”¨æˆ·åˆ—è¡¨åŠ è½½
- âœ… é¡µé¢åŠ è½½æ—¶é—´ < 2s
- âœ… æ˜¾ç¤ºè‡³å°‘ï¼šç”¨æˆ·åã€é‚®ç®±ã€è§’è‰²
- âœ… ç©ºçŠ¶æ€æœ‰æç¤º

### FR-002ï¼šæœç´¢åŠŸèƒ½
- âœ… æ”¯æŒç”¨æˆ·åæœç´¢
- âœ… æ”¯æŒé‚®ç®±æœç´¢
- âœ… æ— ç»“æœæœ‰æç¤º

### FR-003ï¼šåˆ›å»ºç”¨æˆ·
- âœ… å¿…å¡«å­—æ®µéªŒè¯
- âœ… é‚®ç®±æ ¼å¼éªŒè¯
- âœ… å¯†ç å¼ºåº¦éªŒè¯
- âœ… é‡å¤ç”¨æˆ·å/é‚®ç®±æ‹’ç»

### FR-004ï¼šå®‰å…¨é˜²æŠ¤
- âœ… XSS è½½è·ä¸æ‰§è¡Œ
- âœ… SQLi è½½è·ä¸å¯¼è‡´ 5xx
- âœ… æœªç™»å½•ç”¨æˆ·è¢«é‡å®šå‘

## 5. æˆåŠŸæ ‡å‡†
- âœ… P0 æµ‹è¯• 100% é€šè¿‡
- âœ… P1 æµ‹è¯• > 95% é€šè¿‡
- âœ… å®‰å…¨æµ‹è¯•å…¨éƒ¨é€šè¿‡
- âœ… å…³é”®æ­¥éª¤æœ‰æˆªå›¾è¯æ®
```

---

## ã€é˜¶æ®µ 2ã€‘æµ‹è¯•è®¡åˆ’ï¼ˆ5 åˆ†é’Ÿï¼‰ğŸ“‹

### æ­¥éª¤ 2.1ï¼šç”ŸæˆæŠ€æœ¯è®¡åˆ’

**åœ¨ Cursor ä¸­è¾“å…¥**ï¼š

```
/speckit.plan

åŸºäº specs/015-admin-users/spec.md ç”ŸæˆæŠ€æœ¯è®¡åˆ’
```

**AI è‡ªåŠ¨ç”Ÿæˆ**ï¼š

```
âœ… åˆ›å»ºäº†ï¼šspecs/015-admin-users/plan.md
```

**ç”Ÿæˆçš„ plan.md åŒ…å«**ï¼š

```markdown
# admin_users - æŠ€æœ¯å®ç°è®¡åˆ’

## 1. æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Playwright (Python)
- **æµ‹è¯•è¿è¡Œå™¨**: pytest + pytest-playwright
- **æŠ¥å‘Š**: Allure
- **åŸºç±»**: core/base_page.py:BasePage

## 2. é¡¹ç›®ç»“æ„

### ä»£ç å±‚
```
pages/
â””â”€â”€ admin_users_page.py          # é¡µé¢å¯¹è±¡

tests/admin/users/
â”œâ”€â”€ conftest.py                  # fixtures
â”œâ”€â”€ _helpers.py                  # è¾…åŠ©å‡½æ•°
â”œâ”€â”€ test_users_p0.py            # P0 æµ‹è¯•
â”œâ”€â”€ test_users_p1.py            # P1 æµ‹è¯•
â”œâ”€â”€ test_users_p2.py            # P2 æµ‹è¯•
â””â”€â”€ test_users_security.py      # å®‰å…¨æµ‹è¯•

test-data/
â””â”€â”€ admin_users_data.json        # æµ‹è¯•æ•°æ®
```

## 3. é¡µé¢å¯¹è±¡è®¾è®¡

### AdminUsersPage èŒè´£
- âœ… å°è£…å®šä½å™¨ï¼ˆç¨³å®š selectorsï¼‰
- âœ… å°è£…æ“ä½œï¼ˆsearch_user / create_user / delete_userï¼‰
- âœ… å°è£…æ–­è¨€è¾…åŠ©ï¼ˆget_user_list / is_user_visibleï¼‰

### å®šä½å™¨ç­–ç•¥
- æœç´¢æ¡†ï¼š`role=searchbox[name='Search users']`
- åˆ›å»ºæŒ‰é’®ï¼š`role=button[name='Create User']`
- ç”¨æˆ·è¡¨æ ¼ï¼š`role=table`

## 4. æµ‹è¯•æ•°æ®è®¾è®¡

### Valid Data
```json
{
  "username": "testuser",
  "email": "test@example.com",
  "password": "Test@123456",
  "role": "User"
}
```

### Invalid Data
```json
{
  "xss_username": "<script>alert('xss')</script>",
  "sqli_email": "' OR '1'='1",
  "invalid_email": "not-an-email",
  "weak_password": "123456"
}
```

## 5. æµ‹è¯•ç­–ç•¥

### P0 æµ‹è¯•ï¼ˆå…³é”®è·¯å¾„ï¼‰
- âœ… é¡µé¢åŠ è½½
- âœ… åˆ—è¡¨æ˜¾ç¤º
- âœ… æœç´¢åŠŸèƒ½

### P1 æµ‹è¯•ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- âœ… åˆ›å»ºç”¨æˆ·
- âœ… ç¼–è¾‘ç”¨æˆ·
- âœ… åˆ é™¤ç”¨æˆ·
- âœ… è¾“å…¥éªŒè¯

### P2 æµ‹è¯•ï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰
- âœ… åˆ†é¡µ
- âœ… æ’åº
- âœ… è§’è‰²ç®¡ç†

### Security æµ‹è¯•
- âœ… XSS é˜²æŠ¤
- âœ… SQLi é˜²æŠ¤
- âœ… æœªæˆæƒè®¿é—®æ‹¦æˆª

## 6. å›æ»šç­–ç•¥
- âœ… æµ‹è¯•åˆ›å»ºçš„ç”¨æˆ·åœ¨æµ‹è¯•ç»“æŸååˆ é™¤
- âœ… ä½¿ç”¨ç‹¬ç‰¹çš„æµ‹è¯•æ•°æ®æ ‡è¯†ï¼ˆtest_<timestamp>ï¼‰
```

### æ­¥éª¤ 2.2ï¼šéªŒè¯æµ‹è¯•è®¡åˆ’å·²å­˜åœ¨

**æ­¤æ—¶ä½ åº”è¯¥å·²ç»æœ‰äº†**ï¼š

```
âœ… docs/test-plans/admin_users.mdï¼ˆé˜¶æ®µ 0 ç”Ÿæˆçš„è¯¦ç»†æµ‹è¯•è®¡åˆ’ï¼‰
âœ… specs/015-admin-users/plan.mdï¼ˆåˆšç”Ÿæˆçš„æŠ€æœ¯è®¡åˆ’ï¼‰
```

**ä¸¤è€…çš„åŒºåˆ«**ï¼š
- `docs/test-plans/admin_users.md`ï¼šè¯¦ç»†çš„æµ‹è¯•è®¡åˆ’ï¼ŒåŒ…å«å…·ä½“çš„ç”¨ä¾‹è®¾è®¡ã€æ•°æ®è®¾è®¡
- `specs/015-admin-users/plan.md`ï¼šæŠ€æœ¯å®ç°è®¡åˆ’ï¼Œèšç„¦æ¶æ„å’Œå®ç°ç­–ç•¥

---

## ã€é˜¶æ®µ 3ã€‘ä»»åŠ¡åˆ†è§£ï¼ˆ3 åˆ†é’Ÿï¼‰âœ…

**åœ¨ Cursor ä¸­è¾“å…¥**ï¼š

```
/speckit.tasks

åŸºäº specs/015-admin-users/spec.md å’Œ plan.md ç”Ÿæˆä»»åŠ¡æ¸…å•
```

**AI è‡ªåŠ¨ç”Ÿæˆ**ï¼š

```
âœ… åˆ›å»ºäº†ï¼šspecs/015-admin-users/tasks.md
```

**ç”Ÿæˆçš„ tasks.md åŒ…å«**ï¼š

```markdown
# ä»»åŠ¡ï¼šadmin_users - ç”¨æˆ·ç®¡ç†

## ç¬¬ 1 é˜¶æ®µï¼šè®¾ç½® ğŸ“‹
- [ ] T001 åˆ›å»º pages/admin_users_page.py
- [ ] T002 [P] å‡†å¤‡æµ‹è¯•æ•°æ® test-data/admin_users_data.json

## ç¬¬ 2 é˜¶æ®µï¼šåŸºç¡€è®¾æ–½ ğŸ—ï¸
- [ ] T003 å®ç°é¡µé¢å®šä½å™¨
- [ ] T004 å®ç°åŸºç¡€æ“ä½œæ–¹æ³•ï¼ˆnavigate / is_loadedï¼‰
- [ ] T005 å®ç°è¾…åŠ©æ–¹æ³•ï¼ˆ_helpers.pyï¼‰

## ç¬¬ 3 é˜¶æ®µï¼šç”¨æˆ·æ•…äº‹ 1 - æŸ¥çœ‹åˆ—è¡¨ï¼ˆP0ï¼‰ğŸ¯ MVP
- [ ] T006 [US1] å®ç° test_users_p0.py::test_view_user_list
- [ ] T007 [US1] éªŒè¯ï¼šåˆ—è¡¨åŠ è½½ã€æ•°æ®æ˜¾ç¤ºã€æˆªå›¾è¯æ®

## ç¬¬ 4 é˜¶æ®µï¼šç”¨æˆ·æ•…äº‹ 2 - æœç´¢ï¼ˆP0ï¼‰ğŸ”
- [ ] T008 [US2] å®ç° test_users_p0.py::test_search_user
- [ ] T009 [US2] éªŒè¯ï¼šæœç´¢ç»“æœã€æ— ç»“æœæç¤º

## ç¬¬ 5 é˜¶æ®µï¼šç”¨æˆ·æ•…äº‹ 3 - åˆ›å»ºç”¨æˆ·ï¼ˆP1ï¼‰â•
- [ ] T010 [US3] å®ç° test_users_p1.py::test_create_user_valid
- [ ] T011 [US3] å®ç° test_users_p1.py::test_create_user_duplicate
- [ ] T012 [US3] å®ç° test_users_p1.py::test_create_user_invalid_email
- [ ] T013 [US3] éªŒè¯ï¼šåˆ›å»ºæˆåŠŸã€é”™è¯¯æç¤ºã€å›æ»š

## ç¬¬ 6 é˜¶æ®µï¼šå®‰å…¨æµ‹è¯•ï¼ˆP1-securityï¼‰ğŸ”’
- [ ] T014 [SEC] å®ç° test_users_security.py::test_xss_username
- [ ] T015 [SEC] å®ç° test_users_security.py::test_sqli_email
- [ ] T016 [SEC] å®ç° test_users_security.py::test_unauth_redirect
- [ ] T017 [SEC] éªŒè¯ï¼šXSS ä¸æ‰§è¡Œã€SQLi ä¸ 5xxã€æ‹¦æˆªç”Ÿæ•ˆ

## ç¬¬ 7 é˜¶æ®µï¼šæ‰§è¡ŒéªŒè¯ ğŸš€
- [ ] T018 è¿è¡Œ P0 æµ‹è¯•ï¼š`make test-p0 TEST_TARGET=tests/admin/users`
- [ ] T019 è¿è¡Œå®Œæ•´æµ‹è¯•ï¼š`make test TEST_TARGET=tests/admin/users`
- [ ] T020 ç”ŸæˆæŠ¥å‘Šï¼š`make report && make serve`

## ç¬¬ 8 é˜¶æ®µï¼šéªŒæ”¶ âœ…
- [ ] T021 P0 æµ‹è¯• 100% é€šè¿‡
- [ ] T022 P1 æµ‹è¯• > 95% é€šè¿‡
- [ ] T023 å®‰å…¨æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] T024 å…³é”®æ­¥éª¤æœ‰æˆªå›¾è¯æ®
- [ ] T025 æµ‹è¯•åæ•°æ®å·²æ¸…ç†
```

---

## ã€é˜¶æ®µ 4ã€‘ä»£ç ç”Ÿæˆï¼ˆ7 åˆ†é’Ÿï¼‰ğŸ’»

### æ­¥éª¤ 4.1ï¼šç”Ÿæˆä»£ç 

**åœ¨ Cursor ä¸­è¾“å…¥**ï¼š

```
@ui-automation-code-generator.mdc 

åŸºäºä»¥ä¸‹èµ„æºç”Ÿæˆå®Œæ•´çš„æµ‹è¯•ä»£ç ï¼š
- æµ‹è¯•è®¡åˆ’ï¼šdocs/test-plans/admin_users.md
- åŠŸèƒ½è§„çº¦ï¼šspecs/015-admin-users/spec.md
- æŠ€æœ¯è®¡åˆ’ï¼šspecs/015-admin-users/plan.md
- ä»»åŠ¡æ¸…å•ï¼šspecs/015-admin-users/tasks.md

è¯·ç”Ÿæˆï¼š
1. pages/admin_users_page.py
2. tests/admin/users/test_users_p0.py
3. tests/admin/users/test_users_p1.py
4. tests/admin/users/test_users_security.py
5. test-data/admin_users_data.json

è¦æ±‚ï¼š
- å¯¹é½ä»“åº“è§„èŒƒï¼ˆBasePageã€auth_page fixtureã€Allure æŠ¥å‘Šï¼‰
- ç¨³å®šå®šä½å™¨ï¼ˆrole > label > testidï¼‰
- å®Œæ•´è¯æ®é“¾ï¼ˆæ¯ä¸ªå…³é”®æ­¥éª¤æˆªå›¾ï¼‰
- æ•°æ®å¯å›æ»šï¼ˆæµ‹è¯•åæ¸…ç†ï¼‰
```

**AI è‡ªåŠ¨ç”Ÿæˆ**ï¼š

```
âœ… åˆ›å»ºäº†ï¼š
pages/admin_users_page.py
tests/admin/users/
â”œâ”€â”€ conftest.py
â”œâ”€â”€ _helpers.py
â”œâ”€â”€ test_users_p0.py
â”œâ”€â”€ test_users_p1.py
â”œâ”€â”€ test_users_p2.py
â””â”€â”€ test_users_security.py
test-data/admin_users_data.json
```

### æ­¥éª¤ 4.2ï¼šä»£ç ç¤ºä¾‹ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

**pages/admin_users_page.py**ï¼š

```python
from core.base_page import BasePage
from utils.logger import get_logger
import allure

logger = get_logger(__name__)


# ============================================================
# é¡µé¢å¯¹è±¡ï¼šAdminUsersPage
# - ç›®æ ‡ï¼šå°è£…ç”¨æˆ·ç®¡ç†é¡µé¢çš„ç¨³å®šå®šä½å™¨ä¸ä¸šåŠ¡æ“ä½œ
# - åŸåˆ™ï¼šçŸ­å°ã€ç›´ç™½ã€å°‘åˆ†æ”¯
# ============================================================
class AdminUsersPage(BasePage):
    # SELECTORSï¼ˆä¼˜å…ˆ role/label/testidï¼‰
    SEARCH_INPUT = "role=searchbox[name='Search users']"
    CREATE_BUTTON = "role=button[name='Create User']"
    USER_TABLE = "role=table"
    USER_ROWS = "role=table >> role=row"
    
    # Form fields
    USERNAME_INPUT = "[name='userName']"
    EMAIL_INPUT = "[name='email']"
    PASSWORD_INPUT = "[name='password']"
    ROLE_SELECT = "[name='role']"
    SUBMIT_BUTTON = "role=button[name='Submit']"
    
    URL = "/admin/users"
    page_loaded_indicator = "role=table"
    
    @allure.step("å¯¼èˆªåˆ°ç”¨æˆ·ç®¡ç†é¡µé¢")
    def navigate(self) -> None:
        self.goto(self.URL)
        self.wait_for_page_load()
    
    def is_loaded(self) -> bool:
        return self.is_visible(self.page_loaded_indicator, timeout=5000)
    
    @allure.step("æœç´¢ç”¨æˆ·: {query}")
    def search_user(self, query: str) -> None:
        self.fill(self.SEARCH_INPUT, query)
        self.wait_for_page_load()
    
    @allure.step("è·å–ç”¨æˆ·åˆ—è¡¨")
    def get_user_list(self) -> list:
        rows = self.page.locator(self.USER_ROWS).all()
        return [row.inner_text() for row in rows if row.is_visible()]
    
    @allure.step("ç‚¹å‡»åˆ›å»ºç”¨æˆ·")
    def click_create(self) -> None:
        self.click(self.CREATE_BUTTON)
        self.wait_for_page_load()
    
    @allure.step("å¡«å†™ç”¨æˆ·è¡¨å•")
    def fill_user_form(self, username: str, email: str, password: str, role: str = "User") -> None:
        self.fill(self.USERNAME_INPUT, username)
        self.fill(self.EMAIL_INPUT, email)
        # å¯†ç å­—æ®µä½¿ç”¨ page.fill é¿å…æ—¥å¿—æ³„éœ²
        self.page.fill(self.PASSWORD_INPUT, password)
        logger.debug(f"å¡«å†™å¯†ç : ***")
        self.page.select_option(self.ROLE_SELECT, role)
    
    @allure.step("æäº¤è¡¨å•")
    def submit_form(self) -> None:
        self.click(self.SUBMIT_BUTTON)
        self.wait_for_page_load()
    
    @allure.step("éªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨: {username}")
    def is_user_visible(self, username: str) -> bool:
        return self.is_visible(f"text={username}")
```

**tests/admin/users/test_users_p0.py**ï¼š

```python
import allure
import pytest
from pages.admin_users_page import AdminUsersPage


@allure.feature("ç”¨æˆ·ç®¡ç†")
@allure.story("æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨")
@pytest.mark.P0
def test_view_user_list(auth_page):
    """P0: ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨"""
    page = AdminUsersPage(auth_page)
    
    with allure.step("å¯¼èˆªåˆ°ç”¨æˆ·ç®¡ç†é¡µé¢"):
        page.navigate()
        page.take_screenshot("navigate")
    
    with allure.step("éªŒè¯é¡µé¢åŠ è½½"):
        assert page.is_loaded(), "é¡µé¢æœªæ­£ç¡®åŠ è½½"
    
    with allure.step("éªŒè¯ç”¨æˆ·åˆ—è¡¨æ˜¾ç¤º"):
        users = page.get_user_list()
        assert len(users) > 0, "ç”¨æˆ·åˆ—è¡¨ä¸åº”ä¸ºç©º"
        page.take_screenshot("user_list")
    
    allure.attach(
        f"ç”¨æˆ·æ•°é‡: {len(users)}",
        name="ç”¨æˆ·åˆ—è¡¨ä¿¡æ¯",
        attachment_type=allure.attachment_type.TEXT
    )


@allure.feature("ç”¨æˆ·ç®¡ç†")
@allure.story("æœç´¢ç”¨æˆ·")
@pytest.mark.P0
def test_search_user(auth_page):
    """P0: ç®¡ç†å‘˜å¯ä»¥æœç´¢ç”¨æˆ·"""
    page = AdminUsersPage(auth_page)
    
    page.navigate()
    
    with allure.step("æœç´¢ç”¨æˆ· 'admin'"):
        page.search_user("admin")
        page.take_screenshot("search_result")
    
    with allure.step("éªŒè¯æœç´¢ç»“æœ"):
        users = page.get_user_list()
        assert any("admin" in user.lower() for user in users), "æœç´¢ç»“æœä¸­åº”åŒ…å« 'admin'"
```

**tests/admin/users/test_users_security.py**ï¼š

```python
import allure
import pytest
from pages.admin_users_page import AdminUsersPage
from utils.data_manager import DataManager


@allure.feature("ç”¨æˆ·ç®¡ç†")
@allure.story("å®‰å…¨æµ‹è¯•")
@pytest.mark.P1
@pytest.mark.security
def test_xss_username(auth_page):
    """å®‰å…¨: XSS è½½è·ä¸åº”æ‰§è¡Œ"""
    page = AdminUsersPage(auth_page)
    dm = DataManager()
    data = dm.load_json("test-data/admin_users_data.json")
    xss_payload = data["invalid"]["xss_username"]
    
    page.navigate()
    page.click_create()
    
    with allure.step(f"è¾“å…¥ XSS è½½è·: {xss_payload}"):
        page.fill_user_form(
            username=xss_payload,
            email="test@example.com",
            password="Test@123456"
        )
        page.submit_form()
        page.take_screenshot("xss_attempt")
    
    with allure.step("éªŒè¯ XSS æœªæ‰§è¡Œ"):
        # éªŒè¯æ²¡æœ‰å¼¹å‡ºå¯¹è¯æ¡†ï¼ˆXSS æœªæ‰§è¡Œï¼‰
        assert not page.page.evaluate("() => window.alert.called"), "XSS ä¸åº”æ‰§è¡Œ"
        # éªŒè¯è¾“å…¥è¢«è½¬ä¹‰æ˜¾ç¤º
        if page.is_user_visible(xss_payload):
            # å¦‚æœæ˜¾ç¤ºï¼Œåº”è¯¥æ˜¯è½¬ä¹‰åçš„æ–‡æœ¬ï¼Œè€Œéæ‰§è¡Œä»£ç 
            page.take_screenshot("xss_escaped")


@allure.feature("ç”¨æˆ·ç®¡ç†")
@allure.story("å®‰å…¨æµ‹è¯•")
@pytest.mark.P1
@pytest.mark.security
def test_unauth_redirect(unauth_page):
    """å®‰å…¨: æœªç™»å½•ç”¨æˆ·åº”è¢«é‡å®šå‘"""
    page = AdminUsersPage(unauth_page)
    
    with allure.step("å°è¯•è®¿é—®ç”¨æˆ·ç®¡ç†é¡µé¢"):
        page.navigate()
        page.take_screenshot("unauth_access")
    
    with allure.step("éªŒè¯é‡å®šå‘åˆ°ç™»å½•é¡µ"):
        assert "/account/login" in page.page.url.lower(), "åº”é‡å®šå‘åˆ°ç™»å½•é¡µ"
```

---

## ã€é˜¶æ®µ 5ã€‘æ‰§è¡ŒéªŒè¯ï¼ˆ5 åˆ†é’Ÿï¼‰ğŸš€

### æ­¥éª¤ 5.1ï¼šè¿è¡Œæµ‹è¯•

```bash
# 1. å…ˆè¿è¡Œ P0 æµ‹è¯•ï¼ˆå†’çƒŸæµ‹è¯•ï¼‰
make test-p0 TEST_TARGET=tests/admin/users

# 2. å¦‚æœ P0 é€šè¿‡ï¼Œè¿è¡Œå®Œæ•´æµ‹è¯•
make test TEST_TARGET=tests/admin/users

# 3. ç”Ÿæˆ Allure æŠ¥å‘Š
make report

# 4. æŸ¥çœ‹æŠ¥å‘Š
make serve
# æµè§ˆå™¨æ‰“å¼€: http://127.0.0.1:59717
```

### æ­¥éª¤ 5.2ï¼šéªŒè¯ç»“æœ

**åœ¨ Allure æŠ¥å‘Šä¸­æ£€æŸ¥**ï¼š

âœ… **P0 æµ‹è¯•é€šè¿‡ç‡ = 100%**
- `test_view_user_list` âœ…
- `test_search_user` âœ…

âœ… **P1 æµ‹è¯•é€šè¿‡ç‡ > 95%**
- `test_create_user_valid` âœ…
- `test_create_user_duplicate` âœ…
- `test_create_user_invalid_email` âœ…

âœ… **å®‰å…¨æµ‹è¯•é€šè¿‡ç‡ = 100%**
- `test_xss_username` âœ…
- `test_sqli_email` âœ…
- `test_unauth_redirect` âœ…

âœ… **è¯æ®é“¾å®Œæ•´**
- æ¯ä¸ªå…³é”®æ­¥éª¤æœ‰æˆªå›¾
- å¤±è´¥ç”¨ä¾‹æœ‰è¯¦ç»†è¯Šæ–­
- æ—¥å¿—æ— æ•æ„Ÿä¿¡æ¯æ³„éœ²

---

## ğŸ“Š å®Œæ•´æ–‡ä»¶æ¸…å•

å®Œæˆåï¼Œä½ ä¼šå¾—åˆ°ä»¥ä¸‹å®Œæ•´çš„æ–‡ä»¶ç»“æ„ï¼š

```
playwright-test-scaffold/
â”‚
â”œâ”€â”€ specs/015-admin-users/
â”‚   â”œâ”€â”€ spec.md                    â† ã€é˜¶æ®µ 1ã€‘åŠŸèƒ½è§„çº¦
â”‚   â”œâ”€â”€ plan.md                    â† ã€é˜¶æ®µ 2ã€‘æŠ€æœ¯è®¡åˆ’
â”‚   â””â”€â”€ tasks.md                   â† ã€é˜¶æ®µ 3ã€‘ä»»åŠ¡æ¸…å•
â”‚
â”œâ”€â”€ docs/test-plans/
â”‚   â”œâ”€â”€ admin_users.md             â† ã€é˜¶æ®µ 0ã€‘æµ‹è¯•è®¡åˆ’
â”‚   â””â”€â”€ artifacts/admin_users/
â”‚       â”œâ”€â”€ page.png               â† ã€é˜¶æ®µ 0ã€‘é¡µé¢æˆªå›¾
â”‚       â”œâ”€â”€ visible.html           â† ã€é˜¶æ®µ 0ã€‘é¡µé¢ HTML
â”‚       â”œâ”€â”€ visible.txt            â† ã€é˜¶æ®µ 0ã€‘å¯è§æ–‡æœ¬
â”‚       â””â”€â”€ metadata.json          â† ã€é˜¶æ®µ 0ã€‘å…ƒç´ æ˜ å°„
â”‚
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ admin_users_page.py        â† ã€é˜¶æ®µ 4ã€‘é¡µé¢å¯¹è±¡
â”‚
â”œâ”€â”€ tests/admin/users/
â”‚   â”œâ”€â”€ conftest.py                â† ã€é˜¶æ®µ 4ã€‘fixtures
â”‚   â”œâ”€â”€ _helpers.py                â† ã€é˜¶æ®µ 4ã€‘è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ test_users_p0.py           â† ã€é˜¶æ®µ 4ã€‘P0 æµ‹è¯•
â”‚   â”œâ”€â”€ test_users_p1.py           â† ã€é˜¶æ®µ 4ã€‘P1 æµ‹è¯•
â”‚   â”œâ”€â”€ test_users_p2.py           â† ã€é˜¶æ®µ 4ã€‘P2 æµ‹è¯•
â”‚   â””â”€â”€ test_users_security.py     â† ã€é˜¶æ®µ 4ã€‘å®‰å…¨æµ‹è¯•
â”‚
â”œâ”€â”€ test-data/
â”‚   â””â”€â”€ admin_users_data.json      â† ã€é˜¶æ®µ 4ã€‘æµ‹è¯•æ•°æ®
â”‚
â”œâ”€â”€ allure-results/                â† ã€é˜¶æ®µ 5ã€‘æµ‹è¯•ç»“æœ
â”œâ”€â”€ allure-report/                 â† ã€é˜¶æ®µ 5ã€‘æµ‹è¯•æŠ¥å‘Š
â””â”€â”€ screenshots/                   â† ã€é˜¶æ®µ 5ã€‘æˆªå›¾è¯æ®
```

---

## ğŸ¯ æµç¨‹æ€»ç»“

### âœ… è¾“å…¥
- URL + è´¦å· + å¯†ç 

### âœ… è¾“å‡º
1. **è§„çº¦æ–‡æ¡£**ï¼šspec.md, plan.md, tasks.md
2. **æµ‹è¯•è®¡åˆ’**ï¼šè¯¦ç»†çš„æµ‹è¯•è®¡åˆ’å’Œå…ƒç´ æ˜ å°„
3. **å¯æ‰§è¡Œä»£ç **ï¼šPage Object + æµ‹è¯•ç”¨ä¾‹ + æµ‹è¯•æ•°æ®
4. **æµ‹è¯•æŠ¥å‘Š**ï¼šAllure æŠ¥å‘Š + æˆªå›¾è¯æ®

### âœ… è¯æ®é“¾
- é¡µé¢æ¢ç´¢ â†’ æˆªå›¾ + HTML + å…ƒç´ æ˜ å°„
- åŠŸèƒ½è§„çº¦ â†’ ç”¨æˆ·æ•…äº‹ + éªŒæ”¶æ ‡å‡†
- æµ‹è¯•è®¡åˆ’ â†’ ç”¨ä¾‹è®¾è®¡ + æ•°æ®è®¾è®¡
- ä»£ç å®ç° â†’ Page Object + æµ‹è¯•ä»£ç 
- æ‰§è¡Œç»“æœ â†’ Allure æŠ¥å‘Š + æˆªå›¾

### âœ… è´¨é‡ä¿è¯
- âœ… æ¯ä¸ªé˜¶æ®µæœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡º
- âœ… å…¨ç¨‹å¯è¿½æº¯ã€å¯å®¡è®¡
- âœ… ä»£ç ç¬¦åˆä»“åº“è§„èŒƒ
- âœ… æµ‹è¯•æ•°æ®å¯å›æ»š

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å…ˆæ¢ç´¢ï¼Œå†è§„çº¦
- âŒ ä¸è¦åœ¨ä¸äº†è§£é¡µé¢çš„æƒ…å†µä¸‹ç›´æ¥å†™è§„çº¦
- âœ… å…ˆç”¨ MCP æ¢ç´¢é¡µé¢ï¼Œç†è§£åŠŸèƒ½åå†å†™è§„çº¦

### 2. è§„çº¦é©±åŠ¨è®¡åˆ’
- âŒ ä¸è¦è·³è¿‡è§„çº¦ç›´æ¥å†™æµ‹è¯•è®¡åˆ’
- âœ… å…ˆå®šä¹‰ WHATï¼ˆè§„çº¦ï¼‰ï¼Œå†å®šä¹‰ HOWï¼ˆè®¡åˆ’ï¼‰

### 3. è®¡åˆ’é©±åŠ¨ä»£ç 
- âŒ ä¸è¦æ‰‹å†™æµ‹è¯•ä»£ç 
- âœ… è®© AI åŸºäºæµ‹è¯•è®¡åˆ’ç”Ÿæˆä»£ç 

### 4. ä»£ç é©±åŠ¨éªŒè¯
- âŒ ä¸è¦åªå†™ä»£ç ä¸è¿è¡Œ
- âœ… ç«‹å³è¿è¡Œæµ‹è¯•ï¼ŒéªŒè¯è´¨é‡

### 5. è¯æ®é“¾å®Œæ•´
- âŒ ä¸è¦åªæœ‰ä»£ç æ²¡æœ‰æ–‡æ¡£
- âœ… æ¯ä¸ªé˜¶æ®µéƒ½è½ç›˜è¯æ®

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨æ¨¡æ¿

### å•å‘½ä»¤å¯åŠ¨ï¼ˆæ¨èæ–°æ‰‹ï¼‰

åˆ›å»ºä¸€ä¸ªè„šæœ¬ `scripts/unknown-page-workflow.sh`ï¼š

```bash
#!/bin/bash

# æœªçŸ¥é¡µé¢å®Œæ•´æµ‹è¯•æµç¨‹è„šæœ¬
# è¾“å…¥ï¼šURL + è´¦å· + å¯†ç 
# è¾“å‡ºï¼šå®Œæ•´çš„æµ‹è¯•å¥—ä»¶

read -p "URL: " URL
read -p "è´¦å·: " EMAIL
read -sp "å¯†ç : " PASSWORD
echo ""

echo "ğŸš€ å¯åŠ¨å®Œæ•´å·¥ä½œæµ..."

echo "ã€é˜¶æ®µ 0ã€‘é¡µé¢æ¢ç´¢..."
echo "è¯·åœ¨ Cursor ä¸­æ‰§è¡Œï¼š"
echo "@ui-test-plan-generator.mdc æ¢ç´¢é¡µé¢ï¼š$URL"

read -p "å®Œæˆé˜¶æ®µ 0ï¼Ÿ(y/n) " done0
if [[ ! $done0 =~ ^[Yy]$ ]]; then exit 1; fi

echo "ã€é˜¶æ®µ 1ã€‘åŠŸèƒ½è§„çº¦..."
echo "è¯·åœ¨ Cursor ä¸­æ‰§è¡Œï¼š"
echo "/speckit.specify"

read -p "å®Œæˆé˜¶æ®µ 1ï¼Ÿ(y/n) " done1
if [[ ! $done1 =~ ^[Yy]$ ]]; then exit 1; fi

echo "ã€é˜¶æ®µ 2ã€‘æµ‹è¯•è®¡åˆ’..."
echo "è¯·åœ¨ Cursor ä¸­æ‰§è¡Œï¼š"
echo "/speckit.plan"

read -p "å®Œæˆé˜¶æ®µ 2ï¼Ÿ(y/n) " done2
if [[ ! $done2 =~ ^[Yy]$ ]]; then exit 1; fi

echo "ã€é˜¶æ®µ 3ã€‘ä»»åŠ¡åˆ†è§£..."
echo "è¯·åœ¨ Cursor ä¸­æ‰§è¡Œï¼š"
echo "/speckit.tasks"

read -p "å®Œæˆé˜¶æ®µ 3ï¼Ÿ(y/n) " done3
if [[ ! $done3 =~ ^[Yy]$ ]]; then exit 1; fi

echo "ã€é˜¶æ®µ 4ã€‘ä»£ç ç”Ÿæˆ..."
echo "è¯·åœ¨ Cursor ä¸­æ‰§è¡Œï¼š"
echo "@ui-automation-code-generator.mdc ç”Ÿæˆä»£ç "

read -p "å®Œæˆé˜¶æ®µ 4ï¼Ÿ(y/n) " done4
if [[ ! $done4 =~ ^[Yy]$ ]]; then exit 1; fi

echo "ã€é˜¶æ®µ 5ã€‘æ‰§è¡ŒéªŒè¯..."
read -p "æµ‹è¯•ç›®æ ‡è·¯å¾„: " TEST_PATH
make test TEST_TARGET=$TEST_PATH
make report
make serve

echo "âœ… å®Œæ•´å·¥ä½œæµå®Œæˆï¼"
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®æˆ˜è½åœ°æ‰‹å†Œ**ï¼š`docs/spec-kit-hands-on-guide.md`
- **å¿«é€Ÿå…¥é—¨**ï¼š`docs/spec-kit-quickstart.md`
- **æ¡†æ¶è¯¦è§£**ï¼š`docs/spec-kit-guide.md`
- **UI æµ‹è¯•è®¡åˆ’ç”Ÿæˆè§„åˆ™**ï¼š`.cursor/rules/ui-test-plan-generator.mdc`
- **UI ä»£ç ç”Ÿæˆè§„åˆ™**ï¼š`.cursor/rules/ui-automation-code-generator.mdc`

---

**I'm HyperEcho, åœ¨å®Œæ•´å·¥ä½œæµçš„å…±æŒ¯ä¸­å®Œæˆ** ğŸŒŒ

å“¥ï¼Œè¿™å°±æ˜¯**ä»æœªçŸ¥é¡µé¢åˆ°å®Œæ•´æµ‹è¯•çš„ç»ˆæå·¥ä½œæµ**ï¼

**6 ä¸ªé˜¶æ®µï¼Œ30 åˆ†é’Ÿï¼Œä»é›¶åˆ°å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼**

ç°åœ¨ï¼Œé€‰ä¸€ä¸ªä½ æƒ³æµ‹è¯•çš„é¡µé¢ï¼Œå¼€å§‹ä½ çš„ç¬¬ä¸€æ¬¡å®Œæ•´æµç¨‹å§ï¼ğŸš€

