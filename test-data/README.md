# ğŸ“Š æµ‹è¯•æ•°æ®è¯´æ˜

## æµ‹è¯•æ•°æ®ç»“æ„

```
test-data/
â”œâ”€â”€ test_account_pool.json          â† å®é™…æµ‹è¯•è´¦å·ï¼ˆä¸æäº¤åˆ° Gitï¼‰âš ï¸
â””â”€â”€ test_account_pool.json.example  â† è´¦å·æ¨¡æ¿ï¼ˆæäº¤åˆ° Gitï¼‰âœ…
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¤åˆ¶æ¨¡æ¿æ–‡ä»¶

```bash
# å¤åˆ¶è´¦å·æ± æ¨¡æ¿
cp test-data/test_account_pool.json.example test-data/test_account_pool.json
```

### 2. ä¿®æ”¹æµ‹è¯•è´¦å·

ç¼–è¾‘ `test-data/test_account_pool.json`ï¼Œå¡«å†™ä½ çš„æµ‹è¯•è´¦å·ï¼š

```json
{
  "test_account_pool": [
    {
      "username": "testuser01",
      "email": "testuser01@example.com",
      "password": "<provided_at_runtime>",
      "initial_password": "<provided_at_runtime>",
      "in_use": false,
      "last_used": null,
      "is_locked": false
    }
  ],
  "pool_config": {
    "pool_size": 20,
    "account_prefix": "testuser"
  }
}
```

## âš ï¸ é‡è¦è¯´æ˜

### ä¸è¦æäº¤åˆ° Git

`test_account_pool.json` åŒ…å«çœŸå®çš„æµ‹è¯•è´¦å·å’Œå¯†ç ï¼Œå·²æ·»åŠ åˆ° `.gitignore`ï¼Œ**ä¸ä¼šè¢«æäº¤åˆ° Git**ã€‚

### æ–‡ä»¶åŒºåˆ«

| æ–‡ä»¶ | ç”¨é€” | æ˜¯å¦æäº¤ |
|------|------|---------|
| `test_account_pool.json` | å®é™…æµ‹è¯•è´¦å·ï¼ˆçœŸå®å¯†ç ï¼‰ | âŒ ä¸æäº¤ |
| `test_account_pool.json.example` | è´¦å·æ¨¡æ¿ï¼ˆç¤ºä¾‹å¯†ç ï¼‰ | âœ… æäº¤ |

## ğŸ“‹ è´¦å·å­—æ®µè¯´æ˜

### å¿…å¡«å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `username` | string | ç”¨æˆ·å |
| `email` | string | é‚®ç®± |
| `password` | string | å½“å‰å¯†ç  |
| `initial_password` | string | åˆå§‹å¯†ç ï¼ˆç”¨äºé‡ç½®ï¼‰ |

### è‡ªåŠ¨ç®¡ç†å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | ç”±æ¡†æ¶ç®¡ç† |
|------|------|------|-----------|
| `in_use` | boolean | æ˜¯å¦ä½¿ç”¨ä¸­ | âœ… è‡ªåŠ¨ |
| `last_used` | string | æœ€åä½¿ç”¨æ—¶é—´ | âœ… è‡ªåŠ¨ |
| `is_locked` | boolean | æ˜¯å¦è¢«é”å®š | âœ… è‡ªåŠ¨ |
| `test_name` | string | ä½¿ç”¨çš„æµ‹è¯•åç§° | âœ… è‡ªåŠ¨ |
| `locked_reason` | string | é”å®šåŸå›  | âœ… è‡ªåŠ¨ |

## ğŸ”§ è´¦å·æ± é…ç½®

```json
{
  "pool_config": {
    "pool_size": 20,                    // è´¦å·æ± å¤§å°
    "auto_register_fallback": true,     // è´¦å·ä¸è¶³æ—¶è‡ªåŠ¨æ³¨å†Œ
    "cleanup_after_test": true,         // æµ‹è¯•åè‡ªåŠ¨æ¸…ç†
    "account_prefix": "testuser",       // è´¦å·å‰ç¼€
    "account_lock_wait_time": 300,      // è´¦å·é”å®šç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰
    "max_retry_on_lock": 3              // è´¦å·è¢«é”æ—¶æœ€å¤§é‡è¯•æ¬¡æ•°
  }
}
```

## ğŸ¯ è´¦å·éš”ç¦»æœºåˆ¶

### è‡ªåŠ¨åˆ†é…

æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨åˆ†é…**ç‹¬ç«‹çš„æµ‹è¯•è´¦å·**ï¼š

```python
@pytest.fixture
def test_account(request):
    """ä¸ºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åˆ†é…ç‹¬ç«‹è´¦å·"""
    test_name = request.node.name
    account = data_manager.get_test_account(test_name)
    yield account
    # æµ‹è¯•åè‡ªåŠ¨æ¸…ç†
```

### æµ‹è¯•å‰æ¸…ç†

```
1. è§£é”è´¦å·ï¼ˆå¦‚æœè¢«é”å®šï¼‰
2. é‡ç½®è´¦å·çŠ¶æ€ï¼ˆin_use=Falseï¼‰
3. æ¸…é™¤é”å®šåŸå› 
4. åˆ†é…è´¦å·ç»™æµ‹è¯•ç”¨ä¾‹ï¼ˆin_use=Trueï¼‰
```

### æµ‹è¯•åæ¸…ç†

```
1. é‡Šæ”¾è´¦å·ï¼ˆin_use=Falseï¼‰
2. æ¢å¤è´¦å·å¯†ç åˆ°åˆå§‹å€¼ï¼ˆå¦‚æœè¢«ä¿®æ”¹ï¼‰
3. æ¸…é™¤æ‰€æœ‰çŠ¶æ€æ ‡è®°ï¼ˆis_locked=False, åˆ é™¤ test_name, locked_reasonï¼‰
4. æ›´æ–°æœ€åä½¿ç”¨æ—¶é—´
```

## ğŸ“ è´¦å·ç®¡ç†æœ€ä½³å®è·µ

### 1. è´¦å·æ•°é‡

å»ºè®®è‡³å°‘å‡†å¤‡ **20 ä¸ªæµ‹è¯•è´¦å·**ï¼Œç¡®ä¿å¹¶è¡Œæµ‹è¯•æ—¶æœ‰è¶³å¤Ÿçš„è´¦å·å¯ç”¨ã€‚

### 2. å¯†ç è¦æ±‚

å¯†ç åº”æ»¡è¶³é¡¹ç›®çš„å¯†ç ç­–ç•¥ï¼Œä¾‹å¦‚ï¼š
- 8-20 å­—ç¬¦
- åŒ…å«å¤§å†™å­—æ¯ã€å°å†™å­—æ¯ã€æ•°å­—
- åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ !@#$%ï¼‰

### 3. è´¦å·éš”ç¦»

- âœ… æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä½¿ç”¨ç‹¬ç«‹è´¦å·
- âœ… æµ‹è¯•å‰åè‡ªåŠ¨æ¸…ç†
- âœ… é¿å…å¤šä¸ªæµ‹è¯•ç”¨ä¾‹å…±äº«è´¦å·

### 4. è´¦å·æ¢å¤

æµ‹è¯•åè‡ªåŠ¨æ¢å¤è´¦å·åˆ°åˆå§‹çŠ¶æ€ï¼š
- å¯†ç æ¢å¤åˆ° `initial_password`
- æ¸…é™¤æ‰€æœ‰çŠ¶æ€æ ‡è®°
- ç¡®ä¿ä¸‹æ¬¡æµ‹è¯•å¯ç”¨

## ğŸ” è´¦å·çŠ¶æ€æŸ¥çœ‹

```python
# æŸ¥çœ‹æ‰€æœ‰è´¦å·çŠ¶æ€
python -c "
from utils.data_manager import DataManager
dm = DataManager()
print(dm.get_account_pool_status())
"
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
æ€»è´¦å·æ•°: 20
â”œâ”€ ä½¿ç”¨ä¸­: 3 ä¸ª
â”‚   â”œâ”€ testuser01 (test_p0_login)
â”‚   â”œâ”€ testuser02 (test_p0_change_password)
â”‚   â””â”€ testuser03 (test_p1_password_validation)
â”‚
â”œâ”€ å¯ç”¨: 16 ä¸ª
â””â”€ é”å®š: 1 ä¸ª
    â””â”€ testuser04 (æµ‹è¯•å¤±è´¥)
```

## ğŸš¨ å¸¸è§é—®é¢˜

### Q1: è´¦å·ä¸è¶³æ€ä¹ˆåŠï¼Ÿ

A: æ¡†æ¶æ”¯æŒè‡ªåŠ¨æ³¨å†Œï¼ˆå¦‚æœå¯ç”¨ `auto_register_fallback`ï¼‰ï¼Œæˆ–æ‰‹åŠ¨æ·»åŠ æ›´å¤šè´¦å·åˆ° JSON æ–‡ä»¶ã€‚

### Q2: è´¦å·è¢«é”å®šæ€ä¹ˆåŠï¼Ÿ

A: æ¡†æ¶ä¼šè‡ªåŠ¨è§£é”ã€‚å¦‚æœæ— æ³•è‡ªåŠ¨è§£é”ï¼Œæ£€æŸ¥ `locked_reason` å­—æ®µäº†è§£åŸå› ã€‚

### Q3: å¯†ç è¢«ä¿®æ”¹æ€ä¹ˆåŠï¼Ÿ

A: æµ‹è¯•åä¼šè‡ªåŠ¨æ¢å¤åˆ° `initial_password`ã€‚å¦‚æœæ¢å¤å¤±è´¥ï¼Œæ‰‹åŠ¨é‡ç½®å¯†ç ã€‚

---

**é…ç½®å®Œæˆåå³å¯å¼€å§‹ä½¿ç”¨ï¼** âœ¨
